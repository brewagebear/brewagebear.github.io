{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/front-controller-and-command-pattern/",
    "result": {"data":{"cur":{"id":"343cceaf-52c2-583c-b523-aba9a0c29c4a","html":"<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#step-11-%EB%94%94%EB%A0%89%ED%86%A0%EB%A6%AC-%ED%8C%A8%ED%84%B4\">STEP 1.1 디렉토리 패턴</a></li>\n<li><a href=\"#step-12-%ED%99%95%EC%9E%A5%EC%9E%90-%ED%8C%A8%ED%84%B4\">STEP 1.2 확장자 패턴</a></li>\n<li><a href=\"#step-21-frontcontroller-pattern\">STEP 2.1 FrontController-pattern</a></li>\n<li><a href=\"#step-22-frontcontroller-pattern-%EC%98%88%EC%A0%9C-%EC%86%8C%EC%8A%A4\">STEP 2.2 FrontController-pattern 예제 소스</a></li>\n<li><a href=\"#step-31-command-pattern\">STEP 3.1 Command-pattern</a></li>\n<li><a href=\"#step-32-command-pattern-%EC%98%88%EC%A0%9C-%EC%86%8C%EC%8A%A4\">STEP 3.2 Command-pattern 예제 소스</a></li>\n</ul>\n</div>\n<ul>\n<li>STEP 1. URI-pattern\n<ul>\n<li>STEP 1.1 디렉터리 패턴</li>\n<li>STEP 1.2 확장자 패턴</li>\n</ul>\n</li>\n<li>STEP 2. FrontController-pattern\n<ul>\n<li>STEP 2.1 FrontController-pattern이란?</li>\n<li>STEP 2.2 FrontController-pattern 예제 소스</li>\n</ul>\n</li>\n<li>STEP 3. Command-pattern\n<ul>\n<li>STEP 3.1 Command-pattern이란?</li>\n<li>STEP 3.2 Command-pattern 예제 소스</li>\n</ul>\n</li>\n<li>STEP 4. Review</li>\n</ul>\n<h1 id=\"개요\" style=\"position:relative;\"><a href=\"#%EA%B0%9C%EC%9A%94\" aria-label=\"개요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>개요</h1>\n<p>MVC 패턴을 통한 Servlet WebApplication을 만들 때 사용하는 주된 패턴 중에 하나이다.\n앞으로 계속해서 서블릿과 JSP 그리고 스프링에 대해서 포스팅을 하게 될 것인데, 나머지 부분은 양적인 측면으로 정리할게 많아서 먼저 정리를 해본다.</p>\n<p>상당 부분 인프런의 <a href=\"https://www.inflearn.com/course/%EC%8B%A4%EC%A0%84-jsp-%EA%B0%95%EC%A2%8C/lecture/1158\">실전-jsp-강좌</a> 를 참고하였으니, 보다 자세히 보고싶은 사람들은 여기를 보면 될 것 같다.</p>\n<h2 id=\"step-11-디렉토리-패턴\" style=\"position:relative;\"><a href=\"#step-11-%EB%94%94%EB%A0%89%ED%86%A0%EB%A6%AC-%ED%8C%A8%ED%84%B4\" aria-label=\"step 11 디렉토리 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 1.1 디렉토리 패턴</h2>\n<p>아주 단순한 구조의 url 패턴이라고 볼 수가 있다. 디렉토리 형태로 서버의 해당 컴포넌트를 찾아서 실행하는 구조이다.</p>\n<p>예시를 들면, 다음과 같다.</p>\n<blockquote>\n<p><a href=\"http://127.0.0.1/top-ing/hello\">http://127.0.0.1/top-ing/hello</a></p>\n</blockquote>\n<blockquote>\n<p><a href=\"http://127.0.0.1/top-ing/world\">http://127.0.0.1/top-ing/world</a></p>\n</blockquote>\n<p>이렇게 디렉토리 패턴을 사용하여 url을 설계를 하면, hello 디렉토리를 클라이언트가 요청했을 때는 /hello 서블릿이 반환되며, world 디렉토리를 요청했을 경우에는 /world 서블릿이 반환이 된다.</p>\n<h2 id=\"step-12-확장자-패턴\" style=\"position:relative;\"><a href=\"#step-12-%ED%99%95%EC%9E%A5%EC%9E%90-%ED%8C%A8%ED%84%B4\" aria-label=\"step 12 확장자 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 1.2 확장자 패턴</h2>\n<p>확장자 형태로 서버의 해당 컴포넌트를 찾아서 실행하는 구조이다.</p>\n<p>예시를 들면, 다음과 같다.</p>\n<blockquote>\n<p><a href=\"http://127.0.0.1/top-ing/hello.do\">http://127.0.0.1/top-ing/hello.do</a></p>\n</blockquote>\n<blockquote>\n<p><a href=\"http://127.0.0.1/top-ing/world.do\">http://127.0.0.1/top-ing/world.do</a></p>\n</blockquote>\n<p>이런 경우에는 디렉토리 패턴과 다르게 클라이언트가 hello.do를 요청하던 world.do를 요청하던 간에 *.do 서블릿이 모두 받아서 처리한다.</p>\n<p>그렇다면 hello.do를 요청했을 때와 world.do를 요청했을 때와 하는 일이 같은가?\n아니다. 여러개의 응답을 동시에 처리하는 *.do 서블릿에서 클라이언트의 요청에 맞게 요청을 구분을 해준다.</p>\n<h2 id=\"step-21-frontcontroller-pattern\" style=\"position:relative;\"><a href=\"#step-21-frontcontroller-pattern\" aria-label=\"step 21 frontcontroller pattern permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 2.1 FrontController-pattern</h2>\n<p>단순하게 말하자면, <strong>클라이언트의 다양한 요청을 한 곳으로 집중시켜, 개발 및 요지보수에 효율을 극대화하는 패턴이다.</strong></p>\n<p>만약, 다양한 요청마다 서블릿을 하나하나 서블릿을 만든다하면 유지보수 및 개발의 효율이 떨어질 수 밖에 없을 것이다.\n따라서 프론트컨트롤러 패턴은 각각의 분기를 처리해주는 어떠한 컨트롤러를 앞 단에 두어(그래서 FrontController)각 요청에 맞게끔 분기하여 처리해주는 패턴을 말한다.</p>\n<p>소스를 보자!</p>\n<h2 id=\"step-22-frontcontroller-pattern-예제-소스\" style=\"position:relative;\"><a href=\"#step-22-frontcontroller-pattern-%EC%98%88%EC%A0%9C-%EC%86%8C%EC%8A%A4\" aria-label=\"step 22 frontcontroller pattern 예제 소스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 2.2 FrontController-pattern 예제 소스</h2>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">... (중략) ...\n\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>insert.do<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>insert<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hr</span> <span class=\"token punctuation\">/></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://localhost:8080&lt;%=request.getContextPath()%>/update.do<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>update<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hr</span> <span class=\"token punctuation\">/></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://localhost:8080/top-ing/select.do<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>select<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hr</span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>&lt;%=request.getContextPath()%>/delete.do<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>delete<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n\n... (중략) ...</code></pre></div>\n<p>위와 같은 소스가 존재한다고 가정을 해보자.</p>\n<p><code class=\"language-text\">insert, update, select, delete</code> 와 같이 다양한 요청을 요구할 수 있는 JSP 페이지이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// *.do 확장자를 모두 처리하겠다고 명시</span>\n<span class=\"token annotation punctuation\">@WebServlet</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"*.do\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">FrontCon</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">HttpServlet</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">long</span> serialVersionUID <span class=\"token operator\">=</span> <span class=\"token number\">1L</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">FrontCon</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">doGet</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> response<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ServletException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"doGet\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">actionDo</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">doPost</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> response<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ServletException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"doPost\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">actionDo</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">actionDo</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> response<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ServletException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"actionDo\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token comment\">/*\n         * 이 부분은 밑에서 다시 설명하겠지만, 주석으로 설명을 해보겠다. \n         * 1. getRequestURI() 메소드를 통해서 요청된 전체 uri를 가져온다.\n         *      e.g) http://localhost:8080/top-ing/hello.do -> top-ing/hello.do\n         * 2. getContextPath() 메소드를 통해서 프로젝트의 Context Path명을 가져온다.\n         *      e.g) http://localhost:8080/top-ing/hello.do -> top-ing/\n         * 3. substring() 메소드를 통해서, ContextPath를 전체 uri에서 지운다. \n         *      e.g) top-ing/hello -> hello.do\n         * 4. actionDo() 메소드에서는 substring 결과값(command)을 통해서 요청을 분기한다. \n         */</span>\n\t\t<span class=\"token class-name\">String</span> uri <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getRequestURI</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"uri : \"</span> <span class=\"token operator\">+</span> uri<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token class-name\">String</span> conPath <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getContextPath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"conPath : \"</span> <span class=\"token operator\">+</span> conPath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token class-name\">String</span> command <span class=\"token operator\">=</span> uri<span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span>conPath<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"command : \"</span> <span class=\"token operator\">+</span> command<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>command<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/insert.do\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"insert\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"----------------\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>command<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/update.do\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"update\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"----------------\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>command<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/select.do\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"select\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"----------------\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>command<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/delete.do\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"delete\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"----------------\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"step-31-command-pattern\" style=\"position:relative;\"><a href=\"#step-31-command-pattern\" aria-label=\"step 31 command pattern permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 3.1 Command-pattern</h2>\n<p>클라이언트로부터 받은 요청들에 대해서, 서블릿이 작업을 직접 처리 하지 않고, 해당 클래스가 처리하도록 하는 패턴이다.</p>\n<p>무슨 말인지 잘 와닿지않을 수 있기때문에, 위의 소스코드를 인용하여 설명해보겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span>중략<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>command<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/insert.do\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"insert\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"----------------\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>command<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/update.do\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"update\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"----------------\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>command<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/select.do\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"select\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"----------------\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>command<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/delete.do\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"delete\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"----------------\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span>중략<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<p>이 부분이 <code class=\"language-text\">doAction</code>에서 클라이언트의 요청을 분기하는 부분이 될 것이다.\n하지만 만약에 클라이언트가 요청할 수 있는 것들이 수십~수백개가 된다면 어떤일이 발생할까?\n계속해서, <code class=\"language-text\">else if ...</code> 으로 분기를 처리해야될까?</p>\n<p>그래서 나온 방법이 <strong>모든 요청을 직접 처리하지 않고, 다른 서블릿에 처리</strong>를 보내는 것이다.\n더 자세히 말하면 MVC 패턴으로 웹 어플리케이션을 구현할 때, 프론트컨트롤러 패턴을 적용한 서블릿의 요청 개수가 많아질수록 코드가 난잡해지니 각각의 커맨드 클래스로 분산 시키는 방식을 사용한다.</p>\n<p>소스를 보자!</p>\n<h2 id=\"step-32-command-pattern-예제-소스\" style=\"position:relative;\"><a href=\"#step-32-command-pattern-%EC%98%88%EC%A0%9C-%EC%86%8C%EC%8A%A4\" aria-label=\"step 32 command pattern 예제 소스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 3.2 Command-pattern 예제 소스</h2>\n<p>일단, 먼저 가정을 해보자.\nmemberDB의 접근을 위한 memberDAO가 있고, 그것을 사용하는 DTO가 있다고 가정하자.\n여기서 DTO, DAO를 잘 모르겠다면, 자세히 설명된 링크 <sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup>가 있으니 참고하자.</p>\n<p>우리가 위에서 봤던 Front.con 파일에 DB에 등록된 모든 멤버들의 정보들을 볼 수 있는 요청을 추가했다고 가정하자.\n클라이언트는 membersAll.do를 요청했다고 가정한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span>중략<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">actionDo</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> response<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ServletException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token comment\">// TODO Auto-generated method stub</span>\n\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"actionDo\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\n\t\t<span class=\"token class-name\">String</span> uri <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getRequestURI</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token class-name\">String</span> conPath <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getContextPath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token class-name\">String</span> command <span class=\"token operator\">=</span> uri<span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span>conPath<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">//추가된 로직 부분</span>\n\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>command<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/membersAll.do\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\tresponse<span class=\"token punctuation\">.</span><span class=\"token function\">setContentType</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text/html; charset=EUC-KR\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token class-name\">PrintWriter</span> writer <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">getWriter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\twriter<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;html>&lt;head>&lt;/head>&lt;body>\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">/*\n             * membersAll을 처리하는 서비스를 만들어서 사용한다.\n             * 커맨드로 분기한 후에 DAO처리를 여기서 수행하는 것이 아니라\n             * 해당 커맨드 인터페이스인 MembersAllService만 만들어서 사용한다.\n             */</span>\n\t\t\t<span class=\"token class-name\">Service</span> service <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MembersAllService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MemberDto</span><span class=\"token punctuation\">></span></span> dtos <span class=\"token operator\">=</span> service<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\n\t\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> dtos<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token class-name\">MemberDto</span> dto <span class=\"token operator\">=</span> dtos<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token class-name\">String</span> id <span class=\"token operator\">=</span> dto<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token class-name\">String</span> pw <span class=\"token operator\">=</span> dto<span class=\"token punctuation\">.</span><span class=\"token function\">getPw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token class-name\">String</span> name <span class=\"token operator\">=</span> dto<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token class-name\">String</span> eMail <span class=\"token operator\">=</span> dto<span class=\"token punctuation\">.</span><span class=\"token function\">geteMail</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token class-name\">Timestamp</span> rDate <span class=\"token operator\">=</span> dto<span class=\"token punctuation\">.</span><span class=\"token function\">getrDate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token class-name\">String</span> address <span class=\"token operator\">=</span> dto<span class=\"token punctuation\">.</span><span class=\"token function\">getAddress</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\n\t\t\t\twriter<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>id <span class=\"token operator\">+</span> <span class=\"token string\">\", \"</span> <span class=\"token operator\">+</span> pw <span class=\"token operator\">+</span> <span class=\"token string\">\", \"</span> <span class=\"token operator\">+</span> name <span class=\"token operator\">+</span> <span class=\"token string\">\", \"</span> <span class=\"token operator\">+</span> eMail <span class=\"token operator\">+</span> <span class=\"token string\">\", \"</span> <span class=\"token operator\">+</span> rDate<span class=\"token punctuation\">.</span><span class=\"token function\">toLocalDateTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\", \"</span> <span class=\"token operator\">+</span> address <span class=\"token operator\">+</span> <span class=\"token string\">\"&lt;hr />\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t\n\t\t\twriter<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;/body>&lt;/html>\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span>중략<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">//Service.java</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Service</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//단순하게 execute() 메소드만 선언된 인터페이스를 활용하여, 프론트컨트롤러에서 사용하게끔 한다.</span>\n    <span class=\"token comment\">//세부 로직은 Service를 구현하는 구현체에서 처리한다. </span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MemberDto</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token comment\">//MeberAllservice.java </span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MembersAllService</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Service</span> <span class=\"token punctuation\">{</span>\n\t\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">MembersAllService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n\t<span class=\"token annotation punctuation\">@Override</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MemberDto</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> response<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        \n        <span class=\"token comment\">//여기서 DAO를 생성 후에 DAO의 메소드인 membersAll()을 호출한다. </span>\n\t\t<span class=\"token class-name\">MemberDao</span> dao <span class=\"token operator\">=</span> <span class=\"token class-name\">MemberDao</span><span class=\"token punctuation\">.</span><span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> dao<span class=\"token punctuation\">.</span><span class=\"token function\">membersAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>여기서 Service를 구현한 MembersAllService 인터페이스를 볼 수가 있는데 이렇듯, 만약에 다른 요청이 들어와도, URI를 프론트컨트롤러에서 분기처리한 후에 해당 서비스에 맞는 서비스를 생성한 후에, <code class=\"language-text\">service.excute()</code> 처리만 함으로써 다양한 요청 처리를 다른 클래스에 위임할 수가 있다.</p>\n<h1 id=\"step-4-review\" style=\"position:relative;\"><a href=\"#step-4-review\" aria-label=\"step 4 review permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 4. Review</h1>\n<p>전체적으로 정리하고, 이번 포스팅을 마무리 짓도록 하겠다.</p>\n<p>원시적으로, 모든 요청마다 서블릿을 하나하나 생성하는 방법은 다음과 같다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 23.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABHUlEQVQY03WQTUsCURSG52e27he0qoURKRWO2iY37VoWiJaJM5L+gSCK7INwPtXoywSndKxx5j5xr0IrDxzOXdzznud9tfVSh4Nml+2qQ7pqE8UJ135Atu6iGx6Fhk/e9MkaHhf3A2QJIVhWWqosBX0yVZu9mq0+3/W/0OsOuuGSN+ct382FYBjFJEIwHP/SeRvjDSbY72P6wxBto2RRbPXInDukz2xmccJNN1B0kiy/IMyZ/4TfPzGzRHBy+cLKYZtUxWb16JGtUwtts2JRbPrs1hxFGCeCdi8gZ7jsN6Rlj4LpodddWg9zwWmUqBmEEf5gwvMwpPsZ8jqaoq0dP6mFVNlC2pcZXnkjFcFOzVEtj0kHxu2HEpJ2l+X4B/j3WlPzFjplAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"프론트컨트롤러 패턴1\"\n        title=\"프론트컨트롤러 패턴1\"\n        src=\"/static/dd80541346f73a2fd93a7fdb194b0e57/37523/frontcontroller.png\"\n        srcset=\"/static/dd80541346f73a2fd93a7fdb194b0e57/e9ff0/frontcontroller.png 180w,\n/static/dd80541346f73a2fd93a7fdb194b0e57/f21e7/frontcontroller.png 360w,\n/static/dd80541346f73a2fd93a7fdb194b0e57/37523/frontcontroller.png 720w,\n/static/dd80541346f73a2fd93a7fdb194b0e57/302a4/frontcontroller.png 1080w,\n/static/dd80541346f73a2fd93a7fdb194b0e57/62da8/frontcontroller.png 1262w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>이러한 방식의 문제점은 계속해서 클라이언트가 할 수 있는 요청의 수가 증가할 때마다 서블릿 수가 증가한다는 문제점이 있다. 이를 해결하고자, FrontController 패턴이 대두하였고 아래와 같다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 24.444444444444443%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABOElEQVQY03WQS0sCYRSG5wdGq6BaVLTIFrUMChxCtxJBF8xACcUWZWm26IJUtAkiWpSZ1jfpjJG3MVNzcjTyiRnb9sLhXOCc8/BKclTBe55n+VTFHVco1U1+ej1U3eD1/Qutathh9fnqF5puUDe6/CdJjgpWEiqeoyyuA4He7CBKBsMb94wHUkwF0ziCaWbCGSa3Hhny3rNzXbSXi/U2otQipxt2LjdMpPnIMysJDc9xDue+oPrZ4VZtMLh2hyOUYfEgy9yuwHWYZWFPYWD1jvBVwT7ou8gz5n/AGVWYCKTwX+aR5H3BakJl6SSHKyaoNE1E2WB0M2mTTYf6hBbp7PYTI74kkZs+Ya3V4a3WplRvU/ho82F0keSYwvqZ5aGGO/5ie2ip0jDRm6adrSeVv9qatczvfz38BV8JV33Tu0nrAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"프론트컨트롤러 패턴2\"\n        title=\"프론트컨트롤러 패턴2\"\n        src=\"/static/e8688d42de759e19823c7c5cba2814e0/37523/frontcontroller2.png\"\n        srcset=\"/static/e8688d42de759e19823c7c5cba2814e0/e9ff0/frontcontroller2.png 180w,\n/static/e8688d42de759e19823c7c5cba2814e0/f21e7/frontcontroller2.png 360w,\n/static/e8688d42de759e19823c7c5cba2814e0/37523/frontcontroller2.png 720w,\n/static/e8688d42de759e19823c7c5cba2814e0/302a4/frontcontroller2.png 1080w,\n/static/e8688d42de759e19823c7c5cba2814e0/11a8f/frontcontroller2.png 1272w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>하지만, FrontController 패턴 또한, 요청이 많아 질수록 처리해야되는 분기가 많아지는 문제점이 발생하여,\nURI 분기는 FrontController에서 처리하고, 나머지 세부로직은 인터페이스를 처리하게끔 하려했고, 그에 따라 Command 패턴이 대두되게 되었다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 28.333333333333332%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABTUlEQVQY05WPS0sCARSF5yfWfwiCCFpEqwqhoIUJkaVtI3pQWSmIDzRdlEGaFjPqlFO+g8pGSS2teXzhRAs3QQc+Dmdx7uUIumGi6SYDN02Tv6Q9KXTEKIWYh9KZj49cHE2tM2gNugOEJX8RZ7TCWrRCt6+RqbwRkhrE8uoPsmrlTKVNUc7iOEpj96RxnFzj8qZQaw9DT4UF3z2rkTIr4TJq55OZgwIj6yJjmzIT27eMb8mMukSmDxTyooTTl8Hll9gIZHF7U7QeS0TyTdyxKq7TKsLktszskcL8sUKr+8lyqMzkzq11+Jep3TvswTJZMcfc3g22wyw2T47F/TRqvUSx0SOhNLlQWgjezLM1KSw16H/pfOmGNf29r9Pt65Z3ehq6CS+KhD+SIBBLEoynCEfPadfvhyfzH7VqUL2E+hXUrqCaxOy8YgC6YVh8AxFkqFml/Cz7AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"커맨드 패턴2\"\n        title=\"커맨드 패턴2\"\n        src=\"/static/bf13c175f32f76e01229f0e6be732859/37523/command2.png\"\n        srcset=\"/static/bf13c175f32f76e01229f0e6be732859/e9ff0/command2.png 180w,\n/static/bf13c175f32f76e01229f0e6be732859/f21e7/command2.png 360w,\n/static/bf13c175f32f76e01229f0e6be732859/37523/command2.png 720w,\n/static/bf13c175f32f76e01229f0e6be732859/302a4/command2.png 1080w,\n/static/bf13c175f32f76e01229f0e6be732859/07a9c/command2.png 1440w,\n/static/bf13c175f32f76e01229f0e6be732859/e3729/command2.png 1794w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>이처럼, 인터페이스를 활용하여 각 요청에 대한 세부로직은 인터페이스가 처리하며, FrontController에 위치한 서블릿은 URI 분기만 처리해주는 식으로 발전했고 이 방식은 Servlet MVC에서 많이 쓰이는 방식이다.</p>\n<div class=\"footnotes\">\n<hr>\n<ol>\n<li id=\"fn-1\"><a href=\"https://jungwoon.github.io/common%20sense/2017/11/16/DAO-VO-DTO/\">DAO vs DTO(=VO) 개념 알아보기</a><a href=\"#fnref-1\" class=\"footnote-backref\">↩</a></li>\n</ol>\n</div>","excerpt":"STEP 1.1 디렉토리 패턴 STEP 1.2 확장자 패턴 STEP 2.1 FrontController-pattern STEP 2.2 FrontController-pattern 예제 소스 STEP 3.1 Command-pattern STEP 3.2 Command-pattern 예제 소스 STEP 1. URI-pattern STEP 1.1 디렉터리 패턴 STEP 1.2 확장자 패턴 STEP 2. FrontController-pattern STEP 2.1 FrontController-pattern이란? STEP 2.2 FrontController-pattern 예제 소스 STEP 3. Command-pattern STEP 3.1 Command-pattern이란? STEP 3.2 Command-pattern 예제 소스 STEP 4. Review 개요 MVC 패턴을 통한 Servlet WebApplication을 만들 때 사용하는 주된 패턴 중에 하나이다.\n앞으로 계속해서 서블릿과 JSP…","frontmatter":{"date":"July 09, 2019","title":"FrontController & Command Pattern - 프론트 컨트롤러와 커맨드 패턴","categories":"개발","author":"개발한입","emoji":"💻"},"fields":{"slug":"/front-controller-and-command-pattern/"}},"next":{"id":"0c588027-74a3-5b30-8f05-e3a905c0576a","html":"<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#step-11-%EC%A0%9C%EC%96%B4-%EC%97%AD%EC%A0%84inversion-of-control%EC%9D%B4%EB%9E%80\">STEP 1.1 제어 역전(Inversion of Control)이란?</a></p>\n<ul>\n<li><a href=\"#step-12-bean-%EB%93%B1%EB%A1%9D-%EB%B0%A9%EB%B2%95\">STEP 1.2 Bean 등록 방법</a></li>\n<li><a href=\"#step-13-%EC%9D%98%EC%A1%B4%EC%84%B1-%EC%A3%BC%EC%9E%85di%EB%9E%80\">STEP 1.3 의존성 주입(DI)란?</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#step-21-%EA%B4%80%EC%A0%90-%EC%A7%80%ED%96%A5-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8Daop%EB%9E%80\">STEP 2.1 관점 지향 프로그래밍(AOP)란?</a></p>\n<ul>\n<li><a href=\"#step-22-%ED%94%84%EB%A1%9D%EC%8B%9C-%ED%8C%A8%ED%84%B4%EC%9D%B4%EB%9E%80\">STEP 2.2 프록시 패턴이란?</a></li>\n<li><a href=\"#step-23-aop-%EC%A0%81%EC%9A%A9-%EC%98%88%EC%A0%9C\">STEP 2.3 AOP 적용 예제</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#step-31-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%B6%94%EC%83%81%ED%99%94psa%EB%9E%80\">STEP 3.1 서비스 추상화(PSA)란?</a></p>\n<ul>\n<li><a href=\"#step-32-%EC%8A%A4%ED%94%84%EB%A7%81-%ED%8A%B8%EB%9E%99%EC%9E%AD%EC%85%98\">STEP 3.2 스프링 트랙잭션</a></li>\n</ul>\n</li>\n</ul>\n</div>\n<ul>\n<li>STEP 1. 제어 역전(IoC, Inversion of Control)\n<ul>\n<li>STEP 1.1 제어 역전(IoC)이란?</li>\n<li>STEP 1.2 Bean 등록 방법</li>\n<li>STEP 1.3 의존성 주입(DI)란?</li>\n</ul>\n</li>\n<li>STEP 2. 관점 지향 프로그래밍(Aspect Oriented Programming)\n<ul>\n<li>STEP 2.1 관점 지향 프로그래밍(AOP)란?</li>\n<li>STEP 2.2 프록시 패턴이란?</li>\n<li>STEP 2.3 AOP 적용 예제</li>\n</ul>\n</li>\n<li>STEP 3. 서비스 추상화(Portable Service Abstraction)\n<ul>\n<li>STEP 3.1 서비스 추상화(PSA)란?</li>\n<li>STEP 3.2 스프링 트랙잭션</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"개요\" style=\"position:relative;\"><a href=\"#%EA%B0%9C%EC%9A%94\" aria-label=\"개요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>개요</h1>\n<p>요즘은 다시 스프링 공부를 하고 있다. 예전부터 <a href=\"http://www.kyobobook.co.kr/product/detailViewKor.laf?ejkGb=KOR&#x26;mallGb=KOR&#x26;barcode=9788960773431&#x26;orderClick=LEA&#x26;Kc=\">토비의 스프링 3.1</a>)을 보면서 스프링 스터디를 하고자 했지만, 잘 안되는 찰나에 인프런에서 백기선 님의<a href=\"https://blog.inflearn.com/%EC%9E%90%EB%B0%94-%EC%8A%A4%ED%94%84%EB%A7%81-%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8C%ED%81%AC-%EB%A1%9C%EB%93%9C%EB%A7%B5/\">스프링 프레임워크 제대로 마스터하는 법</a>들을 볼 수가 있었고, 해당 내용을 다시 정리 차원에서 블로그 포스팅으로 남겨본다.</p>\n<p>책으로만 스터디할 때는 잘 이해 안됐던 내용들이 인터넷 강의를 보면서 체화가 되었으며, 좀 더 심도 깊게 이해할 수 있는 계기가 되었던 것 같다.</p>\n<p>여기서 다룰 예제코드는 <a href=\"https://github.com/spring-projects/spring-petclinic\">GitHub - spring-projects/spring-petclinic: A sample Spring-based application</a>를 사용하므로, <code class=\"language-text\">git clone</code>하여 따라오던가 아니면,\n<a href=\"https://www.inflearn.com/course/spring_revised_edition/dashboard\">인프런 - 예제로 배우는 스프링 입문 (개정판)</a> 이 인터넷 강의를 따라오면 될 것 같다.</p>\n<h2 id=\"step-11-제어-역전inversion-of-control이란\" style=\"position:relative;\"><a href=\"#step-11-%EC%A0%9C%EC%96%B4-%EC%97%AD%EC%A0%84inversion-of-control%EC%9D%B4%EB%9E%80\" aria-label=\"step 11 제어 역전inversion of control이란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 1.1 제어 역전(Inversion of Control)이란?</h2>\n<p>자바에서 일반적인 경우에 자기가 사용할 의존성을 자기가 만들어 사용한다.\n이게 무슨 뜻인지 잘 모르겠다면, 아래의 코드를 보자!</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">OwnerController</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">private</span> <span class=\"token class-name\">OwnerRepository</span> repo <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">OwnerRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위의 예시에서 자기란 (OwnerController)를 뜻한다.\n여기서 OwnerController는 자기가 사용할 의존성을 직접 만들어서 사용한다.\n<code class=\"language-text\">new OwnerRepository();</code></p>\n<p>하지만, 제어 역전에서는 컨트롤러가 의존성을 직접 관리하는 것이 아니라 아래와 같은 코드로 동작하게끔 하는 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">OwnerController</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">//오너 레포지스트리를 사용하긴 하지만 직접 만들지는 않는다.</span>\n\t<span class=\"token keyword\">private</span> <span class=\"token class-name\">OwnerRepository</span> repo<span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">//생성자를 통해서 받아온다 -> 즉, 오너 컨트롤러가 하는 일이 아님.</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">OwnerController</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">OwnerRepository</span> repo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>repo <span class=\"token operator\">=</span> repo<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">OwnerControllerTest</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token annotation punctuation\">@Test</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token class-name\">OwnerRepository</span> repo <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">OwnerRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token class-name\">OwnerController</span> controller <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">OwnerController</span><span class=\"token punctuation\">(</span>repo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 코드에 주석에도 설명되어 있듯이,  초기 코드에서는 OwnerController가 자신이 필요한 의존성인 OwnerRepository를 직접 생성 <code class=\"language-text\">new OwnerRepository();</code> 한 것을 볼 수 있는데 아래 코드를 보면, OwnerController가 직접 생성하는 것이 아닌 생성자의 인자로 OwnerRepository가 전달되며, <strong>외부에서 주입</strong>이 되는 것을 알 수가 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">OwnerController</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">OwnerRepository</span> repo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>repo <span class=\"token operator\">=</span> repo<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span></code></pre></div>\n<p>즉, 의존성이 외부에서 주입(DI, Dependency Injection)이 되는 상황이다.\n의존성 주입과 제어역전은 사실 별개 아니였다. 사실상 의존성 주입과 제어 역전은 같은 의미로 사용되며, <strong>제어 역전은 의존성 주입을 통해 이루어짐을 확인 할 수가 있다.</strong></p>\n<p>그런데 이런 제어 역전을 활용하면 어떤 장점이 있는 것일까?</p>\n<p>우리가  <code class=\"language-text\">new OwnerRepository();</code>  를 통해서 인스턴스를 생성했다고 가정해보자.\n그런데 만약? 인스턴스의 생성 비용이 다소 크다던가, 굳이 일일히 이렇게 생성해야 되나?\n라는 생각이 느껴질 수가 있다.</p>\n<p>스프링 프레임워크는 IoC 컨테이너를 통해서, 이러한 인스턴스의 생성을 일괄적으로 진행하고, 라이프 사이클 관리까지 컨테이너에 맡긴다.</p>\n<p>따라서 인스턴스의 생성 및 관리 주체가 OwnerController가 아닌 외부에서 OwnerRepository를 주입해주는 제 3자 혹은 컨테이너가 되기 때문에 제어 역전이라고 부르는 것이다.</p>\n<p>위에서 <code class=\"language-text\">git clone</code> 하라 했던 샘플 프로젝트로 확인해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SampleController</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token class-name\">SampleRepository</span> sampleRepository<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">SampleController</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SampleRepository</span> sampleRepository<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>sampleRepository <span class=\"token operator\">=</span> sampleRepository<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token comment\">//sampleRepository에 기본 값 설정 X = Null pointer Exception이 발생할 수 있다고 생각할 수 있지만, 생성자가 1개 이므로, sampleRepository는 무조껀 생성되어야한다. 따라서, petClinic 프로젝트 또한 안전하다고 볼 수 있다.</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\tsampleRepository<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SampleRepository</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그렇다면? 스프링에서 의존성 주입은 어떤 방식으로 이루어질까?\n스프링 프레임워크 의존성 주입은 일반적으로, 스프링 IoC 컨테이너에 등록된 빈(Bean)에 해준다.</p>\n<p>그렇다면? IoC 컨테이너에 등록된 빈들을 어떻게 확인할까?</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Autowired</span>\n<span class=\"token class-name\">ApplicationContext</span> applicationContext<span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">//등록된 빈들의 이름을 가져온다.</span>\n\t<span class=\"token class-name\">String</span> s <span class=\"token operator\">=</span> applicationContext<span class=\"token punctuation\">.</span><span class=\"token function\">getBeanDefinitionNames</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">//이름을 활용하여 빈의 정보를 볼 수가 있다.</span>\n\tapplicationContext<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span>\n\n\t<span class=\"token comment\">//두번째 방식으로는 등록된 빈의 타입으로 꺼내오는 방식이다.</span>\n\t<span class=\"token class-name\">OwnerController</span> bean <span class=\"token operator\">=</span> applicationContext<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">OwnerController</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>bean<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isNotNull</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위와 같은 방법으로 가져올 수가 있다.\n잠시 추가 설명을 하자면, 스프링 IoC 컨테이너가 관리하는 객체를 빈(Bean)이라 부르는데, 여기서 위 소스에서 IoC 컨테이너 역할을 하는 것이 <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/context/ApplicationContext.html\">ApplicationContext</a>이다.</p>\n<p><a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/context/ApplicationContext.html\">ApplicationContext</a>는 <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/beans/factory/BeanFactory.html\">BeanFactory</a>라는 컨테이너를 상속받아서 보다 빈팩토리보다 다양한 역할을 할 수 있는 클래스이다.</p>\n<p>보다 가시적으로 확인하는 방법은 아래와 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Controller</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">OwnerController</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> VIEWS_OWNER_CREATE_OR_UPDATE_FORM <span class=\"token operator\">=</span> <span class=\"token string\">\"owners/createOrUpdateOwnerForm\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">OwnerRepository</span> owners<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">ApplicationContext</span> applicationContext<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">OwnerController</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">OwnerRepository</span> clinicService<span class=\"token punctuation\">,</span> <span class=\"token class-name\">ApplicationContext</span> applicationContext<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>owners <span class=\"token operator\">=</span> clinicService<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>applicationContext <span class=\"token operator\">=</span> applicationContext<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/bean\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@ResponseBody</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">bean</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token string\">\"bean: \"</span> <span class=\"token operator\">+</span> applicationContext<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">OwnerController</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">(</span>중략<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> </code></pre></div>\n<p>이 방식은  URL 요청으로 bean이 호출됐을 경우에 OwnerController 클래스의 해시 값을 보여준다.</p>\n<p>이 방식을 좀 더 업데이트하여, 과연 스프링에서 자체적으로 주입된 객체 (OwnerRepositry)와 우리가 알고  있는 IoC 컨테이너에서 주입되는 객체가 동일한 것인지 파악해보자!</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Controller</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">OwnerController</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> VIEWS_OWNER_CREATE_OR_UPDATE_FORM <span class=\"token operator\">=</span> <span class=\"token string\">\"owners/createOrUpdateOwnerForm\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">OwnerRepository</span> owners<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">ApplicationContext</span> applicationContext<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">OwnerController</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">OwnerRepository</span> clinicService<span class=\"token punctuation\">,</span> <span class=\"token class-name\">ApplicationContext</span> applicationContext<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>owners <span class=\"token operator\">=</span> clinicService<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>applicationContext <span class=\"token operator\">=</span> applicationContext<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/bean\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@ResponseBody</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">bean</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token string\">\"bean: \"</span> <span class=\"token operator\">+</span> applicationContext<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">OwnerRepository</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"\\n\"</span> \n                <span class=\"token operator\">+</span> <span class=\"token string\">\"owners: \"</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>owners<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">(</span>중략<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<p>결과 값을 확인해보자.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 2.2222222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAQElEQVQI1zXLuQ0AMQhE0e2/QxBgzsRNjGVLG0zyRv/LTBARmBmqCndHROC6mWFm0N2oKuy937/Wgog8u7v2dwdxoUiOAtMqLAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"결과값\"\n        title=\"결과값\"\n        src=\"/static/605cd1e17438c21281830390e8b6f066/37523/spring-result.png\"\n        srcset=\"/static/605cd1e17438c21281830390e8b6f066/e9ff0/spring-result.png 180w,\n/static/605cd1e17438c21281830390e8b6f066/f21e7/spring-result.png 360w,\n/static/605cd1e17438c21281830390e8b6f066/37523/spring-result.png 720w,\n/static/605cd1e17438c21281830390e8b6f066/302a4/spring-result.png 1080w,\n/static/605cd1e17438c21281830390e8b6f066/cdef6/spring-result.png 1163w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위와 같이 스프링 ApplicationContext를 사용하여, 직접 주입하는 경우와 IoC 컨테이너를 활용하여 주입하는 경우의 객체 값이 같음을 확인할 수가 있다.</p>\n<h3 id=\"step-12-bean-등록-방법\" style=\"position:relative;\"><a href=\"#step-12-bean-%EB%93%B1%EB%A1%9D-%EB%B0%A9%EB%B2%95\" aria-label=\"step 12 bean 등록 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 1.2 Bean 등록 방법</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">\t<span class=\"token class-name\">OwnerController</span> ownerController <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">OwnerController</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token class-name\">OwnerController</span> bean <span class=\"token operator\">=</span> applicationContext<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">OwnerController</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>여기서 ownerController와 bean이라는 객체를 두 가지 생성한다.</p>\n<p>위는 자바에서 생성되는 일반 객체이고, 아래는 빈인데 둘의 차이점은 무엇일까?</p>\n<p>바로, applicationContext가 알고 있는 객체 (applicationContext가 만들어서 담고 있는 객체)가 빈이다.\n어떤 특정 인스턴스로 빈으로 만드는 방법은 2가지가 있다.</p>\n<p>첫번째는 애노테이션을 활용한 컴포넌트 스캔을 이용하는 것과 두번째는 XML 혹은 자바설정 파일을 활용하여 직접 등록하는 방법이 있다.</p>\n<ol>\n<li>Component Scanning\n<ul>\n<li>@Component\n<ul>\n<li>@Repository</li>\n<li>@Service</li>\n<li>@Controller</li>\n<li>@Configuration</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<p>위와 같은 애노테이션을 활용하여 등록할 수가 있다.\n해당 애노테이션을 보고, 우리가 빈으로 등록할 객체에 대해서 직접 등록하는 것이 아니라 SpringBootApplication에서 Component Scan을 통해서 해당 애노테이션을 확인하면, 자동으로 빈으로 등록해주게 된다.</p>\n<p>OwnerRepository와 같은 경우에는 스프링 데이터 JPA가 제공해주는 기능을 통하여, 빈으로 등록되게 된다. (특정 애노테이션X) 하지만, 특정 인터페이스를 상속받게되면, 인터페이스의 구현체를 만들어서 구현하게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">/*SampleController.java 파일*/</span>\n<span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>samples<span class=\"token punctuation\">.</span>petclinic<span class=\"token punctuation\">.</span>sample</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>stereotype<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Controller</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Controller</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SampleController</span> <span class=\"token punctuation\">{</span>\n\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">/*SampleControllerTest.java 파일*/</span>\n<span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>samples<span class=\"token punctuation\">.</span>petclinic<span class=\"token punctuation\">.</span>sample</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>assertj<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>api<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">AssertionsForClassTypes</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>junit<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Test</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>junit<span class=\"token punctuation\">.</span>runner<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RunWith</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Autowired</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span>test<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringBootTest</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ApplicationContext</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>test<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>junit4<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringRunner</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@RunWith</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SpringRunner</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n<span class=\"token annotation punctuation\">@SpringBootTest</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> sampleControllerTest <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Autowired</span>\n    <span class=\"token class-name\">ApplicationContext</span> applicationContext<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">testDI</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">SampleController</span> bean <span class=\"token operator\">=</span> applicationContext<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SampleController</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">AssertionsForClassTypes</span><span class=\"token punctuation\">.</span><span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>bean<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isNotNull</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>위와 같이 아주 간편하게 @Controller 애노테이션을 부여하여, 빈으로 등록을 할 수가 있다.</p>\n<p>그렇다면? 빈으로 직접등록하는 방법은 어떻게 될까?</p>\n<ol start=\"2\">\n<li>\n<p>직접등록</p>\n<p>XML 혹은 Java 설정파일을 만들어서 등록할 수가 있다.</p>\n</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">/*SampleConfig.java 파일*/</span>\n<span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>samples<span class=\"token punctuation\">.</span>petclinic<span class=\"token punctuation\">.</span>sample</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Bean</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Configuration</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Configuration</span> <span class=\"token comment\">//설정 관련 애노테이션</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SampleConfig</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Bean</span> <span class=\"token comment\">// Bean으로 아래 객체 직접등록</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">SampleController</span> <span class=\"token function\">sampleController</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SampleController</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/*SampleController.java 파일*/</span>\n<span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>samples<span class=\"token punctuation\">.</span>petclinic<span class=\"token punctuation\">.</span>sample</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>stereotype<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Controller</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//@Controller 생략을 해도 빈으로 등록이 된다. (위에서 직접 등록해놨기 때문에)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SampleController</span> <span class=\"token punctuation\">{</span>\n\n<span class=\"token punctuation\">}</span>     </code></pre></div>\n<p>빈으로 등록 순서</p>\n<ol>\n<li>\n<p>@Configuration</p>\n<p>@Configuration 또한, @Component 안에 속한 애노테이션이므로, 컴포넌트 스캔에 포함된다.</p>\n</li>\n<li>\n<p>@Bean</p>\n<p>컴포넌트 스캔을 하면서, Bean들이 IoC컨테이너 안에 등록이 된다.</p>\n</li>\n</ol>\n<p>등록된 Bean에 대해서는 @Autowired 애노테이션을 통해서 꺼내올 수가 있다. (의존성 주입을 통해서)</p>\n<h3 id=\"step-13-의존성-주입di란\" style=\"position:relative;\"><a href=\"#step-13-%EC%9D%98%EC%A1%B4%EC%84%B1-%EC%A3%BC%EC%9E%85di%EB%9E%80\" aria-label=\"step 13 의존성 주입di란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 1.3 의존성 주입(DI)란?</h3>\n<p>@Autowired / @Inject</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Autowired</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">OwnerController</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">OwnerRepository</span> clinicService<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>owners <span class=\"token operator\">=</span> clinicService<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>생성자에도 원래 @Autowired라는 애노테이션을 활용하여, 의존성 주입이 가능하나, 스프링 4.3부터는 어떠한 클래스의 생성자가 하나뿐이고, 생성자로 주입받는 매개변수가 Bean으로 등록되어있다면,Bean을 자동으로 주입하게끔 추가기능이 있으므로,<code class=\"language-text\">@AutoWired</code>라는 애노테이션을 생략할 수 있다.</p>\n<p>그렇다면? 필드에 바로 주입받고 싶으면 어떻게 해야될까?</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Autowired</span>\n<span class=\"token keyword\">private</span> <span class=\"token class-name\">OwnerRepository</span> owners<span class=\"token punctuation\">;</span></code></pre></div>\n<p>아래와 같이 세터를 이용할 수도 있다.\n스프링 IoC컨테이너가 인스턴스를 만들고 나서 세터를 통해서, IoC컨테이너에 들어가있는 Bean중에 OwnerRepository를 찾아서 넣어준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">private</span> <span class=\"token class-name\">OwnerRepository</span> owners<span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Autowired</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setOwnsers</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">OwnerRepository</span> owners<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>owner <span class=\"token operator\">=</span> owners<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그렇다면? Bean으로 등록하지 않은 경우에는 어떻게 될까?</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">/* Sample 레포지스트리 생성*/</span>\n<span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>samples<span class=\"token punctuation\">.</span>petclinic<span class=\"token punctuation\">.</span>sample</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SampleRepository</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">/* OwnerController.java */</span>\n<span class=\"token keyword\">private</span> <span class=\"token class-name\">OwnerRepository</span> owners<span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Autowired</span>\n<span class=\"token keyword\">private</span> <span class=\"token class-name\">SampleRepository</span> sampleRepository<span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Autowired</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setOwnsers</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">OwnerRepository</span> owners<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>owners <span class=\"token operator\">=</span> owners<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이렇게 Bean으로 등록되어있지 않은 sampleRepositroy에 의존성을 주입하려고하면, <code class=\"language-text\">No qualifying bean of type ...</code> 이라는 에러를 확인할 수가 있을 것이다. 즉, 해당 타입의 빈이 없는데 의존성 주입을 해달라하는 경우 발생하는 에러이다.</p>\n<p>그러면, 스프링에서는 어떤 방식으로 의존성 주입을 하는 것을 추천할까?</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">OwnerRepository</span> owners<span class=\"token punctuation\">;</span>\n\n\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">OwnerController</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">OwnerRepository</span> clinicService<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>owners <span class=\"token operator\">=</span> clinicService<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위와 같이 생성자를 활용하여 의존성 주입을 하는 것을 권장을 하고 있다.  장점으로는</p>\n<p>필수적으로 사용해야하는 레퍼런스가 없이는 인스턴스 생성 못하게 강제할 수 있음. (필드 인젝션 / 세터 인젝션은 인스턴스 생성이 가능)</p>\n<p>단점으로는</p>\n<p>순환참조가 발생 시 서로의 인스턴스를 생성 못하므로, 필드 혹은 세터 인젝션을 통해서 의존성 주입을 통하여 해당 문제를 해결할 수가 있다.</p>\n<h2 id=\"step-21-관점-지향-프로그래밍aop란\" style=\"position:relative;\"><a href=\"#step-21-%EA%B4%80%EC%A0%90-%EC%A7%80%ED%96%A5-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8Daop%EB%9E%80\" aria-label=\"step 21 관점 지향 프로그래밍aop란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 2.1 관점 지향 프로그래밍(AOP)란?</h2>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">A</span> <span class=\"token punctuation\">{</span>\n\tmethod <span class=\"token function\">a</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\tAAAA\n\t\t오늘은 <span class=\"token number\">7</span>월 <span class=\"token number\">4</span>일 미국 독립 기념일이래요<span class=\"token punctuation\">.</span>\n\t\tBBBB\n\t<span class=\"token punctuation\">}</span>\n\tmethod <span class=\"token function\">b</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\tAAAA\n\t\t저는 아침에 운동을 다녀와서 밥먹고 빨래를 했습니다<span class=\"token punctuation\">.</span>\n\t\tBBBB\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">B</span> <span class=\"token punctuation\">{</span>\n\tmethod <span class=\"token function\">c</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\tAAAA\n\t\t점심은 이거 찍느라 못먹었는데 저녁엔 제육볶음을 먹고 싶네요<span class=\"token punctuation\">.</span>\n\t\tBBBB\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/* \n * 위와 같은 코드가 있다고 가정할 때, AAAA를 AAA로 고쳐야한다면, 메소드 a,b,c의 AAAA를 AAA로 바꿔야한다. \n * AOP에서는 이러한 것들을 처리하기 위해서, 메소드는 메소드의 할 일만 처리하고, 변경될 수 있는 부분들은 따로 처리하게끔 프로그래밍하는 것이다.\n */</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">A</span> <span class=\"token punctuation\">{</span>\n\tmethod <span class=\"token function\">a</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t오늘은 <span class=\"token number\">7</span>월 <span class=\"token number\">4</span>일 미국 독립 기념일이래요<span class=\"token punctuation\">.</span>\n\t<span class=\"token punctuation\">}</span>\n\tmethod <span class=\"token function\">b</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t저는 아침에 운동을 다녀와서 밥먹고 빨래를 했습니다<span class=\"token punctuation\">.</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">B</span> <span class=\"token punctuation\">{</span>\n\tmethod <span class=\"token function\">c</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t점심은 이거 찍느라 못먹었는데 저녁엔 제육볶음을 먹고 싶네요<span class=\"token punctuation\">.</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> AAAABBBB <span class=\"token punctuation\">{</span>\n\tmethod <span class=\"token function\">aaaabbb</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">JoinPoint</span> point<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\tAAAA\n\t\tpoint<span class=\"token punctuation\">.</span><span class=\"token function\">excute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t\tBBBB\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그렇다면? 스프링에서는 AOP를 어떻게 구현할까?\n<code class=\"language-text\">@Transactional</code>라는 애노테이션이 스프링 AOP 기반으로 만들어져있다.</p>\n<p>더 자세하게 AOP를 설명하기위해서 <code class=\"language-text\">OwnerController</code> 소스코드를 분석하면서 설명해보겠다. 스프링에는 <code class=\"language-text\">StopWatch</code>라는 성능을 체크하기 위한 시간관련 객체를 제공한다. 이때, 메소드마다 시간을 체크하기 위해서는 어떻게 해야될까?</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span>중략<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/owners/new\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">initCreationForm</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> model<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">StopWatch</span> stopWatch <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">StopWatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    stopWatch<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">Owner</span> owner <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Owner</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    model<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"owner\"</span><span class=\"token punctuation\">,</span> owner<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    stopWatch<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>stopWatch<span class=\"token punctuation\">.</span><span class=\"token function\">prettyPrint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> VIEWS_OWNER_CREATE_OR_UPDATE_FORM<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token annotation punctuation\">@PostMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/owners/new\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">processCreationForm</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@Valid</span> <span class=\"token class-name\">Owner</span> owner<span class=\"token punctuation\">,</span> <span class=\"token class-name\">BindingResult</span> result<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">StopWatch</span> stopWatch <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">StopWatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    stopWatch<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span><span class=\"token function\">hasErrors</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        stopWatch<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>stopWatch<span class=\"token punctuation\">.</span><span class=\"token function\">prettyPrint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> VIEWS_OWNER_CREATE_OR_UPDATE_FORM<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>owners<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>owner<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        stopWatch<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>stopWatch<span class=\"token punctuation\">.</span><span class=\"token function\">prettyPrint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token string\">\"redirect:/owners/\"</span> <span class=\"token operator\">+</span> owner<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span>중략<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<p>이런식으로, 모든 함수에  StopWatch를 생성하여 쓸 수가 있다.\n이건 AOP일까? 절대 아니다.</p>\n<p>코드가 없는데도 코드가 있게끔 (StopWatch) 동작하는 것이 AOP라고 할 수가 있다.</p>\n<p>그렇다면? 구현 방법은 어떻게 될까?</p>\n<ol>\n<li>\n<p>컴파일 (A.java ---(AOP)---> A.class(AspectJ))</p>\n<p>즉, 이 자바파일에는 StopWatch 코드가 없지만, 컴파일 후에 A.class에는 StopWatch코드가 있게끔 해주는 컴파일러(AspectJ)를 사용한다.</p>\n</li>\n<li>\n<p>바이트코드 조작 (A.java -> A.class ---(AOP)---> 메모리(AspectJ))</p>\n<p>클래스로더가 A.class가 읽어서 메모리에 올릴때 바이트코드 조작.</p>\n</li>\n<li>\n<p>프록시 패턴 (스프링 AOP가 사용하는 방법)</p>\n<p>기존의 코드를 고치지않고, 기존 객체를 다른 객체로 바꾸는 방법!</p>\n</li>\n</ol>\n<h3 id=\"step-22-프록시-패턴이란\" style=\"position:relative;\"><a href=\"#step-22-%ED%94%84%EB%A1%9D%EC%8B%9C-%ED%8C%A8%ED%84%B4%EC%9D%B4%EB%9E%80\" aria-label=\"step 22 프록시 패턴이란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 2.2 프록시 패턴이란?</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// Cash.java</span>\n<span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>samples<span class=\"token punctuation\">.</span>petclinic<span class=\"token punctuation\">.</span>proxy</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Cash</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Payment</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">pay</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> amount<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>amount <span class=\"token operator\">+</span> <span class=\"token string\">\"현금 결제\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">//CashPerf</span>\n<span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>samples<span class=\"token punctuation\">.</span>petclinic<span class=\"token punctuation\">.</span>proxy</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">StopWatch</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/*\n * 프록시 클래스\n */</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CashPerf</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Payment</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token class-name\">Payment</span> cash <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Cash</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">pay</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> amount<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token comment\">//        if (amount > 100){</span>\n<span class=\"token comment\">//            System.out.println(amount + \" 신용 카드\");</span>\n<span class=\"token comment\">//        } else {</span>\n<span class=\"token comment\">//            cash.pay(amount);</span>\n<span class=\"token comment\">//        }</span>\n        <span class=\"token class-name\">StopWatch</span> stopWatch <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">StopWatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        stopWatch<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        cash<span class=\"token punctuation\">.</span><span class=\"token function\">pay</span><span class=\"token punctuation\">(</span>amount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        stopWatch<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>stopWatch<span class=\"token punctuation\">.</span><span class=\"token function\">prettyPrint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">//Payment.java</span>\n<span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>samples<span class=\"token punctuation\">.</span>petclinic<span class=\"token punctuation\">.</span>proxy</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Payment</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">void</span> <span class=\"token function\">pay</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> amount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>samples<span class=\"token punctuation\">.</span>petclinic<span class=\"token punctuation\">.</span>proxy</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Store</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token class-name\">Payment</span> payment<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Store</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Payment</span> payment<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>payment <span class=\"token operator\">=</span> payment<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">buySomething</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> amount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        payment<span class=\"token punctuation\">.</span><span class=\"token function\">pay</span><span class=\"token punctuation\">(</span>amount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"step-23-aop-적용-예제\" style=\"position:relative;\"><a href=\"#step-23-aop-%EC%A0%81%EC%9A%A9-%EC%98%88%EC%A0%9C\" aria-label=\"step 23 aop 적용 예제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 2.3 AOP 적용 예제</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">/* LogExectionTime.java */</span>\n<span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>samples<span class=\"token punctuation\">.</span>petclinic<span class=\"token punctuation\">.</span>owner</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ElementType</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Retention</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RetentionPolicy</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Target</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Target</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ElementType</span><span class=\"token punctuation\">.</span>METHOD<span class=\"token punctuation\">)</span>\n<span class=\"token annotation punctuation\">@Retention</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RetentionPolicy</span><span class=\"token punctuation\">.</span>RUNTIME<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token annotation punctuation\">@interface</span> <span class=\"token class-name\">LogExecutionTime</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/* LogAspect.java */</span>\n<span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>samples<span class=\"token punctuation\">.</span>petclinic<span class=\"token punctuation\">.</span>owner</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>aspectj<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ProceedingJoinPoint</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>aspectj<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Around</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>aspectj<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Aspect</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>slf4j<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Logger</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>slf4j<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">LoggerFactory</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>stereotype<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Component</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">StopWatch</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Component</span>\n<span class=\"token annotation punctuation\">@Aspect</span>\n<span class=\"token comment\">/*\n * 각 메소드의 성능평가를 위한 콘솔 시간 출력을 위한 @LogExecutionTime 애노테이션 생성 부분\n * 조인 타겟 메소드의 앞 뒤로, StopWatch를 활용하여 시간을 출력한다.\n */</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">LogAspect</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token class-name\">Logger</span> logger <span class=\"token operator\">=</span> <span class=\"token class-name\">LoggerFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">getLogger</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LogAspect</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">//Around라는 애노테이션을 사용한 메소드 안에서 joinPoint(애노테이션이 붙어있는 타겟 메소드) 파라미터 사용 가능</span>\n    <span class=\"token annotation punctuation\">@Around</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"@annotation(LogExecutionTime)\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">logExecutionTime</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ProceedingJoinPoint</span> joinPoint<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Throwable</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">StopWatch</span> stopWatch <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">StopWatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        stopWatch<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">//조인 타겟 메소드 실행하는 부분</span>\n        <span class=\"token class-name\">Object</span> proceed <span class=\"token operator\">=</span> joinPoint<span class=\"token punctuation\">.</span><span class=\"token function\">proceed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        stopWatch<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        logger<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span>stopWatch<span class=\"token punctuation\">.</span><span class=\"token function\">prettyPrint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> proceed<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/* OwnerController.java */</span>\n<span class=\"token annotation punctuation\">@PostMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/owners/new\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token annotation punctuation\">@LogExecutionTime</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">processCreationForm</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@Valid</span> <span class=\"token class-name\">Owner</span> owner<span class=\"token punctuation\">,</span> <span class=\"token class-name\">BindingResult</span> result<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">StopWatch</span> stopWatch <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">StopWatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    stopWatch<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span><span class=\"token function\">hasErrors</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        stopWatch<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>stopWatch<span class=\"token punctuation\">.</span><span class=\"token function\">prettyPrint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> VIEWS_OWNER_CREATE_OR_UPDATE_FORM<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>owners<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>owner<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        stopWatch<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>stopWatch<span class=\"token punctuation\">.</span><span class=\"token function\">prettyPrint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token string\">\"redirect:/owners/\"</span> <span class=\"token operator\">+</span> owner<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"step-31-서비스-추상화psa란\" style=\"position:relative;\"><a href=\"#step-31-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%B6%94%EC%83%81%ED%99%94psa%EB%9E%80\" aria-label=\"step 31 서비스 추상화psa란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 3.1 서비스 추상화(PSA)란?</h2>\n<p>스프링은 서블릿 어플리케이션을 만듦에도 불구하고, 서블릿 코드를 생성하지 않는다.</p>\n<p>doPost, doGet을 실행하는 것이 아닌 @GetMapping / @PostMapping 애노테이션을 활용하여, 처리하는 것을 확인할 수가 있다.</p>\n<p>하지만, 애노테이션 아래 단에서는 서블릿으로 코드가 동작한다.\nService Abstraction</p>\n<p>왜 추상화 계층인가?</p>\n<ol>\n<li>\n<p>서블릿을 직접 쓰지 않아도 된다. (편리성)</p>\n</li>\n<li>\n<p>여러가지 기술로 바꿀 수가 있다.</p>\n<p>(스트링부트 (톰캣) -> 스트링부트(네티))\n거의 코드를 그대로 둔 상태로</p>\n</li>\n</ol>\n<p>스프링 MVC는 인터페이스 및 애노테이션 및 기반시설을 기반으로\n서블릿으로 코딩이 가능하며, 리액티브로 가능하다.\n또한, 서버또한 톰캣, 제티, 네티, 언더토우로도 변경이 가능하다.</p>\n<p>따라서, 스프링 MVC가 PSA중에 하나이다.</p>\n<h3 id=\"step-32-스프링-트랙잭션\" style=\"position:relative;\"><a href=\"#step-32-%EC%8A%A4%ED%94%84%EB%A7%81-%ED%8A%B8%EB%9E%99%EC%9E%AD%EC%85%98\" aria-label=\"step 32 스프링 트랙잭션 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 3.2 스프링 트랙잭션</h3>\n<p><code class=\"language-text\">@Transactional</code>\n이 애노테이션이 붙은 메소드는 명시적으로 트랜잭션 처리를 해준다.\nJDBC의 예를 들어보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">try</span><span class=\"token punctuation\">{</span>\n\tdbConnection <span class=\"token operator\">=</span> <span class=\"token function\">getDBConnection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tdbConnection<span class=\"token punctuation\">.</span><span class=\"token function\">setAutoCommit</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\tpreparedStatementInsert <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\t<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\n\t<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\t\n\tdbConnection<span class=\"token punctuation\">.</span><span class=\"token function\">commit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Done!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">SQLException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tdbConnection<span class=\"token punctuation\">.</span><span class=\"token function\">rollback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이런식으로 아마 기본적인 트랜잭션 흐름이 동작할 것이다.</p>\n<p>하지만, 스프링에서 @Transactional 애노테이션을 사용하면, 위와 같이 setAutoCommit(false); 나 에러 캐치 후 rollback(); 하는 행위들을 모두 한번에 처리해준다.</p>","frontmatter":{"date":"July 09, 2019","title":"Java Spring Triangle - 자바 스프링 핵심 3대 요소","categories":"개발","author":"개발한입","emoji":"🧢"},"fields":{"slug":"/spring-triangle/"}},"prev":{"id":"636a189c-46f9-5ff6-b3a9-cd3a500e4627","html":"<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#step-11-requestdispatcher-%ED%81%B4%EB%9E%98%EC%8A%A4\">STEP 1.1 RequestDispatcher 클래스</a></p>\n<ul>\n<li>\n<p><a href=\"#step-112-httpservletresponse-%ED%81%B4%EB%9E%98%EC%8A%A4\">STEP 1.1.2 HttpServletResponse 클래스</a></p>\n<ul>\n<li><a href=\"#step-1111-httpservletresponse-%EC%98%88%EC%A0%9C-%EC%86%8C%EC%8A%A4\">STEP 1.1.1.1 HttpServletResponse 예제 소스</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#step-112-requestdispatcher-%ED%81%B4%EB%9E%98%EC%8A%A4\">STEP 1.1.2 RequestDispatcher 클래스</a></p>\n<ul>\n<li><a href=\"#step-1121-requestdispatcher-%EC%98%88%EC%A0%9C-%EC%86%8C%EC%8A%A4\">STEP 1.1.2.1 RequestDispatcher 예제 소스</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>\n<ul>\n<li>STEP 1. 포워딩(Forwading)이란?\n<ul>\n<li>STEP 1.1 HttpServletRequest 클래스\n<ul>\n<li>STEP 1.1.1 HttpServletResponse 클래스\n<ul>\n<li>STEP 1.1.1.1 HttpServletResponse 예제 소스</li>\n</ul>\n</li>\n<li>STEP 1.1.2 RequestDispatcher 클래스\n<ul>\n<li>STEP 1.1.2.1 RequestDispatcher 예제 소스</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"개요\" style=\"position:relative;\"><a href=\"#%EA%B0%9C%EC%9A%94\" aria-label=\"개요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>개요</h1>\n<p>이번에는 서블릿 WebApplication에서 사용하는 포워딩 기법을 알아보기 위해서, 정리하려고 글을 남겨본다.\n잡설이지만, 원래는 포스팅을 올릴 때 한땀 한땀 쓰려고 노력하고 있는데 요즘에 너무 몰아쓰면서 전반적인 글의 퀄리티가 떨어지는 것을 좀 느끼고 있다.</p>\n<p>(사실 이것도 스터디때문에…)</p>\n<p>앞으로는 미리미리 공부해서 마스터해놓고 좀 더 퀄리티있는 글을 쓰도록 노력해봐야겠다.</p>\n<p>일단, 들어가기전에 간략하게 <code class=\"language-text\">RequestDispathcer</code>와 <code class=\"language-text\">HttpServletResponse</code>에 대해서 설명하고자 한다.\n서블릿 또는 JSP에서 요청을 받은 후 다른 컴포넌트로 요청을 위임할 수가 있다.\n이러한 위임 방법에는 2가지가 있는데 그것이 바로 <code class=\"language-text\">RequestDispathcer</code>와 <code class=\"language-text\">HttpServletResponse</code>이다.</p>\n<h2 id=\"step-11-requestdispatcher-클래스\" style=\"position:relative;\"><a href=\"#step-11-requestdispatcher-%ED%81%B4%EB%9E%98%EC%8A%A4\" aria-label=\"step 11 requestdispatcher 클래스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 1.1 RequestDispatcher 클래스</h2>\n<p>일단, 이 클래스를 아는 사람들이라면 의아할 부분이 있을 것이다. 왜냐하면, <code class=\"language-text\">HttpServletRequest</code> 객체는 클라이언트로부터 실행 요청이 들어올 때마다 서블릿의 <code class=\"language-text\">service()</code> 메소드가 실행되기 전에 자동으로 생성되고, <code class=\"language-text\">service()</code> 메소드가 종료되면 자동으로 소멸하는 객체로 알고 있기 때문이다.</p>\n<p>즉, <code class=\"language-text\">HttpServletRequest</code> 객체에 여러 페이지에서 공유할 정보를 저장한다 하더라도 <code class=\"language-text\">service()</code> 메소드가 종료되는 시점에 <code class=\"language-text\">HttpServletRequest</code> 객체도 소멸하는데 그 곳에 정보를 저장하는게 의미가 있을까??</p>\n<p><code class=\"language-text\">HttpServletRequest</code>는 하나의 서블릿 페이지가 실행되는 동안에만 메모리에 존재하는 객체이기 때문에 이를 통해 정보를 유지하는 것은 무의미하다고 생각할 것이다.</p>\n<p>그런데 클라이언트가 서블릿 실행 요청을 했을 때 하나의 페이지만 실행되는 것이 아니라 여러 페이지가 실행될 수 있는 상황이 발생할 수가 있다.</p>\n<p>위의 그림처럼 클라이언트 요청 한 번으로 두 개의 페이지가 실행된다면, 어떻게 될까?</p>\n<p>보다 쉽게 설명하기 위해 가정을 해보겠다. 클라이언트가 A 페이지를 요청하면, A 페이지가 실행되면서 B 페이지로 이동하여, B 페이지도 실행된다고 가정하자. 그러면 위의 말이 이해가 되지않겠는가??</p>\n<blockquote>\n<p>즉, 한 번의 요청으로 여러 페이지가 실행된 것이다.</p>\n</blockquote>\n<p><strong><code class=\"language-text\">HttpServletRequest</code>를 통해 정보를 유지하는 예는 이처럼 한 번의 요청으로 실행된 페이지 간에 데이터를 공유하고자 할 때 사용하는 방법이다.</strong></p>\n<p>한 번의 요청으로 여러 개의 페이지들이 실행되었을 때는 처음 요청된 페이지에서 생성된 <code class=\"language-text\">HttpServletRequest</code>가 이동되는 페이지에서도 그대로 전달하여 사용할 수 있도록 해야된다.</p>\n<p>그래서 페이지를 이동하기 전에 <code class=\"language-text\">HttpServletRequest</code>에 정보를 등록한 후 이동하면, 이동된 페이지에서는 전달받은 <code class=\"language-text\">HttpServletRequest</code>에 저장된 정보를 추출하여 사용할 수 있다.</p>\n<p>이런 방식으로 <strong>페이지 간의 정보 공유가 이루어지는 것이다.</strong></p>\n<p>다시 이 그림을 보자!</p>\n<p>클라이언트가 A 페이지를 요청하고, A 페이지에서 B 페이지로 이동했을 때는 A와 B 페이지가 동일한 <code class=\"language-text\">HttpServletRequest</code>과 <code class=\"language-text\">HttpServletResponse</code> 객체를 사용하지만, 클라이언트가 B 페이지를 직접 실행 요청했을 때는 새로운 객체가 생성되므로, <strong>A 페이지와는 상관없는 객체를 사용하게 된다.</strong>\n그래서 <strong>이때는 서로 다른 <code class=\"language-text\">HttpServletRequest</code>를 사용하기 떄문에 <code class=\"language-text\">HttpServletRequest</code> 객체를 통해 정보를 공유할 수 있다.</strong></p>\n<p><code class=\"language-text\">HttpServletRequest</code>를 통한 정보 공유는 동일한 요청에서 실행된 페이지끼리만 이루어지며, 이떄는 클라이언트가 요청한 페이지에서 다른 페이지로 이동하기 때문에, 클라이언트가 요청한 페이지가 실행되다가 다른 페이지로 이동하는 것을 <strong>요청 재지정</strong> 이라 한다.</p>\n<p><strong>요청 재지정</strong> 기능을 제공하는 객체는 다음 2가지가 존재한다.</p>\n<ol>\n<li><strong>HttpServletResponse</strong></li>\n<li><strong>RequestDispatcher</strong></li>\n</ol>\n<h3 id=\"step-112-httpservletresponse-클래스\" style=\"position:relative;\"><a href=\"#step-112-httpservletresponse-%ED%81%B4%EB%9E%98%EC%8A%A4\" aria-label=\"step 112 httpservletresponse 클래스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 1.1.2 HttpServletResponse 클래스</h3>\n<p><code class=\"language-text\">HttpServletResponse</code>에서 제공하는 메소드를 사용하여, 요청을 재지정할 때는 요청을 재지정하는 자원이 현재 자원과 동일한 웹 어플리케이션에 속하지 않아도 상관없고, 동일한 서버에 존재하지 않아도 상관이 없다.</p>\n<p>즉, 다른 웹 어플리케이션의 파일로 요청 재지정이 가능하고, 다른 웹서버의 자원으로도 가능하다.</p>\n<p><code class=\"language-text\">HttpServletResponse</code>에서 제공하는 요청 재지정 메소드는 아래와 같다.</p>\n<table>\n<thead>\n<tr>\n<th>접근자&#x26;반환형</th>\n<th>메소드</th>\n<th>기능</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>public void</td>\n<td>sendRedirect(String location)</td>\n<td>location에 설정된 자원으로 요청을 재지정</td>\n</tr>\n<tr>\n<td>public String</td>\n<td>encodeRedirectURL(String url)</td>\n<td>url에 설정된 URL 문자열에 세션 ID 정보를 추가하여, 요청 재지정</td>\n</tr>\n</tbody>\n</table>\n<p>이제 예제 소스를 보면서 이해 해보자!</p>\n<h4 id=\"step-1111-httpservletresponse-예제-소스\" style=\"position:relative;\"><a href=\"#step-1111-httpservletresponse-%EC%98%88%EC%A0%9C-%EC%86%8C%EC%8A%A4\" aria-label=\"step 1111 httpservletresponse 예제 소스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 1.1.1.1 HttpServletResponse 예제 소스</h4>\n<p>지금 내가 짜려고 하는 예제는 라디오 버튼을 통해서 검색 엔진을 선택한 후 제출을 하게되면, 해당 사이트로 이동하는 예제를 만들려고 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>utf-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>포털 사이트<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">action</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>potalSite<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>radio<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>site<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>naver<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>네이버<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>radio<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>site<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>daum<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>다음<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>radio<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>site<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>bing<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>빙<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>radio<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>site<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>google<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>구글<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>제출<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><code class=\"language-text\">form:method</code> 형식을 지정안했으니 기본적으로 GET 방식으로 통신을 할 것이다.\n이 변수를 받아서 처리하는 서블릿을 작성해보겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@WebServlet</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/portalSite\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SendRedirectTestServlet</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">HttpServlet</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">doGet</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> req<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> resp<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ServletException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\n\n        <span class=\"token class-name\">String</span> param <span class=\"token operator\">=</span> req<span class=\"token punctuation\">.</span><span class=\"token function\">getParameter</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"site\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>param<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"naver\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            resp<span class=\"token punctuation\">.</span><span class=\"token function\">sendRedirect</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"http://naver.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>param<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"daum\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            resp<span class=\"token punctuation\">.</span><span class=\"token function\">sendRedirect</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"http://daum.net\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>param<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"bing\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            resp<span class=\"token punctuation\">.</span><span class=\"token function\">sendRedirect</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"http://bing.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>param<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"google\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            resp<span class=\"token punctuation\">.</span><span class=\"token function\">sendRedirect</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"http://google.co.kr\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">param</code>은 라디오에서 전달받은 <code class=\"language-text\">value</code>의 값을 저장하고, <code class=\"language-text\">param</code>이 저장한 값에 따라 <code class=\"language-text\">HttpServlet</code>의 <code class=\"language-text\">sendRedirect()</code>호출 하여 기존에 서블릿이 동작했던 서버가 아닌 외부 url로 리다이렉션 처리를 하는 것을 확인할 수가 있다.</p>\n<p>다음으로는 <code class=\"language-text\">RequestDispatcher</code>를 활용하여 요청 재지정을 하는 방법에 대해서 알아보겠다.</p>\n<h3 id=\"step-112-requestdispatcher-클래스\" style=\"position:relative;\"><a href=\"#step-112-requestdispatcher-%ED%81%B4%EB%9E%98%EC%8A%A4\" aria-label=\"step 112 requestdispatcher 클래스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 1.1.2 RequestDispatcher 클래스</h3>\n<p><code class=\"language-text\">RequestDispatcher</code>에서 제공하는 메소드를 사용하여, 요청을 재지정할 때는 <strong>요청을 재지정하는 자원이 반드시 현재 자원과 동일한 웹 어플리케이션에 있어야만 한다.</strong></p>\n<p><code class=\"language-text\">RequestDispatcher</code>는 다음과 같은 메소드들을 제공한다.</p>\n<table>\n<thead>\n<tr>\n<th>접근자&#x26;반환형</th>\n<th>메소드</th>\n<th>기능</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>public void</td>\n<td>forward(ServletRequest req, ServletResponse resp)</td>\n<td>요청을 다른 자원으로 넘긴다.</td>\n</tr>\n<tr>\n<td>public void</td>\n<td>include(ServletRequest req, ServletResponse resp)</td>\n<td>다른 자원의 처리 결과를 현재 페이지에 표시한다.</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">RequestDispatcher</code> 객체를 생성할 때는 아래와 같은 팩토리 메소드를 사용한다.</p>\n<ol>\n<li>\n<p>ServletContext 객체에서 제공하는 메소드</p>\n<ul>\n<li><code class=\"language-text\">RequestDispatcher getNamedDispatcher(String name)</code></li>\n<li><code class=\"language-text\">RequestDispatcher getRequestDispatcher(String path)</code></li>\n</ul>\n</li>\n<li>\n<p>ServletRequest 객체에서 제공하는 메소드</p>\n<ul>\n<li><code class=\"language-text\">RequestDispatcher getRequestDispatcher(String path)</code></li>\n</ul>\n</li>\n</ol>\n<p>여기서 path 형식과 name 등 어떤 것으로 지정하는가만 다를 뿐 대상을 지정하면서 RequestDispatcher 객체를 추출하는 기능은 같다. 주의할 점은 <code class=\"language-text\">ServletRequest</code> 객체의 <code class=\"language-text\">getRequestDispatcher()</code>로 생성할 때는 <strong>절대/상대경로 상관없이 생성</strong>이 가능하나, <code class=\"language-text\">ServletContext</code> 객체의 <code class=\"language-text\">getRequestDispatcher()</code>는 <strong>절대 경로만 가능</strong>하다.</p>\n<p><code class=\"language-text\">RequestDispatcher</code> 객체의 <code class=\"language-text\">forward()</code>메소드는 클라이언트의 요청으로 생성되는 <code class=\"language-text\">HttpServletRequest</code>와 <code class=\"language-text\">HttpServletResponse</code> 객체를 다른 자원에 전달하고, 수행 제어를 넘겨서 다른 자원의 수행 결과를 클라이언트에 응답하도록 하는 기능의 메소드이다.</p>\n<p>이게 무슨소리인지 잘모르겠다면 아래의 그림을 보자.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 449px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB9klEQVQoz5WSXUhTARTHf7c5LKjVbE2JSoit5ly6O1YLCZWVYGDQx8Qo+qDSsoeKHtJsd2pfMyxZ6aCkUgxCrAh6qLceUgqCHoTAXnoqKfVetxoUPciJGxY+tKA/HM7hHM7//DnnYGgB0r0HkCcn6dy6AsCuwD5YbBl91IOMPubbyADfXz9Ab/GhR/2kEtvJCkNTh4z20JDeFnpoaOr9Fw0eD5D7dIfNmUruvpHqrr2X6o7cTSfrBvVoqcuI+jEulClZCXUtIOnuiGSStaJH/fLsoLvazEfLHWWTF8vl653D8qXvqBgdW+Tz2ZKwdAYZqHPlAMpfDFIxtf1Dsz/+srHotqGprXJ1g3PkmBdJbF403eSOfbxUlZzo2ds101Z8RforCo6HlvFPTJzzMxMPIXIKkXFkLPKnNrxnKSJihjagEHBbFNYDpYAP8AMq4Jn1q3h+ZK3V7Ci057rsCyyV83OUAquCtc6l8CpW85twIbAc8FoUimebvUCROQRYA5QA+XPFmgo8h4IOcxf5ZzbanD8S1fXvWsPnx2LhmNzcdkIGN+XVB/P4L4hcQ6IruVy5pGSyo2om01cvmf5Gmb6+Uz41+yokrtK7a3X2o8zBr+Rwg0d5e7oUSYQdU02eN6mumvH0rf3v9ZZ1U4YWCJh/aGjqvGyKfgLEN7ZFRsCA4QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"RequestDispatcher-forwarding\"\n        title=\"RequestDispatcher-forwarding\"\n        src=\"/static/2e5326274312367a9d0b19f459f6e2ae/053a9/fowarding.png\"\n        srcset=\"/static/2e5326274312367a9d0b19f459f6e2ae/e9ff0/fowarding.png 180w,\n/static/2e5326274312367a9d0b19f459f6e2ae/f21e7/fowarding.png 360w,\n/static/2e5326274312367a9d0b19f459f6e2ae/053a9/fowarding.png 449w\"\n        sizes=\"(max-width: 449px) 100vw, 449px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>그러면 <code class=\"language-text\">include()</code>메소드는 어떠한 역할을 할까?</p>\n<p><code class=\"language-text\">include()</code>는 클라이언트 요청으로 생성되는 <code class=\"language-text\">HttpServletRequest</code>와 <code class=\"language-text\">HttpServletResponse</code> 객체를 다른 자원에 전달하고 수행한 다음, 그 결과를 클라이언트에서 요청한 서블릿 내에 포함하여 클라이언트로 응답하는 기능의 메소드이다.</p>\n<p>이것 또한 도식으로 표현해봤다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 465px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABtklEQVQoz5WRzUuUURjFf+91YDaZICZWQ4KZjgPCjJNMfoCWkSJZgx8g+EEGQQwFQZaTjqNvECQOhRpMVGO2atEmchEFQdAuov6AaBNhgu/1ndFo2RN3mEVIBh04i+dwn3PPPRc9HZox3IgH7GwydOPluRofEI1FysK/MkOXnPnuCXehN+7e7Yl9DaO+94G+2cyucBJBcRd6JXtvQDYSQbkfPdQDqAdnfQNO6rRsr1yU3MMx0XMn5UMbXpmDkYZ91h8W1k7Dx3q2cVnbTStuMpR+OlhVC5y60lrRKbY//e1O/+p66szqz6naJXM+7Cvmn3ASQTZvd/BjMcqX8XpEBI/iCBCAonLggEkMqgQoL9DUUgbsBw4WtAqg1BgqbUfU1q1m9Xykushc4vVYewHz9BNmWWTZyCZ5G9AEHAdagZbCHAHaAT/OdCjPT5cD+cQvRmus97EA8rqrWDLR4Y9XGyc/2x3XZalzECqp3MP/ITsTVttTdaxd80f0fJdsPYlJ7tF52Ux1y7tqvDIO/fWlqvAZO/nXTi3Tq04ePezE615l00Nv3MW+t86E/1kuc8Gj7WP53nfDbyPXmWO2v7BZAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"RequestDispatcher-include\"\n        title=\"RequestDispatcher-include\"\n        src=\"/static/4da4a3aeff0c484388eb0c54c2c4ae59/9ff85/forwarding2.png\"\n        srcset=\"/static/4da4a3aeff0c484388eb0c54c2c4ae59/e9ff0/forwarding2.png 180w,\n/static/4da4a3aeff0c484388eb0c54c2c4ae59/f21e7/forwarding2.png 360w,\n/static/4da4a3aeff0c484388eb0c54c2c4ae59/9ff85/forwarding2.png 465w\"\n        sizes=\"(max-width: 465px) 100vw, 465px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>이제 소스를 한번 봐보자!</p>\n<h4 id=\"step-1121-requestdispatcher-예제-소스\" style=\"position:relative;\"><a href=\"#step-1121-requestdispatcher-%EC%98%88%EC%A0%9C-%EC%86%8C%EC%8A%A4\" aria-label=\"step 1121 requestdispatcher 예제 소스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 1.1.2.1 RequestDispatcher 예제 소스</h4>\n<p>샘플 소스코드를 하나 생성했으며, 클라이언트에서 dispatcher1을 호출하면 처리 후에, dispatcher2로 전달하는 로직을 짰다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@WebServlet</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/dispatcher1\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DispatcherTest1Servlet</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">HttpServlet</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">doGet</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> req<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> resp<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ServletException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\n        \n        resp<span class=\"token punctuation\">.</span><span class=\"token function\">setContentType</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text/html;charset=UTF-8\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">PrintWriter</span> out <span class=\"token operator\">=</span> resp<span class=\"token punctuation\">.</span><span class=\"token function\">getWriter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        out<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;h3> Dispatcher Test1의 수행결과 &lt;/h3>\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token class-name\">ServletContext</span> sc <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getServletContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">RequestDispatcher</span> rd <span class=\"token operator\">=</span> sc<span class=\"token punctuation\">.</span><span class=\"token function\">getRequestDispatcher</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/dispatcher2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        rd<span class=\"token punctuation\">.</span><span class=\"token function\">forward</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> resp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        out<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이제 dispatcher2의 응답을 수행할 서블릿을 작성할 차례이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DispatcherTest2Servlet</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">HttpServlet</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">doGet</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> req<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> resp<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ServletException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\n        \n        resp<span class=\"token punctuation\">.</span><span class=\"token function\">setContentType</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text/html;charset=UTF-8\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">PrintWriter</span> out <span class=\"token operator\">=</span> resp<span class=\"token punctuation\">.</span><span class=\"token function\">getWriter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        out<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;h3> Dispatcher Test2의 수행결과 &lt;/h3>\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        out<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>돌려보면 결과를 알겠지만, Dispatcher Test2의 수행결과가 적힌 페이지가 출력되는 것을 알 수가 있다.</p>\n<p>위의 dispatcher1 소스를 아래와 같이 바꾸면 어떻게 될까?</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span>중략<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n        <span class=\"token class-name\">ServletContext</span> sc <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getServletContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">RequestDispatcher</span> rd <span class=\"token operator\">=</span> sc<span class=\"token punctuation\">.</span><span class=\"token function\">getRequestDispatcher</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/dispatcher2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        rd<span class=\"token punctuation\">.</span><span class=\"token function\">include</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> resp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span>중략<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<p>그러면, Dispatcher Test1의 수행결과와 Dispatcher Test2의 수행결과가 동시에 표시되는 페이지가 나옴을 확인할 수가 있다.</p>","frontmatter":{"date":"July 10, 2019","title":"Java Servlet Fowarding - 서블릿 포워딩을 어떻게 구현할까?","categories":"개발","author":"개발한입","emoji":"💻"},"fields":{"slug":"/hello-servlet-request/"}},"site":{"siteMetadata":{"siteUrl":"https://brewagebear.github.io","comments":{"utterances":{"repo":"brewagebear/blog-comments"}}}}},"pageContext":{"slug":"/front-controller-and-command-pattern/","nextSlug":"/spring-triangle/","prevSlug":"/hello-servlet-request/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}