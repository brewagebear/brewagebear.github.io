{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/install-tomcat-on-centos/",
    "result": {"data":{"cur":{"id":"c604142e-db9f-592d-b1da-f5a71022fd39","html":"<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EA%B0%9C%EC%9A%94\">개요</a></p>\n</li>\n<li>\n<p><a href=\"#apache-tomcat\">Apache Tomcat</a></p>\n<ul>\n<li>\n<p><a href=\"#step-1---apache-tomcat-%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C-%EB%B0%8F-%EC%84%A4%EC%B9%98\">STEP 1 - Apache Tomcat 다운로드 및 설치</a></p>\n</li>\n<li>\n<p><a href=\"#step-2---apache-tomcat-%ED%99%98%EA%B2%BD%EB%B3%80%EC%88%98-%EB%93%B1%EB%A1%9D-%EB%B0%8F-%EC%B6%94%EA%B0%80-%EC%84%A4%EC%A0%95\">STEP 2 - Apache Tomcat 환경변수 등록 및 추가 설정</a></p>\n<ul>\n<li><a href=\"#step-21---apache-tomcat-%ED%99%98%EA%B2%BD%EB%B3%80%EC%88%98-%EB%93%B1%EB%A1%9D-%EB%B0%8F-%EB%B0%A9%ED%99%94%EB%B2%BD-%EC%84%A4%EC%A0%95\">STEP 2.1 - Apache Tomcat 환경변수 등록 및 방화벽 설정</a></li>\n<li><a href=\"#step-22---tomcat-%EC%A0%84%EC%9A%A9-%EB%A6%AC%EB%88%85%EC%8A%A4-%EA%B3%84%EC%A0%95-%EC%83%9D%EC%84%B1-%ED%9B%84-%EA%B7%B8-%EA%B3%84%EC%A0%95%EC%9C%BC%EB%A1%9C-tomcat-%EC%8B%A4%ED%96%89%ED%95%98%EA%B8%B0\">STEP 2.2 - Tomcat 전용 리눅스 계정 생성 후 그 계정으로 Tomcat 실행하기</a></li>\n<li><a href=\"#step-23---apache-tomcat-%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%93%B1%EB%A1%9D-%EB%B0%8F-%EC%8B%9C%EC%9E%91%EB%8D%B0%EB%AA%AC-%EB%93%B1%EB%A1%9D\">STEP 2.3 - Apache Tomcat 서비스 등록 및 시작데몬 등록</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#step-3---apache-tomcat-centos7-firewalld-%EC%9D%B8%EB%B0%94%EC%9A%B4%EB%93%9C-%EB%A3%B0-%EC%A0%81%EC%9A%A9-%EB%B0%8F-indexjsp-%ED%8E%98%EC%9D%B4%EC%A7%80-%ED%99%95%EC%9D%B8\">STEP 3 - Apache Tomcat CentOS7 firewalld 인바운드 룰 적용 및 index.jsp 페이지 확인</a></p>\n<ul>\n<li><a href=\"#step-31---centos7-firewalld-%ED%86%B0%EC%BA%A3-%ED%8F%AC%ED%8A%B8-%EC%9D%B8%EB%B0%94%EC%9A%B4%EB%93%9C-%EB%A3%B0-%EC%A0%81%EC%9A%A9\">STEP 3.1 - CentOS7 firewalld 톰캣 포트 인바운드 룰 적용</a></li>\n<li><a href=\"#step-32---hello-tomcat\">STEP 3.2 - Hello Tomcat!!</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B4%EC%84%9C\">마치면서</a></p>\n</li>\n</ul>\n</div>\n<h2 id=\"개요\" style=\"position:relative;\"><a href=\"#%EA%B0%9C%EC%9A%94\" aria-label=\"개요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>개요</h2>\n<p>이번 글은 Apache Tomcat 설치하고 Index.jsp 페이지인 고양이가 뛰어다니는 화면을 웹브라우저에 출력하는 것을 목표로 하겠다.</p>\n<h2 id=\"apache-tomcat\" style=\"position:relative;\"><a href=\"#apache-tomcat\" aria-label=\"apache tomcat permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Apache Tomcat</h2>\n<p>이전 글을 따라서 진행하는 사람이라면, Latest Version인 JDK10을 설치했을텐데 마찬가지로 톰캣 또한, Latest Version인 9.0.10 버전으로 설치해 보도록 하겠다.</p>\n<hr>\n<ul>\n<li>STEP 1 - Apache Tomcat 다운로드 및 설치</li>\n<li>STEP 2 - Apache Tomcat 환경변수 등록 및 추가 설정\n<ul>\n<li>STEP 2.1 - Apache Tomcat 환경변수 등록</li>\n<li>STEP 2.2 - Apache Tomcat 전용 리눅스 계정 생성 후 그 계정으로 Tomcat 실행하기</li>\n<li>STEP 2.3 - Apache Tomcat 서비스 등록 및 시작데몬 등록</li>\n</ul>\n</li>\n<li>STEP 3 - Apache Tomcat CentOS7 firewalld 톰캣 포트 인바운드 룰 적용 및 index.jsp 페이지 확인\n<ul>\n<li>STEP 3.1 - CentOS7 firewalld 톰캣 포트 인바운드 룰 적용</li>\n<li>STEP 3.2 - Hello Tomcat!!</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"step-1---apache-tomcat-다운로드-및-설치\" style=\"position:relative;\"><a href=\"#step-1---apache-tomcat-%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C-%EB%B0%8F-%EC%84%A4%EC%B9%98\" aria-label=\"step 1   apache tomcat 다운로드 및 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 1 - Apache Tomcat 다운로드 및 설치</h3>\n<p>이전 글과 마찬가지로 wget을 사용하여, Binary File을 다운로드 받고, 압축을 풀어서 설정을 해보도록 하겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">[azureuser@AzureCentOS src]$ sudo wget http://apache.mirror.cdnetworks.com/tomcat/tomcat-9/v9.0.10/bin/apache-tomcat-9.0.10.tar.gz\n[azureuser@AzureCentOS src]$ sudo tar -xvf apache-tomcat-9.0.10.tar.gz\n[azureuser@AzureCentOS src]$ mv apache-tomcat-9.0.10 /usr/local/\n[azureuser@AzureCentOS src]$ cd /usr/local/\n[azureuser@AzureCentOS local]$ ln -s apache-tomcat-9.0.10 tomcat</code></pre></div>\n<p>이런식으로 압축을 푼 후에 심볼릭 링크를 생성하는 것으로 Tomcat의 설치는 어느정도 일단락된다.</p>\n<h3 id=\"step-2---apache-tomcat-환경변수-등록-및-추가-설정\" style=\"position:relative;\"><a href=\"#step-2---apache-tomcat-%ED%99%98%EA%B2%BD%EB%B3%80%EC%88%98-%EB%93%B1%EB%A1%9D-%EB%B0%8F-%EC%B6%94%EA%B0%80-%EC%84%A4%EC%A0%95\" aria-label=\"step 2   apache tomcat 환경변수 등록 및 추가 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 2 - Apache Tomcat 환경변수 등록 및 추가 설정</h3>\n<hr>\n<h4 id=\"step-21---apache-tomcat-환경변수-등록-및-방화벽-설정\" style=\"position:relative;\"><a href=\"#step-21---apache-tomcat-%ED%99%98%EA%B2%BD%EB%B3%80%EC%88%98-%EB%93%B1%EB%A1%9D-%EB%B0%8F-%EB%B0%A9%ED%99%94%EB%B2%BD-%EC%84%A4%EC%A0%95\" aria-label=\"step 21   apache tomcat 환경변수 등록 및 방화벽 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 2.1 - Apache Tomcat 환경변수 등록 및 방화벽 설정</h4>\n<p>역시나 JDK 설치때와 마찬가지로 환경변수를 등록해준다.\n이전에 수정하였던 <strong>/etc/profile</strong> 파일을 수정을 할 것이며, 등록될 환경변수는 <em>CATALINA_HOME</em>와<em>CLASSPATH</em>가 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">[azureuser@AzureCentOS src]$ sudo vi /etc/profile\n\nCATALINA_HOME=/usr/local/tomcat \nJAVA_HOME=/usr/local/java\nPATH=$PATH:$JAVA_HOME/bin:/bin:/sbin\nCLASSPATH=$JAVA_HOME/jre/lib:$JAVA_HOME/lib/tools.jar:$CATALINA_HOME/lib-jsp-api.jar:$CATALINA_HOME/lib/servlet-api.jar\nexport JAVA_HOME CLASSPATH PATH CATALINA_HOME</code></pre></div>\n<p>여기서<em>CATALINA_HOME=/usr/local/tomcat</em>와<em>CATALINA_HOME/lib-jsp-api.jar:$CATALINA_HOME/lib/servlet-api.jar</em>가 이전의 환경변수에서 추가되는 부분이다.</p>\n<p>추가적인 작업을 하기 전에 톰캣이 동작하는지부터 확인해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">[azureuser@AzureCentOS src]$ cd /usr/local/tomcat/bin\n\n(Tomcat 실행)\n[azureuser@AzureCentOS bin]$ ./startup.sh\nUsing CATALINA_BASE:   /usr/local/tomcat\nUsing CATALINA_HOME:   /usr/local/tomcat\nUsing CATALINA_TMPDIR: /usr/local/tomcat/temp\nUsing JRE_HOME:        /usr/local/java\nUsing CLASSPATH:       /usr/local/tomcat/bin/bootstrap.jar:/usr/local/tomcat/bin/tomcat-juli.jar\nTomcat started.\n\n(Tomcat 종료)\n[azureuser@AzureCentOS bin]$ ./shutdown.sh\nUsing CATALINA_BASE:   /usr/local/tomcat\nUsing CATALINA_HOME:   /usr/local/tomcat\nUsing CATALINA_TMPDIR: /usr/local/tomcat/temp\nUsing JRE_HOME:        /usr/local/java\nUsing CLASSPATH:       /usr/local/tomcat/bin/bootstrap.jar:/usr/local/tomcat/bin/tomcat-juli.jar\nNOTE: Picked up JDK_JAVA_OPTIONS:  --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.rmi/sun.rmi.transport=ALL-UNNAMED</code></pre></div>\n<p>이렇게 되면, 톰캣이 동작을 하게된다.</p>\n<hr>\n<h4 id=\"step-22---tomcat-전용-리눅스-계정-생성-후-그-계정으로-tomcat-실행하기\" style=\"position:relative;\"><a href=\"#step-22---tomcat-%EC%A0%84%EC%9A%A9-%EB%A6%AC%EB%88%85%EC%8A%A4-%EA%B3%84%EC%A0%95-%EC%83%9D%EC%84%B1-%ED%9B%84-%EA%B7%B8-%EA%B3%84%EC%A0%95%EC%9C%BC%EB%A1%9C-tomcat-%EC%8B%A4%ED%96%89%ED%95%98%EA%B8%B0\" aria-label=\"step 22   tomcat 전용 리눅스 계정 생성 후 그 계정으로 tomcat 실행하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 2.2 - Tomcat 전용 리눅스 계정 생성 후 그 계정으로 Tomcat 실행하기</h4>\n<p>지금까지 설치한 것으로는 Tomcat이 root 계정으로 돌아가게 된다.\n만일 Tomcat을 root계정이 아니라 다른 계정으로 돌리기 위해서는 Tomcat을 돌리려는 계정의 홈 디렉토리에 설치되어 있거나, Tomcat이 설치된 디렉토리와 하위 디렉토리 전부를 톰캣을 실행하려는 계정 소유로 만들어야한다.</p>\n<p>왜? Tomcat을 돌리는 계정이 따로 필요한가에 대해서는 밑에 가장 큰 세가지 문제점을 적어보겠다.</p>\n<ol>\n<li>업로드시 폴더에 퍼미션이 있어도, 영향을 받지 않고 프로그래밍만 되어 있으면 업로드가 된다. (접근권한이 root이기 때문)</li>\n<li>업로드 폴더 퍼미션에 실행권한을 빼도 파일업로드시 파일업로드 취약점 공격시 스크립트를 실행 할 수가 있다. (아주 간단히 예를 들면 끔찍하지만 rm -rf /가 있다.)</li>\n<li>로컬유저가 콘솔에서 jsp 파일 작성 후에 인터넷으로 접속하여 실행할 수가 있다.</li>\n</ol>\n<p>이러한 치명적인 문제점때문에 대안책은 root가 아닌 다른 일반 사용자 계정으로 돌리는 것이다.</p>\n<p>일단, 글쓴이는 Tomcat을 돌릴 계정으로 쉘 로그인 권한이 없는 계정인 Tomcat이라는 계정을 생성해보도록 하겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">[azureuser@AzureCentOS ~]$ sudo useradd -s /bin/false tomcat (사용자 생성)\n[azureuser@AzureCentOS ~]$ sudo grep tomcat /etc/passwd\ntomcat:x:1001:1001::/opt/tomcat:/bin/false (계정생성 완료!)\n\n[azureuser@AzureCentOS ~]$ sudo groupadd -r tomcat (사용자 그룹 생성)\n[azureuser@AzureCentOS ~]$ sudo gpasswd -a tomcat tomcat (사용자 그룹에 사용자 등록)\n[azureuser@AzureCentOS init.d]$ sudo grep tomcat /etc/gshadow (그룹 등록 완료!!)\ntomcat:!::tomcat</code></pre></div>\n<p>참고로 리눅스에서 셀 로그인 권한이 없는 계정을 만드는 방법은 2가지가 있는데 하나는 nologin 옵션을 주는 것과 하나는 /bin/false를 주는 것이다.</p>\n<p>두개의 차이점은 <a href=\"http://faq.hostway.co.kr/?mid=Linux_ETC&#x26;page=2&#x26;document_srl=1624\">nologin vs /bin/false</a>로 대체하겠다.</p>\n<p>생성 후에 우리가 설치한 tomcat 디렉토리와 그 하위 디렉토리의 모든 권한을 tomcat으로 변경한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">[azureuser@AzureCentOS ~]$ cd /usr/local/\n[azureuser@AzureCentOS local]$ chown -R tomcat:tomcat tomcat</code></pre></div>\n<hr>\n<h4 id=\"step-23---apache-tomcat-서비스-등록-및-시작데몬-등록\" style=\"position:relative;\"><a href=\"#step-23---apache-tomcat-%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%93%B1%EB%A1%9D-%EB%B0%8F-%EC%8B%9C%EC%9E%91%EB%8D%B0%EB%AA%AC-%EB%93%B1%EB%A1%9D\" aria-label=\"step 23   apache tomcat 서비스 등록 및 시작데몬 등록 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 2.3 - Apache Tomcat 서비스 등록 및 시작데몬 등록</h4>\n<p>역시 자바는 세팅이 반이다.\n힘들지만 이제 거의 다 왔다!</p>\n<p>먼저 아무 위치에서나 서비스 등록을 하기 위한 쉘을 만든다. 편의상 파일이름은 tomcat으로 하겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">[azureuser@AzureCentOS ~]$ vi tomcat\n\n(스크립트 내용)\n#!/bin/bash\n   #Startup script for Tomcat\n   #\n   # chkconfig: 345 50 50\n   # description: apache tomcat 9.x\n   # processname: tomcat\n   # directory : CATALINA_HOME=/usr/local/tomcat\n  \n  JAVA_HOME=/usr/local/java\n  CATALINA_HOME=/usr/local/tomcat\n  CLASSPATH=$JAVA_HOME/jre/lib:$JAVA_HOME/lib/tools.jar:$CATALINA_HOME/lib-jsp    -api.jar:$CATALINA_HOME/lib/servlet-api.jar\n  PATH=$PATH:$JAVA_HOME/bin:$CATALINA_HOME/bin:bin:/sbin\n  export JAVA_HOME CLASSPATH PATH CATALINA_HOME\n# See how we were called.\n  case &quot;$1&quot; in\n    start)\n      echo -n &quot;Starting tomcat: &quot;\n      $CATALINA_HOME/bin/startup.sh\n      ;;\n    stop)\n      echo -n &quot;Shutting down tomcat: &quot;\n       $CATALINA_HOME/bin/shutdown.sh\n       ;;\n    restart)\n      echo &quot;Restarting tomcat : &quot;\n      $CATALINA_HOME/bin/shutdown.sh;\n      sleep 2\n      $CATALINA_HOME/bin/startup.sh\n      ;;\n      *)\n      echo &quot;Usage: $0 {start|stop|restart}&quot;\n      exit 1\n esac\n exit 0\n\n(저장 후)\n[azureuser@AzureCentOS ~]$ sudo chown -R tomcat:tomcat tomcat (톰캣 계정으로 실행권한 부여)\n[azureuser@AzureCentOS ~]$ sudo chmod 755 tomcat (쉘 스크립트 실행권한 부여)\n[azureuser@AzureCentOS ~]$ sudo cp -a tomcat /etc/rc.d/init.d/tomcat (시작 서비스 등록을 위한 디렉토리 변경)\n\n[azureuser@AzureCentOS ~]$ sudo chkconfig --add tomcat (runlevel 등록)\n[azureuser@AzureCentOS src]$ systemctl | grep tomcat\n  tomcat.service                                                                           \n  loaded active running   Apache Tomcat 9</code></pre></div>\n<p>이렇게 하면 시작데몬까지 등록을 완료하게 된다.</p>\n<h3 id=\"step-3---apache-tomcat-centos7-firewalld-인바운드-룰-적용-및-indexjsp-페이지-확인\" style=\"position:relative;\"><a href=\"#step-3---apache-tomcat-centos7-firewalld-%EC%9D%B8%EB%B0%94%EC%9A%B4%EB%93%9C-%EB%A3%B0-%EC%A0%81%EC%9A%A9-%EB%B0%8F-indexjsp-%ED%8E%98%EC%9D%B4%EC%A7%80-%ED%99%95%EC%9D%B8\" aria-label=\"step 3   apache tomcat centos7 firewalld 인바운드 룰 적용 및 indexjsp 페이지 확인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 3 - Apache Tomcat CentOS7 firewalld 인바운드 룰 적용 및 index.jsp 페이지 확인</h3>\n<hr>\n<h4 id=\"step-31---centos7-firewalld-톰캣-포트-인바운드-룰-적용\" style=\"position:relative;\"><a href=\"#step-31---centos7-firewalld-%ED%86%B0%EC%BA%A3-%ED%8F%AC%ED%8A%B8-%EC%9D%B8%EB%B0%94%EC%9A%B4%EB%93%9C-%EB%A3%B0-%EC%A0%81%EC%9A%A9\" aria-label=\"step 31   centos7 firewalld 톰캣 포트 인바운드 룰 적용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 3.1 - CentOS7 firewalld 톰캣 포트 인바운드 룰 적용</h4>\n<p>톰캣의 기본포트는 <strong>8080</strong>으로 만약에 접속이 안된다면, 인바운드 방화벽 설정이 되어있는지부터 확인해야된다.</p>\n<p>원래 iptables옵션으로 설정이 가능하나 RHEL7 이후 배포판(우리가 사용하는 centOS7도 포함)은 firewalld를 이용하는 방식이 사용되기 때문에 firewalld를 이용하여 허용하는 방법을 알아보기로 하겠다.</p>\n<p>만일, 우분투라면 UFW(Uncomplicated FireWall)를 사용하기 때문에 자신이 사용하는 운영체제의 방화벽 소프트웨어가 무엇인지부터 확인하는게 중요하다.</p>\n<p>먼저, firewalld가 동작하고 있는지 부터 확인한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">[azureuser@AzureCentOS ~]$ sudo firewall-cmd --state\nrunning</code></pre></div>\n<p>동작 중이라면, 방화벽을 잠시 끈 후에 8080 포트를 허용하기 위해서 설정 옵션을 작성한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">[azureuser@AzureCentOS ~]$ sudo systemctl stop firewalld\n[azureuser@AzureCentOS ~]$ sudo firewall-cmd --permanent --zone=public --add-port=8080/tcp\n[azureuser@AzureCentOS ~]$ firewall-cmd --reload</code></pre></div>\n<p>해당 설정은 /etc/firewalld/zones/public.xml 에서 확인할 수가 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">[azureuser@AzureCentOS ~]$ vi /etc/firewalld/zones/public.xml\n\n&lt;zone&gt;\n  &lt;short&gt;Public&lt;/short&gt;\n  &lt;description&gt;For use in public areas. You do not trust the other computers on networks\n               to not harm your computer. Only selected incoming connections are accepted.&lt;/description&gt;\n  &lt;service name=&quot;dhcpv6-client&quot;&gt;&lt;/service&gt;\n  &lt;service name=&quot;ssh&quot;&gt;&lt;/service&gt;\n  &lt;port protocol=&quot;tcp&quot; port=&quot;8080&quot;&gt;&lt;/port&gt;\n&lt;/zone&gt;</code></pre></div>\n<p>자세한 내용은\n<a href=\"http://faq.hostway.co.kr/?mid=Linux_ETC&#x26;page=2&#x26;document_srl=1624\">Linux Firewall</a>에서 확인하면 된다.</p>\n<hr>\n<h4 id=\"step-32---hello-tomcat\" style=\"position:relative;\"><a href=\"#step-32---hello-tomcat\" aria-label=\"step 32   hello tomcat permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 3.2 - Hello Tomcat!!</h4>\n<p>지금까지의 과정을 마쳤으면, 이제 톰캣이 제대로 동작하는지 확인해야 될 차례이다.\nCentOS7이 설치된 PC의 아이피를 입력하거나, 그 PC 내부에서 웹브라우저를 킨 뒤에 확인할 수가 있다.</p>\n<p>전자의 경우에는 웹브라우저에 <strong>server-ip:8080</strong>을 입력하면 되고, 후자 같은 경우에는 <strong>127.0.0.1:8080</strong>을 입력하면 된다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC10lEQVQ4y23PWU8bZxTG8fnK/RzJRS8qVY26SDQkUVoKTUFgCrbBONgmbAEveBl7PB7P/vqdzeP9XzGRIlXtxU9H59E5OjrKcKjRarTotXs0H5t0211cyyUQAcIVSF8ihcR3/CxLk5Q0TkmnMxJPMPUmpNEU4Qkcx0ERvk9drXM/uOe2c8dj/xEncTJWbGWc2MH+ysaKnnMHw+wxGncYeCojabBcLlFgzf2kzl7rAwXthJJ+Rl49yRT6p5wPi5xrRc60wldFLc+5VuBiVKIwzHPQ2c/y6TpCMaIhhdwLrvIv6cdNbrxLbr1LPrkXXHtl+rMmkjFiM/pf/kqnq7bp9TpYUkf5PCyxs/8N5asX1KI829oPvNFesa29ymrO+Z2r6JSnRfXf5l9qK61y1fzITbOGKhoocuYzTm3MxGQgulipjrsw8Jcm3mKMPdNx5wbR2vuPBJEJFz5y5hEtBErX9Dj+9MBd36DnBMg5tE3BnWowDmaES7Ksa0vMcI5cfOmdZMX9wORWHaFPEuTz3AIUGXuY/hBL6ISpRzQX2IGB7hlYEwOZOMipm10PUg+ZuMh0gogsDE/DkkaWTRKHcOqjJGYZ++ENXmsHv73LdJRjPs7BtEHUP8B5eJeJ1H1WXgHiCku/itV4j9P4jal+xEaWIC5D+BEltKtojzsMG38yfNzFbP1FbJywihsMK29pHHxPv7TFoPyauXsOyTULt4p+/gta4SeM2lv8xh5h75CNf4ESmRXMxh+IwRETLYffP2TmFiF9wqjv0qn8itByxFaBxCqwDmusJ1eY+R9xy1uEzQ8k7X1m/WM2bgnFezqlvv8dsncIcY1NUGEdlNkkTUIjj6/l8PpHBKMTVrIMUY2lvEatbmeHEqdIahdJrSLrsIJi14/5vPctammLpSizCSusnxfTJ+yHPTrFn9Eq26TOGevgkk1UYxXcoN+9z74KRycI9ZBI/zvb/QcYk6pYw3yjaQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"톰캣 index.jsp\"\n        title=\"톰캣 index.jsp\"\n        src=\"/static/d0b1c5f846d4c402d908129a7d865bec/37523/tomcat.png\"\n        srcset=\"/static/d0b1c5f846d4c402d908129a7d865bec/e9ff0/tomcat.png 180w,\n/static/d0b1c5f846d4c402d908129a7d865bec/f21e7/tomcat.png 360w,\n/static/d0b1c5f846d4c402d908129a7d865bec/37523/tomcat.png 720w,\n/static/d0b1c5f846d4c402d908129a7d865bec/302a4/tomcat.png 1080w,\n/static/d0b1c5f846d4c402d908129a7d865bec/07a9c/tomcat.png 1440w,\n/static/d0b1c5f846d4c402d908129a7d865bec/6297e/tomcat.png 2044w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n위와 같은 화면이 보인다면 성공적으로 톰캣이 설치가 된 것이다.</p>\n<h2 id=\"마치면서\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B4%EC%84%9C\" aria-label=\"마치면서 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마치면서</h2>\n<p>다음 글은 Nginx와 Tomcat을 연동하는 것으로 마무리로 Linux상에서 Java 환경을 구축하는 시리즈를 마무리를 짓기로 하겠다.</p>","excerpt":"개요 Apache Tomcat STEP 1 - Apache Tomcat 다운로드 및 설치 STEP 2 - Apache Tomcat 환경변수 등록 및 추가 설정 STEP 2.1 - Apache Tomcat 환경변수 등록 및 방화벽 설정 STEP 2.2 - Tomcat 전용 리눅스 계정 생성 후 그 계정으로 Tomcat 실행하기 STEP 2.3 - Apache Tomcat 서비스 등록 및 시작데몬 등록 STEP 3 - Apache Tomcat CentOS7 firewalld 인바운드 룰 적용 및 index.jsp 페이지 확인 STEP 3.1 - CentOS7 firewalld 톰캣 포트 인바운드 룰 적용 STEP 3.2 - Hello Tomcat!! 마치면서 개요 이번 글은 Apache Tomcat 설치하고 Index.jsp 페이지인 고양이가 뛰어다니는 화면을 웹브라우저에 출력하는 것을 목표로 하겠다. Apache Tomcat 이전 글을 따라서 진행하는 사람이라면, Latest Ver…","frontmatter":{"date":"July 04, 2018","title":"리눅스(CentOS7)에서 자바 개발환경 구축하기 - 톰캣 설치 및 환경설정","categories":"인프라","author":"개발한입","emoji":"💻"},"fields":{"slug":"/install-tomcat-on-centos/"}},"next":{"id":"cccb5f3b-a6cf-5d87-9541-457da6aa9339","html":"<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EA%B0%9C%EC%9A%94\">개요</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%ED%99%98%EA%B2%BD\">운영체제 환경</a></p>\n<ul>\n<li><a href=\"#%EB%A6%AC%EB%88%85%EC%8A%A4\">리눅스</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#jdk-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0\">JDK 설치하기</a></p>\n<ul>\n<li>\n<p><a href=\"#jdk10-install-using-downloaded-jdk10-binary-file\">JDK10 Install Using Downloaded JDK10 Binary file</a></p>\n</li>\n<li>\n<p><a href=\"#jdk10-install-using-downloaded-jdk10-rpm-file\">JDK10 Install Using Downloaded JDK10 RPM file</a></p>\n<ul>\n<li><a href=\"#11-step-1---jdk10-%EC%86%8C%EC%8A%A4-%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C%ED%95%98%EA%B8%B0\">1.1 STEP 1 - JDK10 소스 다운로드하기</a></li>\n<li><a href=\"#12-step-2---jdk10-%EB%AA%85%EB%A0%B9%EC%96%B4-%EB%93%B1%EB%A1%9D\">1.2 STEP 2 - JDK10 명령어 등록</a></li>\n<li><a href=\"#13-step-3---jdk10-%EC%84%A4%EC%B9%98-%ED%99%95%EC%9D%B8\">1.3 STEP 3 - JDK10 설치 확인</a></li>\n<li><a href=\"#21-step-1---jdk10-rpm-%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C%ED%95%98%EA%B8%B0\">2.1 STEP 1 - JDK10 RPM 다운로드하기</a></li>\n<li><a href=\"#22-step-2---jdk10-%EC%84%A4%EC%B9%98-%ED%95%98%EA%B8%B0\">2.2 STEP 2 - JDK10 설치 하기</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%ED%8A%B8%EB%9F%AC%EB%B8%94-%EC%8A%88%ED%8C%85\">트러블 슈팅</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B4%EC%84%9C\">마치면서</a></p>\n</li>\n</ul>\n</div>\n<h2 id=\"개요\" style=\"position:relative;\"><a href=\"#%EA%B0%9C%EC%9A%94\" aria-label=\"개요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>개요</h2>\n<p>오늘은 Centos7에서 Java 개발환경을 구성하는 첫번째 단추인 Java(JDK)를 설치 후에 환경변수까지 설정하는 것을 적어보려고 한다.</p>\n<h2 id=\"운영체제-환경\" style=\"position:relative;\"><a href=\"#%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%ED%99%98%EA%B2%BD\" aria-label=\"운영체제 환경 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>운영체제 환경</h2>\n<h3 id=\"리눅스\" style=\"position:relative;\"><a href=\"#%EB%A6%AC%EB%88%85%EC%8A%A4\" aria-label=\"리눅스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>리눅스</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">1. 리눅스 배포반 버전\n2. 리눅스 커널 버전</code></pre></div>\n<ol>\n<li>리눅스 배포판 버전</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">[azureuser@AzureCentOS ~]$ grep . /etc/*-release\n/etc/centos-release:CentOS Linux release 7.5.1804 (Core)\n/etc/os-release:NAME=&quot;CentOS Linux&quot;\n/etc/os-release:VERSION=&quot;7 (Core)&quot;\n/etc/os-release:ID=&quot;centos&quot;\n/etc/os-release:ID_LIKE=&quot;rhel fedora&quot;\n/etc/os-release:VERSION_ID=&quot;7&quot;\n/etc/os-release:PRETTY_NAME=&quot;CentOS Linux 7 (Core)&quot;\n/etc/os-release:ANSI_COLOR=&quot;0;31&quot;\n/etc/os-release:CPE_NAME=&quot;cpe:/o:centos:centos:7&quot;\n/etc/os-release:HOME_URL=&quot;https://www.centos.org/&quot;\n/etc/os-release:BUG_REPORT_URL=&quot;https://bugs.centos.org/&quot;\n/etc/os-release:CENTOS_MANTISBT_PROJECT=&quot;CentOS-7&quot;\n/etc/os-release:CENTOS_MANTISBT_PROJECT_VERSION=&quot;7&quot;\n/etc/os-release:REDHAT_SUPPORT_PRODUCT=&quot;centos&quot;\n/etc/os-release:REDHAT_SUPPORT_PRODUCT_VERSION=&quot;7&quot;\n/etc/redhat-release:CentOS Linux release 7.5.1804 (Core)\n/etc/system-release:CentOS Linux release 7.5.1804 (Core)</code></pre></div>\n<ol>\n<li>리눅스 커널 버전</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">[azureuser@AzureCentOS ~]$ yum list installed | grep ^kernel\nkernel.x86_64                          3.10.0-327.18.2.el7            @updates\nkernel.x86_64                          3.10.0-327.28.2.el7            @updates\nkernel.x86_64                          3.10.0-862.3.2.el7             @updates\nkernel-headers.x86_64                  3.10.0-862.3.2.el7             @updates\nkernel-tools.x86_64                    3.10.0-862.3.2.el7             @updates\nkernel-tools-libs.x86_64               3.10.0-862.3.2.el7             @updates</code></pre></div>\n<p>커널 버전과 배포판 버전은 위의 코드와 같이 CentOS-7.5버전과 3.10.0 커널을 사용한다.</p>\n<h2 id=\"jdk-설치하기\" style=\"position:relative;\"><a href=\"#jdk-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0\" aria-label=\"jdk 설치하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JDK 설치하기</h2>\n<p>초기에는 원래 JDK9을 설치하려 했으나, 나온지 얼마 안되서 Java10 <sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup>으로 통합이 되었는지 현재 JDK9는 <em>End of support</em> <sup id=\"fnref-2\"><a href=\"#fn-2\" class=\"footnote-ref\">2</a></sup>상태이다.(아무래도 Java10으로 통합이 된 것같다.) 따라서 Java버전은 Java10 <sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup>으로 설치를 진행한다.</p>\n<p>방법은 소스를 다운로드 받아서 설치하는 방법과\nRPM 다운로드를 통하여 yum으로 설치하는 방법이 있다.</p>\n<p>여기서는 두 방법 모두 다뤄보기로 한다.</p>\n<h3 id=\"jdk10-install-using-downloaded-jdk10-binary-file\" style=\"position:relative;\"><a href=\"#jdk10-install-using-downloaded-jdk10-binary-file\" aria-label=\"jdk10 install using downloaded jdk10 binary file permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JDK10 Install Using Downloaded JDK10 Binary file</h3>\n<hr>\n<ol>\n<li>STEP 1 - JDK10 소스 다운로드하기</li>\n<li>STEP 2 - JDK10 명령어 등록</li>\n<li>STEP 3 - JDK10 설치 확인</li>\n</ol>\n<h3 id=\"jdk10-install-using-downloaded-jdk10-rpm-file\" style=\"position:relative;\"><a href=\"#jdk10-install-using-downloaded-jdk10-rpm-file\" aria-label=\"jdk10 install using downloaded jdk10 rpm file permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JDK10 Install Using Downloaded JDK10 RPM file</h3>\n<hr>\n<ol>\n<li>STEP 1 - JDK10 RPM 다운로드하기</li>\n<li>STEP 2 - JDK10 설치 하기</li>\n</ol>\n<hr>\n<h4 id=\"11-step-1---jdk10-소스-다운로드하기\" style=\"position:relative;\"><a href=\"#11-step-1---jdk10-%EC%86%8C%EC%8A%A4-%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C%ED%95%98%EA%B8%B0\" aria-label=\"11 step 1   jdk10 소스 다운로드하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.1 STEP 1 - JDK10 소스 다운로드하기</h4>\n<p>먼저 wget을 이용하기 때문에 wget이 설치되어 있는지부터 확인한다.\n(Minimal버전 일 경우에도 wget은 설치되어 있는 것으로 알고 있다.)</p>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">[azureuser@AzureCentOS ~]$ yum list installed | grep wget\nwget.x86_64                            1.14-15.el7_4.1                @base</code></pre></div>\n<p><span class=\"evidence\">yum list installed</span>\n해당 명령어로 설치된 명령어를 확인 할 수가 있는데\n<span class=\"evidence\">| grep wget</span>\n파이프 연산 <sup id=\"fnref-3\"><a href=\"#fn-3\" class=\"footnote-ref\">3</a></sup>과 grep을 통해 wget이 설치되었는지 확인 할 수가 있다. 당연하게도 wget자리에 다른 패키지로 입력하면 다른 패키지도 확인 할 수가 있다.</p>\n<p>현재 JDK10의 Latest Version은 10.0.1이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">[azureuser@AzureCentOS local]$ sudo wget --no-cookies --no-check-certificate --header &quot;Cookie: oraclelicense=accept-securebackup-cookie&quot; \\\n  http://download.oracle.com/otn-pub/java/jdk/10.0.1+10/fb4372174a714e6b8c52526dc134031e/jdk-10.0.1_linux-x64_bin.tar.gz</code></pre></div>\n<p>해당 명령어를 주어서 자바10 JDK 소스파일을 다운로드 받는다.\n나와 같은 경우에는 해당 소스를 <span class=\"evidence\">/usr/local/src</span>에 넣어놨는데 Java의 위치는 <span class=\"evidence\">/usr/local/java-* </span>으로 하고 싶기때문에 압축풀때 따로 해당 폴더에 풀리도록 옵션을 추가하겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">tar zxf jdk-10.0.1_linux-x64_bin.tar.gz -C /usr/local</code></pre></div>\n<p>그 후에 jdk-10.0.1을 /usr/local/java로 사용하기 위해서 심볼릭링크 <sup id=\"fnref-4\"><a href=\"#fn-4\" class=\"footnote-ref\">4</a></sup>를 생성한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">ln -s /usr/local/jdk-10.0.1 /usr/local/java</code></pre></div>\n<h4 id=\"12-step-2---jdk10-명령어-등록\" style=\"position:relative;\"><a href=\"#12-step-2---jdk10-%EB%AA%85%EB%A0%B9%EC%96%B4-%EB%93%B1%EB%A1%9D\" aria-label=\"12 step 2   jdk10 명령어 등록 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.2 STEP 2 - JDK10 명령어 등록</h4>\n<p>압축풀기와 심볼릭링크 생성까지 마친 다음에는 이제는 명령어 등록하는 절차가 필요하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">alternatives --install /usr/bin/java java /usr/local/bin/java 1\nalternatives --config java\n\nalternatives --install /usr/bin/jar jar /usr/local/java/bin/jar 1\nalternatives --install /usr/bin/javac javac /usr/local/java/bin/javac 1\n\nalternatives --set jar /usr/local/java/bin/jar\nalternatives --set javac /usr/local/java/bin/javac</code></pre></div>\n<p>alternatives명령어를 통해 java와 jar, javac 명령어를 등록한다.</p>\n<h4 id=\"13-step-3---jdk10-설치-확인\" style=\"position:relative;\"><a href=\"#13-step-3---jdk10-%EC%84%A4%EC%B9%98-%ED%99%95%EC%9D%B8\" aria-label=\"13 step 3   jdk10 설치 확인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.3 STEP 3 - JDK10 설치 확인</h4>\n<p>STEP 1, 2를 끝낸 후라면 정상적인 경우에는</p>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">[azureuser@AzureCentOS local]$ java -version java -version\njava 10 2018-04-17\nJava(TM) SE Runtime Environment 18.3 (build 10+46)\nJava HotSpot(TM) 64-Bit Server VM 18.3 (build 10+46, mixed mode)\n\n[azureuser@AzureCentOS local]$ javac -version\njavac 10.0.1</code></pre></div>\n<p>이런식으로 등록한 명령어에 대한 결과 값이 정상적으로 출력이 된다.</p>\n<hr>\n<h4 id=\"21-step-1---jdk10-rpm-다운로드하기\" style=\"position:relative;\"><a href=\"#21-step-1---jdk10-rpm-%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C%ED%95%98%EA%B8%B0\" aria-label=\"21 step 1   jdk10 rpm 다운로드하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.1 STEP 1 - JDK10 RPM 다운로드하기</h4>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">[azureuser@AzureCentOS src]$ sudo wget --no-cookies --no-check-certificate --header &quot;Cookie: oraclelicense=accept-securebackup-cookie&quot; \\\n&gt; http://download.oracle.com/otn-pub/java/jdk/10.0.1+10/fb4372174a714e6b8c52526dc134031e/jdk-10.0.1_linux-x64_bin.rpm</code></pre></div>\n<p>1.1과 마찬가지로 wget을 이용하여, rpm을 다운로드 받는다.</p>\n<h4 id=\"22-step-2---jdk10-설치-하기\" style=\"position:relative;\"><a href=\"#22-step-2---jdk10-%EC%84%A4%EC%B9%98-%ED%95%98%EA%B8%B0\" aria-label=\"22 step 2   jdk10 설치 하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.2 STEP 2 - JDK10 설치 하기</h4>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">[azureuser@AzureCentOS src]$ sudo yum localinstall jdk-10.0.1_linux-x64_bin.rpm</code></pre></div>\n<p>그 후에 localinstall로 통하여 로컬로 다운로드 받아진 rpm 파일을 yum을 통해서 설치한다.</p>\n<p>그 후에 또 1.3과 마찬가지로 버전확인을 한다.</p>\n<p>만일, JDK가 여러가지가 설치 된 경우에 새로 받은 JDK를 선택해야되는 상황이라면,</p>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">sudo alternatives --config java\nThere are 4 programs which provide &#39;java&#39;.\n\n  Selection    Command\n-----------------------------------------------\n   1           /usr/java/jdk1.8.0_162/jre/bin/java\n   2           java-1.8.0-openjdk.x86_64 (/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.161-0.b14.el7_4.x86_64/jre/bin/java)\n   3           java-1.7.0-openjdk.x86_64 (/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.171-2.6.13.0.el7_4.x86_64/jre/bin/java)\n*+ 4           /usr/java/jdk-9.0.4/bin/java\n\nEnter to keep the current selection[+], or type selection number:</code></pre></div>\n<p><span class=\"evidence\">sudo alternatives —config java<span>과 같은 옵션으로 JDK10을 설치 할 수가 있다.</p>\n<p>마지막으로 환경변수 등록이 필요한데</p>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">[azureuser@AzureCentOS src]$ vi /etc/profile\n\nexport JAVA_HOME=/usr/local/java\nexport PATH=$PATH:/usr/local/java/bin:/bin:/sbin\n\n(편집 후 저장 후에)\n[azureuser@AzureCentOS src]$ sudo source /etc/profile</code></pre></div>\n<p>이런식으로 /etc/profile에 환경변수를 등록하여 사용하면 된다. 위의 내용을 적고, <span class=\"evidence\">sudo source /etc/profile</span> 명령어를 통하여 변경사항을 등록한다.</p>\n<p>추가로 <strong>CLASSPATH</strong>라는 환경변수도 등록이 가능한데, 사용할 클래스들의 위치를 가상머신에게 알려주는 역할을 한다.\n만약 클래스패스 변수가 없다면, 각각 클래스 패스를 지정해야된다. 이 뜻은 클래스가 여러 경로에 분산되어 있을 때 일일히 클래스패스를 명시해야되기 때문에 자주 쓰는 라이브러리 또는 api같은 경우에는 등록을 하는 것이 좋다.</p>\n<p>따라서 자주 쓰는 라이브러리같은 경우에는 클래스 패스를 등록을 하는게 좋다.</p>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">[azureuser@AzureCentOS src]$ vi /etc/profile\nexport CLASSPATH=$JAVA_HOME/jre/lib:$JAVA_HOME/lib/tools.jar</code></pre></div>\n<p>필자는 이와 같이 tools.jar과 jre/lib폴더를 추가하였다.</p>\n<h2 id=\"트러블-슈팅\" style=\"position:relative;\"><a href=\"#%ED%8A%B8%EB%9F%AC%EB%B8%94-%EC%8A%88%ED%8C%85\" aria-label=\"트러블 슈팅 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>트러블 슈팅</h2>\n<p>환경 변수를 등록할때를 보면 PATH 부분을 저장 후에 리눅스의 기본 모든 명령어들이 사용이 안되는 현상이 발생했다.</p>\n<p>그 이유는 etc/profile에 PATH를 등록할때 루트(/)의 bin과 sbin의 명령어의 PATH가 날라가서 충돌이 발생하는 현상이 발생한다.</p>\n<p>따라서 PATH의 환경변수를 사용할 때는\n<span class=\"evidence\">export PATH=$PATH:/usr/local/java/bin:/bin:/sbin</span>\n부분 중에 <span class=\"evidence\">:/bin:/sbin</span>을 추가적으로 PATH에 등록하면 해결이 된다.</p>\n<h2 id=\"마치면서\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B4%EC%84%9C\" aria-label=\"마치면서 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마치면서</h2>\n<p>추가로 필요하다면 JRE도 위의 방식과 동일한 방법으로 설치하면 된다.</p>\n<p>다음 글은 Tomcat 설치와 환경변수 등록 및 Nginx Reverse Proxy설정까지 하는 것으로 포스팅을 해보겠다.</p>\n<div class=\"footnotes\">\n<hr>\n<ol>\n<li id=\"fn-1\"><a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk10-downloads-4416644.html\">http://www.oracle.com/technetwork/java/javase/downloads/jdk10-downloads-4416644.html</a><a href=\"#fnref-1\" class=\"footnote-backref\">↩</a></li>\n<li id=\"fn-2\"><a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk9-downloads-3848520.html\">http://www.oracle.com/technetwork/java/javase/downloads/jdk9-downloads-3848520.html</a><a href=\"#fnref-2\" class=\"footnote-backref\">↩</a></li>\n<li id=\"fn-3\"><a href=\"http://jdm.kr/blog/74\">http://jdm.kr/blog/74</a><a href=\"#fnref-3\" class=\"footnote-backref\">↩</a></li>\n<li id=\"fn-4\"><a href=\"http://www.myservlab.com/64\">http://www.myservlab.com/64</a><a href=\"#fnref-4\" class=\"footnote-backref\">↩</a></li>\n</ol>\n</div>","frontmatter":{"date":"July 03, 2018","title":"리눅스(CentOS7)에서 자바 개발환경 구축하기 - JDK10 설치하기","categories":"인프라","author":"개발한입","emoji":"🧢"},"fields":{"slug":"/install-jdk-on-centos/"}},"prev":{"id":"1cd38878-3f6c-54b0-89f4-36d2fed796e6","html":"<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#step-1---nginx%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0\">STEP 1 - Nginx설치하기</a></p>\n<ul>\n<li>\n<p><a href=\"#step-11---install-nginx-using-webtatic-repo-%EB%B9%84%EC%B6%94%EC%B2%9C\">STEP 1.1 - Install Nginx using webtatic repo <strong>(비추천)</strong></a></p>\n<ul>\n<li><a href=\"#step-111-epel%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0\">STEP 1.1.1 EPEL설치하기</a></li>\n<li><a href=\"#step-113-webtatic%EC%A0%80%EC%9E%A5%EC%86%8C-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0\">STEP 1.1.3 Webtatic저장소 설치하기</a></li>\n<li><a href=\"#troubleshooting\">Troubleshooting</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#setp-12---install-nginx-using-nginx-official-repo-%EC%B6%94%EC%B2%9C\">SETP 1.2 - Install Nginx using Nginx official repo (<strong>추천</strong>)</a></p>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#step-2---nginx%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\">STEP 2 - Nginx를 사용하는 이유</a></p>\n<ul>\n<li><a href=\"#step-21---nginx%EA%B0%80%EC%83%81%ED%98%B8%EC%8A%A4%ED%8A%B8%EC%84%A4%EC%A0%95-%EB%8F%99%EC%9E%91%EC%95%88%ED%95%98%EB%8B%88%EA%B9%8C-%EC%B0%B8%EA%B3%A0%EB%A7%8C-%ED%95%98%EC%9E%90\">STEP 2.1 - Nginx가상호스트설정 <strong>(동작안하니까 참고만 하자!!!)</strong></a></li>\n<li><a href=\"#step-22---nginx--apache-tomcat-%EB%A6%AC%EB%B2%84%EC%8A%A4%ED%94%84%EB%A1%9D%EC%8B%9C%EC%84%A4%EC%A0%95\">STEP 2.2 - Nginx &#x26; Apache Tomcat 리버스프록시설정</a></li>\n</ul>\n</li>\n</ul>\n</div>\n<h1 id=\"개요\" style=\"position:relative;\"><a href=\"#%EA%B0%9C%EC%9A%94\" aria-label=\"개요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>개요</h1>\n<p>이전장을 통해서 우리는 리눅스 상에서 jdk와 톰캣을 설치 및 환경설정을 하였다.\n이번 장에서는 nginx의 reverse proxy기능을 이용하여 톰캣과 엔진엑스를 연동하는 방법을 알아보도록하겠다.</p>\n<h1 id=\"nginx와-apache-tomcat-연동하기\" style=\"position:relative;\"><a href=\"#nginx%EC%99%80-apache-tomcat-%EC%97%B0%EB%8F%99%ED%95%98%EA%B8%B0\" aria-label=\"nginx와 apache tomcat 연동하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Nginx와 Apache Tomcat 연동하기</h1>\n<ul>\n<li>STEP 1 - Nginx설치하기\n<ul>\n<li>STEP 1.1 - Install Nginx using webtatic repo <strong>(비추천)</strong>\n<ul>\n<li>STEP 1.1.1 EPEL 설치하기</li>\n<li>STEP 1.1.2 Webatic 저장소 설치하기</li>\n<li>Troubleshooting</li>\n</ul>\n</li>\n<li>SETP 1.2 - Install Nginx using Nginx official repo <strong>(추천)</strong></li>\n</ul>\n</li>\n<li>STEP 2 - Nginx를 사용하는 이유\n<ul>\n<li>STEP 2.1 - Nginx 가상호스트 설정 <strong>(참고만 하자)</strong></li>\n<li>STEP 2.2 - Nginx reverse proxy Tomcat에 적용</li>\n</ul>\n</li>\n<li>REFERENCE</li>\n</ul>\n<hr>\n<h2 id=\"step-1---nginx설치하기\" style=\"position:relative;\"><a href=\"#step-1---nginx%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0\" aria-label=\"step 1   nginx설치하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 1 - Nginx설치하기</h2>\n<h3 id=\"step-11---install-nginx-using-webtatic-repo-비추천\" style=\"position:relative;\"><a href=\"#step-11---install-nginx-using-webtatic-repo-%EB%B9%84%EC%B6%94%EC%B2%9C\" aria-label=\"step 11   install nginx using webtatic repo 비추천 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 1.1 - Install Nginx using webtatic repo <strong>(비추천)</strong></h3>\n<p>이번에는 바이너리 파일을 다운로드해서 설치하는게 아니라 webtatic이라는 프로그램을 통해서 최신 프로그램을 설치해보도록 하겠다.</p>\n<hr>\n<h4 id=\"step-111-epel설치하기\" style=\"position:relative;\"><a href=\"#step-111-epel%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0\" aria-label=\"step 111 epel설치하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 1.1.1 EPEL설치하기</h4>\n<p>먼저 webtatic을 설치하기 위해서는 EPLE(Extra Pakage for Enterprise Linux) <sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup>라는 프로그램이 선행설치가 필요하다.\nEPLE에 대해서 간단히 설명하면, 우리가 쓰는 리눅스 OS는 RHEL계열 배포판인데 RHEL은 최신버전의 프로그램의 사용보다는 안정성을 최우선으로 한다. 따라서 패키지 업데이트가 잘 안되는데 이러한 것을 EPEL을 사용하여 해결할 수가 있다.</p>\n<p>간단히 얘기하면 yum에 없는 패키지나 최신버전이 아닌 패키지를 다운받을 수 있게하는 역할을 한다고 생각하면 된다.</p>\n<p>따라서 최신 패키지를 사용하기 위해서는 epel나 remi, webtatic 저장소를 이용하는게 편하다.</p>\n<p>설치법은 매우 간단하다.\nCentOS7 환경에서는 단순하게 아래의 명령어를 입력하면 된다.</p>\n<blockquote>\n<p>rpm -Uvh <a href=\"https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm\">https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm</a></p>\n</blockquote>\n<p>실행결과는 아래와 같이 나온다.\n필자는 이미 설치되어서 이미 설치되어있다고 나온다.</p>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">[root@AzureCentOS azureuser]# rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm\nRetrieving https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm\nwarning: /var/tmp/rpm-tmp.loyNno: Header V3 RSA/SHA256 Signature, key ID 352c64e5: NOKEY\nPreparing...                          ################################# [100%]</code></pre></div>\n<hr>\n<h4 id=\"step-113-webtatic저장소-설치하기\" style=\"position:relative;\"><a href=\"#step-113-webtatic%EC%A0%80%EC%9E%A5%EC%86%8C-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0\" aria-label=\"step 113 webtatic저장소 설치하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 1.1.3 Webtatic저장소 설치하기</h4>\n<p>다양한 확장 저장소가 있지만 (remi, IUS 등) 그것은 추후에 포스팅하도록하고, Nginx 최신안정버전을 받을 수 있는 webtatic을 이용해서 Nginx를 다운받기로 한다.</p>\n<blockquote>\n<p>이것은 밑에서 Nginx 공식저장소로 다운받는거에 비해서 권장되지는 않으나 이런게 있구나정도로 넘어가면 되겠다.</p>\n</blockquote>\n<p>epel과 마찬가지로 아주 쉽게 설치할 수가 있다.</p>\n<blockquote>\n<p>rpm -Uvh <a href=\"https://mirror.webtatic.com/yum/el7/webtatic-release.rpm\">https://mirror.webtatic.com/yum/el7/webtatic-release.rpm</a></p>\n</blockquote>\n<p>그 후에 yum repolist로 repository가 잘 등록되었는지 확인한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">[root@AzureCentOS azureuser]# yum repolist\nLoaded plugins: fastestmirror\nRepository nodesource is listed more than once in the configuration\nRepository nodesource-source is listed more than once in the configuration\nLoading mirror speeds from cached hostfile\n * epel: mirror.premi.st\n * remi-safe: ftp.riken.jp\n * webtatic: sp.repo.webtatic.com\nrepo id                                        repo name \n...       </code></pre></div>\n<blockquote>\n<p>Loading mirror speeds from cached hostfile</p>\n</blockquote>\n<p>epel: mirror.premi.st<br>\nwebtatic: sp.repo.webtatic.com</p>\n<p>이런식의 문구가 나온다면 성공적으로 설치가 된 것이다.\n만일 저 문구가 나오지 않는다면,</p>\n<blockquote>\n<p>sudo  vi /etc/yum.repos.d/webtatic.repo</p>\n</blockquote>\n<p>명령어를 입력후에 <strong>enable=1</strong>로 수정한다.</p>\n<p>그리고 webtatic보다 nginx 공식 저장소를 추천하는 이유가 이제서야 나오는데 지금 글 작성 시점 (‘18.07.22)에서 nginx LTS버전은 <strong>1.14.0</strong>이다.\n하지만 webtatic 저장소의 버전 <sup id=\"fnref-2\"><a href=\"#fn-2\" class=\"footnote-ref\">2</a></sup>은 1.10.3으로 레거시버전이다.\n이 버전을 이용하려는 사람은 설치해도 무방하나 왠만하면 nginx 공식 저장소를 이용한 설치를 추천한다.</p>\n<p>또한 1.10.3을 바로 설치하는 방법이 아니라 1.8버전을 설치 후  업그레이드 하는 방식 <sup id=\"fnref-3\"><a href=\"#fn-3\" class=\"footnote-ref\">3</a></sup>을 취한다.</p>\n<p>일단 yum말고 다른 저장소를 사용한다는데에 의의를 두고 (공부목적) 위에서 언급한 바와 같이</p>\n<blockquote>\n<p>“이런 방법이 있구나!!” 생각하고 넘어가자.</p>\n</blockquote>\n<p>만약 난 여기까지 왔고, 그냥 webtatic을 사용하여 설치하고 싶다는 분들을 위해서 계속해서 방법을 적어보도록 하겠다.</p>\n<p>이후의 단계는 Webtatic저장소를 이용하여 Nginx1.8를 설치 후에 1.10.3을 업그레이드하는 단계가 남아있다.</p>\n<p>먼저 webtatic저장소를 이용하여 설치하는 방법은 매우 간단하다 위의 단계를 착실히 수행했다면 아래의 명령어를 입력한다.</p>\n<blockquote>\n<p>yum install nginx18</p>\n</blockquote>\n<p>그러면 자신의 CentOS7에 nginx설치는 완료되며 관련 설정파일들은 (ex : nginx.conf) <strong>/etc/nginx</strong> 경로안에 있다.</p>\n<p>이제 바로 Nginx1.8버전을 1.10.3으로 업그레이드를 해보자!</p>\n<blockquote>\n<p>yum install yum-plugin-replace</p>\n</blockquote>\n<p>yum replace nginx18 —replace-with=nginx1w<br>\nsystemctl restart nginx</p>\n<p>위의 명령어를 입력하면 1.8 버전 nginx가 1.10.3으로 대체가 된다.</p>\n<p>해당 명령어로 업그레이드할 시에</p>\n<blockquote>\n<p>WARNING: Unable to resolve all providers …</p>\n</blockquote>\n<p>이러한 에러가 나오면 정상적인 상황이니까 당황하지말고 <strong>y</strong>를 입력하자!</p>\n<hr>\n<h4 id=\"troubleshooting\" style=\"position:relative;\"><a href=\"#troubleshooting\" aria-label=\"troubleshooting permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Troubleshooting</h4>\n<p>만약 설치가 제대로 안된다면, 공식사이트에서는 해당 명령어를 입력해보는 것을 권장하고 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">yum shell\nremove nginx18\ninstall nginx1w\nrun\nsystemctl restart nginx</code></pre></div>\n<hr>\n<h3 id=\"setp-12---install-nginx-using-nginx-official-repo-추천\" style=\"position:relative;\"><a href=\"#setp-12---install-nginx-using-nginx-official-repo-%EC%B6%94%EC%B2%9C\" aria-label=\"setp 12   install nginx using nginx official repo 추천 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SETP 1.2 - Install Nginx using Nginx official repo (<strong>추천</strong>)</h3>\n<p>필자는 이 방법으로 Nginx를 설치하는것을 권장하고있다!</p>\n<p>RHEL 배포판에는 Nginx을 포함하고 있지않으므로, Nginx repo를 직접 추가해줘야한다.</p>\n<p>아래의 명령어를 따라하자!</p>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">[azureuser@AzureCentOS ~]$ sudo vi /etc/yum.repos.d/nginx.repo\n\n#vi 편집기를 연 후에 아래의 내용 작성\n\n[nginx]\nname=Nginx Repository \\$basearch - Archive \nbaseurl=http://nginx.org/packages/centos/\\$releasever/\\$basearch/\nenabled=1\ngpgcheck=1\ngpgkey=https://nginx.org/keys/nginx_signing.key\n\n#저장 후에 (wq) 제대로 적용됐는지 확인\n[azureuser@AzureCentOS ~]$ yum info nginx\nInstalled Packages\nName        : nginx\nArch        : x86_64\nEpoch       : 1\nVersion     : 1.14.0\nRelease     : 1.el7_4.ngx\nSize        : 2.6 M\nRepo        : installed\nFrom repo   : nginx\nSummary     : High performance web server\nURL         : http://nginx.org/\nLicense     : 2-clause BSD-like license\nDescription : nginx [engine x] is an HTTP and reverse proxy server, as well as\n            : a mail proxy server.</code></pre></div>\n<p>필자 같은 경우에는 설치가 되어있으므로, <strong>installed</strong>라고 나온다.\n1.14.0 (LTS)버전이 설치된 것을 확인할 수가 있다.</p>\n<p>설치 및 부팅시 자동 구동하도록 설정하기 위해서는</p>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">[azureuser@AzureCentOS ~]$ sudo yum install nginx\n\n#설치 완료 후 시작데몬 등록 \n[azureuser@AzureCentOS ~]$ sudo systemctl enable nginx\n[azureuser@AzureCentOS ~]$ sudo systemctl restart nginx</code></pre></div>\n<p>이렇게 하면 nginx 공식 저장소를 이용하여 nginx를 설치하는 것을 끝낼 수가 있다.</p>\n<hr>\n<h2 id=\"step-2---nginx를-사용하는-이유\" style=\"position:relative;\"><a href=\"#step-2---nginx%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-label=\"step 2   nginx를 사용하는 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 2 - Nginx를 사용하는 이유</h2>\n<p>Tomcat을 사용하는데 왜 Nginx를 굳이 쓸까? 하는 이유를 갖는 사람들이 많을 것이다.\n일단 먼저 차이점을 알아야한다. Tomcat은 서블릿 컨테이너를 포함한 WAS(Web Application Server)이다. Nginx는 강력하고 단순한 웹서버로서 특히, 가상호스트 설정과 리버스 프록시를 구축하는데 자주 사용되는 웹서버이다.</p>\n<p>즉, 사용자의 Http 요청은 Http Server(= Web Server)로 받은 후에 다시 웹서버가 WAS에 필요한 내용을 전달한 후에 WAS에서 처리 후에 다시 웹서버가 클라이언트에게 표현하는 식으로 구현하는 것이다.</p>\n<p><img src=\"../assets/images/EFD108B9-A993-4AFA-8473-4EDF05EE6AD6.png\" alt=\"웹서버와 WAS의 처리 방법\"></p>\n<p>해당 내용은 이미지인 출처인 <a href=\"http://gap85.tistory.com/45\">WAS와 웹서버의 차이</a>에서 자세하게 확인할 수가 있다. 간단하게 설명하자면, 톰캣은 동적 서버콘텐츠를 수행하고, 웹서버는 정적 서버콘텐츠를 수행한다는 점이다.</p>\n<p>그리고 Nginx는 가장 큰 장점인 매우 쉬운 가상호스트 설정으로 하나의 서버에서 여러개의 웹서버를 구동함하는 장점을 갖는다.</p>\n<p><img src=\"../assets/images/EF22FD5B-744C-4780-9D1A-BCF9FF7AEDB8.gif\" alt=\"Nginx 가상호스트\"></p>\n<p>위의 도식표를 보면 이해가 될 것이다.\n사용자가 news에 대한 요청을 하면 해당 도메인에 엮인 부분을 Nginx가 읽고, 해당 디렉토리에 있는 콘텐츠를 응답하고, blog에 대한 질의를 하면 blog 디렉토리에 있는 콘텐츠를 응답한다.</p>\n<p>그리고 Reverse Proxy는 액세스 포인트를 주어서 각기 다른 도메인을 사용해도, 한 액세스 포인트에서 로그관리와 클라이언트 요청에 맞게 url 매핑을 하는 기능을 수행한다.</p>\n<p>아래의 그림을 보자.\n<img src=\"../assets/images/CF80CCA8-CE9D-4D9E-8B08-918D6F03CEAA.png\" alt=\"Nginx 리버스프록시\"></p>\n<p>위와 같은 도식을 통해서 Reverse Proxy의 장점을 정리하자면 아래와 같이 볼 수가 있다.</p>\n<ol>\n<li>서버의 부하를 덜어줄수 있는 로드 밸런싱 처리</li>\n<li>각 서버의 부하를 덜어준 만큼 웹서버 속도 증대</li>\n<li>보안과 익명성</li>\n<li>중앙 집중식 log 작성과 감시</li>\n<li>캐쉬사용</li>\n</ol>\n<p>위와 같은 기능을 아주 쉽게 Nginx가 제공한다는 것이다.\n따라서, 앞으로는 가상호스트 설정 및 리버스프록시 설정을 해보자한다.</p>\n<hr>\n<h3 id=\"step-21---nginx가상호스트설정-동작안하니까-참고만-하자\" style=\"position:relative;\"><a href=\"#step-21---nginx%EA%B0%80%EC%83%81%ED%98%B8%EC%8A%A4%ED%8A%B8%EC%84%A4%EC%A0%95-%EB%8F%99%EC%9E%91%EC%95%88%ED%95%98%EB%8B%88%EA%B9%8C-%EC%B0%B8%EA%B3%A0%EB%A7%8C-%ED%95%98%EC%9E%90\" aria-label=\"step 21   nginx가상호스트설정 동작안하니까 참고만 하자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 2.1 - Nginx가상호스트설정 <strong>(동작안하니까 참고만 하자!!!)</strong></h3>\n<p>우분투와 달리 (우분투는 sites-enabled/ 디렉토리 아래에 해당 가상호스트 설정을 집어 넣으면 끝이다.) RHEL 배포판은 가상호스트 설정을 하기가 좀 불편하다.</p>\n<p>이번에는 CentOS7에서도 우분투처럼 가상호스트를 관리하기 위한 설정을 해보고자 한다.\n일단, 우리가 설치한 Nginx의 경로는 <em>/etc/nginx</em>이다.\n아래의 폴더에 가상호스트를 관리하기위한 설정을 해보겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">[azureuser@AzureCentOS nginx] sudo mkdir /etc/nginx/sites-available/\n[azureuser@AzureCentOS nginx] sudo mkdir /etc/nginx/sites-enabled/</code></pre></div>\n<p>이후 Nginx의 설정파일인 Nginx.conf를 수정하는데 자세한 내용은\n<a href=\"http://technerd.tistory.com/19\">Nginx의 기본 구성</a>으로 대체하겠다.\n만일 필요하다면 필요한 부분을 따로 포스팅하도록 하겠다.</p>\n<p>주요 설정 부분만 정리하자면 아래와 같다.</p>\n<p><strong>worker_processes</strong> : 별도의 프로세스로 구동되어 실제 처리를 하는 프로세스의 갯수. cpu의 core 갯수를 확인한 후 이 숫자대로 주는게 좋다.</p>\n<p><strong>worker_connections</strong> : 워커 프로세스당 동시에 처리할 수 있는 연결 갯수. 기본 값 768</p>\n<p><strong>max_clients</strong>= <strong>worker_processes</strong> * <strong>worker_connections</strong></p>\n<p>기본 설정예시는\n<a href=\"https://www.nginx.com/resources/wiki/start/topics/examples/full/#nginx-conf\">Nginx Full Example Configuration</a>을 참고할 수 있다.</p>\n<p>필자는 이런식으로 사용하고 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\"># For more information on configuration, see:\n#   * Official English Documentation: http://nginx.org/en/docs/\n#   * Official Russian Documentation: http://nginx.org/ru/docs/\n\nuser  nginx;\nworker_processes  4;\nerror_log  /var/log/nginx/error.log;  \npid        /var/run/nginx.pid;\n \nevents {\n    worker_connections  2048;\n}\n \nhttp {\n    include       /etc/nginx/mime.types;\n    default_type  application/octet-stream;\n    log_format  main  &#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;\n                      &#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;\n                      &#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;;\n  access_log  /var/log/nginx/access.log  main;\n    sendfile        on;\n    #tcp_nopush     on;\n    #keepalive_timeout  0;\n    keepalive_timeout  65;\n    server_tokens off;\n    gzip  on;\n    gzip_disable &quot;msie6&quot;;\n    ##\n    # SSL Settings\n    ##\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2; # Dropping SSLv3, ref: POODLE\n    ssl_prefer_server_ciphers on;\n    # Virtual Host Configs\n    include /etc/nginx/conf.d/*.conf;\n    include /etc/nginx/sites-enabled/*;\n}</code></pre></div>\n<p>만약, <a href=\"http://www.aaa.com%EA%B3%BC\">www.aaa.com과</a> <a href=\"http://www.bbb.com%EC%9D%B4%EB%9D%BC%EB%8A%94\">www.bbb.com이라는</a> 두 개의 도메인을 한 서버에서 동작하기 위해서는 아래와 같이 한다.</p>\n<p>필자는 3가지의 파일을 만들었는데</p>\n<ol>\n<li>default (tomcat upstream 파일)</li>\n<li><a href=\"http://www.aaa.com\">www.aaa.com</a> (<a href=\"http://www.aaa.com\">www.aaa.com</a> 가상호스트 설정 파일)</li>\n<li><a href=\"http://www.bbb.com\">www.bbb.com</a> (<a href=\"http://www.bbb.com\">www.bbb.com</a> 가상호스트 설정 파일)</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">    [root@AzureCentOS nginx]# cd sites-enabled/\n    [root@AzureCentOS sites-enabled]# vi default\n    \n    # default 파일\n    upstream tomcat {\n     server  127.0.0.1:8080  fail_timeout=0;\n    }\n\n    [root@AzureCentOS sites-enabled]# vi www.aaa.com \n    #www.aaa.com 설정파일\n          location / {\n                  proxy_redirect off;\n                  proxy_pass_header Server;\n \n                  proxy_set_header Host $http_host;\n                  proxy_set_header X-Forwarded-Proto $scheme;\n                  proxy_set_header X-Forwarded-Port $server_port;\n                  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n                  proxy_set_header X-Real-IP $remote_addr;\n                  proxy_set_header X-Scheme $scheme;\n                  proxy_pass http://tomcat;\n                  charset utf-8;\n          }\n    }\n\n    [root@AzureCentOS sites-enabled]# vi www.bbb.com\n    #www.bbb.com 설정파일\n         location / {\n                  proxy_redirect off;\n                  proxy_pass_header Server;\n \n                  proxy_set_header Host $http_host;\n                  proxy_set_header X-Forwarded-Proto $scheme;\n                  proxy_set_header X-Forwarded-Port $server_port;\n                  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n                  proxy_set_header X-Real-IP $remote_addr;\n                  proxy_set_header X-Scheme $scheme;\n                  proxy_pass http://tomcat;\n                  charset utf-8;\n          }\n    }</code></pre></div>\n<p>이런식으로 설정 한 후에 tomcat의 server.xml 파일을 수정한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">[root@AzureCentOS nginx]# cd /opt/tomcat/\n[root@AzureCentOS tomcat]# vi conf/server.xml\n&lt;Connector port=&quot;8080&quot; protocol=&quot;HTTP/1.1&quot;\n               connectionTimeout=&quot;20000&quot;\n               URIEncoding=&quot;UTF-8&quot;\n               address=&quot;127.0.0.1&quot; (기존 server.xml에서 추가)\n               redirectPort=&quot;8443&quot; /&gt;\n\n...\n    #호스트 설정\n    &lt;Host name=&quot;www.aaa.com&quot; appBase=&quot;/var/www/aaa&quot; autoDeploy=&quot;true&quot;  xmlValidation=&quot;false&quot; xmlNamespaceAware=&quot;false&quot;&gt;\n              &lt;Context path=&quot;/&quot; docBase=&quot;&quot; reloadable=&quot;true&quot; /&gt;\n      &lt;/Host&gt;\n      &lt;Host name=&quot;www.bbb.com&quot; appBase=&quot;/var/www/bbb&quot; autoDeploy=&quot;true&quot;  xmlValidation=&quot;false&quot; xmlNamespaceAware=&quot;false&quot;&gt;\n              &lt;Context path=&quot;/&quot; docBase=&quot;&quot; reloadable=&quot;true&quot; /&gt;\n      &lt;/Host&gt;\n  &lt;/Engine&gt;\n  &lt;/Service&gt;\n&lt;/Server&gt; </code></pre></div>\n<p>이런식으로 설정하는 것이 가상 호스트이다.\n이번에는 server.xml의 호스팅을 이용하여 멀티도메인을 적용했지만, 차후에 무중단 배포를 구현하는 와중에 따로 또 톰캣과 Nginx를 뜯어 고칠 것이니 참고만하자.</p>\n<hr>\n<h3 id=\"step-22---nginx--apache-tomcat-리버스프록시설정\" style=\"position:relative;\"><a href=\"#step-22---nginx--apache-tomcat-%EB%A6%AC%EB%B2%84%EC%8A%A4%ED%94%84%EB%A1%9D%EC%8B%9C%EC%84%A4%EC%A0%95\" aria-label=\"step 22   nginx  apache tomcat 리버스프록시설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 2.2 - Nginx &#x26; Apache Tomcat 리버스프록시설정</h3>\n<p>이번에는 아주 간단한 리버스프록시를 구현해보려한다.</p>\n<p>Nginx는 css, html, js같은 파일만 처리하고, jsp처리는 tomcat에 맡기는 식으로 리버스프록시를 설정하려고 한다.</p>\n<p>즉, 정적콘텐츠는 Nginx가 처리하고, 동적콘텐츠는 Tomcat이 처리하는 부분이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">[root@AzureCentOS conf.d]# cd /etc/nginx/conf.d/\n[root@AzureCentOS conf.d]# vi tomcat.conf\nupstream tomcat {\n    ip_hash;\n    server 127.0.0.1:8080;\n}\n\nserver {\n    listen 80;\n    server_name www.server.com server.com;\n    access_log /var/log/nginx/test1.log;\n\nlocation / {\n        root /usr/share/nginx/html;\n        index index.html index.htm index.jsp;\n    }\n\n    location ~ \\.(css|js|jpg|jpeg|gif|htm|html|swf)$ {\n        root /usr/share/nginx/html;\n        index index.html index.htm;\n    }\n\n    location ~ \\.(jsp|do)$ {\n    index index.jsp;\n        proxy_pass http://tomcat;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header X-NginX-Proxy true;\n        proxy_set_header Host $http_host;\n    \n    proxy_redirect off;\n    charset utf-8;\n    }\n\n    error_page 500 502 503 504 /50x.html;\n    location = /50x.html {\n        root /usr/share/nginx/html;\n    }\n}</code></pre></div>\n<p>설정파일을 설명하자면</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">location ~ \\.(css|js|jpg|jpeg|gif|htm|html|swf)$ {\n        root /usr/share/nginx/html;\n        index index.html index.htm;\n    }</code></pre></div>\n<p>위의 부분은 css, js, html등 기타 명시된 확장자의 경우 /usr/share/nginx/html에서 불러오겠다는 뜻이 된다.\n따라서 위의 확장자명에 해당하는 파일을 tomcat의 ROOT에 둘 경우에는 무시가 된다.\n즉, Tomcat은 온전히 <em>.do에 해당하는 액션이나 jsp파일을 처리하기만 한다.</em></p>\n<p>그러한 설정부분을 보자면</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">location ~ \\.(jsp|do)$ {\n    index index.jsp;\n        proxy_pass http://tomcat;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header X-NginX-Proxy true;\n        proxy_set_header Host $http_host;\n    \n    proxy_redirect off;\n    charset utf-8;\n    }</code></pre></div>\n<p>위의 코드를 통하여 해당 질의를 수행한다고 볼 수가 있다.\n이렇게 설정된 리버스프록시는 톰캣은 동적인 처리를 맡고, Nginx는 정적 처리를 맡음으로서 부하 분산을 할 수 있다는 장점이 있다!</p>\n<p>다음장에서는 아래와 같은 멀티도메인 리버스프록시 도식과 같은 서버를 구축해보는 것을 무중단 배포 구현을 통해서 해보도록 하겠다.\n<img src=\"../assets/images/D6A49F05-D5B6-4978-8CA9-590EC0EEEC83.png\" alt=\"mulit-domain-reverse-proxy\"></p>\n<hr>\n<h1 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>REFERENCE</h1>\n<ol>\n<li><a href=\"https://conory.com/blog/42596\">Yum 저장소 추가하기</a></li>\n<li><a href=\"https://www.lesstif.com/pages/viewpage.action?pageId=6979743\">RHEL/CentOS 5,6,7 에 EPEL 과 Remi/WebTatic Repository 설치하기</a></li>\n<li><a href=\"https://itrend.site/7/nginx%EC%97%90%EC%84%9C-%EB%A9%80%ED%8B%B0%EC%82%AC%EC%9D%B4%ED%8A%B8-%EC%9A%B4%EC%98%81%ED%95%98%EA%B8%B0-%EA%B0%80%EC%83%81%ED%98%B8%EC%8A%A4%ED%8A%B8virtual-host-%EC%84%A4%EC%A0%95%EB%B2%95/\">NGINX에서 멀티사이트 운영하기 – 가상호스트(Virtual Host) 설정법</a></li>\n<li><a href=\"http://webdir.tistory.com/241\">우분투 NGINX(엔진엑스) 가상호스트 설정</a></li>\n<li><a href=\"http://sungbine.github.io/tech/post/2015/02/15/tomcat%EA%B3%BC%20apache%EC%9D%98%20%EC%97%B0%EB%8F%99.html\">WAS와 웹서버의 차이 – 톰캣과 아파치를 구별하지 못하는 사람을 위해</a></li>\n<li><a href=\"http://akal.co.kr/?p=1173\">nginX에서 reverse proxy(리버스 프록시) 사용하기</a></li>\n</ol>\n<div class=\"footnotes\">\n<hr>\n<ol>\n<li id=\"fn-1\"><del><a href=\"https://fedoraproject.org/wiki/EPEL\">https://fedoraproject.org/wiki/EPEL</a></del><a href=\"#fnref-1\" class=\"footnote-backref\">↩</a></li>\n<li id=\"fn-2\"><del><a href=\"https://webtatic.com/tags/nginx/\">https://webtatic.com/tags/nginx/</a></del><a href=\"#fnref-2\" class=\"footnote-backref\">↩</a></li>\n<li id=\"fn-3\"><del><a href=\"https://webtatic.com/packages/nginx110/\">https://webtatic.com/packages/nginx110/</a></del><a href=\"#fnref-3\" class=\"footnote-backref\">↩</a></li>\n</ol>\n</div>","frontmatter":{"date":"August 05, 2018","title":"리눅스(CentOS7)에서 자바 개발환경 구축하기 - Nginx와 Tomcat연동","categories":"인프라","author":"개발한입","emoji":"🧢"},"fields":{"slug":"/connect-nginx-with-tomcat/"}},"site":{"siteMetadata":{"siteUrl":"https://brewagebear.github.io","comments":{"utterances":{"repo":"brewagebear/blog-comments"}}}}},"pageContext":{"slug":"/install-tomcat-on-centos/","nextSlug":"/install-jdk-on-centos/","prevSlug":"/connect-nginx-with-tomcat/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}