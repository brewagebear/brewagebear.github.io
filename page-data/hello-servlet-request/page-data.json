{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/hello-servlet-request/",
    "result": {"data":{"cur":{"id":"636a189c-46f9-5ff6-b3a9-cd3a500e4627","html":"<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#step-11-requestdispatcher-%ED%81%B4%EB%9E%98%EC%8A%A4\">STEP 1.1 RequestDispatcher 클래스</a></p>\n<ul>\n<li>\n<p><a href=\"#step-112-httpservletresponse-%ED%81%B4%EB%9E%98%EC%8A%A4\">STEP 1.1.2 HttpServletResponse 클래스</a></p>\n<ul>\n<li><a href=\"#step-1111-httpservletresponse-%EC%98%88%EC%A0%9C-%EC%86%8C%EC%8A%A4\">STEP 1.1.1.1 HttpServletResponse 예제 소스</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#step-112-requestdispatcher-%ED%81%B4%EB%9E%98%EC%8A%A4\">STEP 1.1.2 RequestDispatcher 클래스</a></p>\n<ul>\n<li><a href=\"#step-1121-requestdispatcher-%EC%98%88%EC%A0%9C-%EC%86%8C%EC%8A%A4\">STEP 1.1.2.1 RequestDispatcher 예제 소스</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>\n<ul>\n<li>STEP 1. 포워딩(Forwading)이란?\n<ul>\n<li>STEP 1.1 HttpServletRequest 클래스\n<ul>\n<li>STEP 1.1.1 HttpServletResponse 클래스\n<ul>\n<li>STEP 1.1.1.1 HttpServletResponse 예제 소스</li>\n</ul>\n</li>\n<li>STEP 1.1.2 RequestDispatcher 클래스\n<ul>\n<li>STEP 1.1.2.1 RequestDispatcher 예제 소스</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"개요\" style=\"position:relative;\"><a href=\"#%EA%B0%9C%EC%9A%94\" aria-label=\"개요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>개요</h1>\n<p>이번에는 서블릿 WebApplication에서 사용하는 포워딩 기법을 알아보기 위해서, 정리하려고 글을 남겨본다.\n잡설이지만, 원래는 포스팅을 올릴 때 한땀 한땀 쓰려고 노력하고 있는데 요즘에 너무 몰아쓰면서 전반적인 글의 퀄리티가 떨어지는 것을 좀 느끼고 있다.</p>\n<p>(사실 이것도 스터디때문에…)</p>\n<p>앞으로는 미리미리 공부해서 마스터해놓고 좀 더 퀄리티있는 글을 쓰도록 노력해봐야겠다.</p>\n<p>일단, 들어가기전에 간략하게 <code class=\"language-text\">RequestDispathcer</code>와 <code class=\"language-text\">HttpServletResponse</code>에 대해서 설명하고자 한다.\n서블릿 또는 JSP에서 요청을 받은 후 다른 컴포넌트로 요청을 위임할 수가 있다.\n이러한 위임 방법에는 2가지가 있는데 그것이 바로 <code class=\"language-text\">RequestDispathcer</code>와 <code class=\"language-text\">HttpServletResponse</code>이다.</p>\n<h2 id=\"step-11-requestdispatcher-클래스\" style=\"position:relative;\"><a href=\"#step-11-requestdispatcher-%ED%81%B4%EB%9E%98%EC%8A%A4\" aria-label=\"step 11 requestdispatcher 클래스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 1.1 RequestDispatcher 클래스</h2>\n<p>일단, 이 클래스를 아는 사람들이라면 의아할 부분이 있을 것이다. 왜냐하면, <code class=\"language-text\">HttpServletRequest</code> 객체는 클라이언트로부터 실행 요청이 들어올 때마다 서블릿의 <code class=\"language-text\">service()</code> 메소드가 실행되기 전에 자동으로 생성되고, <code class=\"language-text\">service()</code> 메소드가 종료되면 자동으로 소멸하는 객체로 알고 있기 때문이다.</p>\n<p>즉, <code class=\"language-text\">HttpServletRequest</code> 객체에 여러 페이지에서 공유할 정보를 저장한다 하더라도 <code class=\"language-text\">service()</code> 메소드가 종료되는 시점에 <code class=\"language-text\">HttpServletRequest</code> 객체도 소멸하는데 그 곳에 정보를 저장하는게 의미가 있을까??</p>\n<p><code class=\"language-text\">HttpServletRequest</code>는 하나의 서블릿 페이지가 실행되는 동안에만 메모리에 존재하는 객체이기 때문에 이를 통해 정보를 유지하는 것은 무의미하다고 생각할 것이다.</p>\n<p>그런데 클라이언트가 서블릿 실행 요청을 했을 때 하나의 페이지만 실행되는 것이 아니라 여러 페이지가 실행될 수 있는 상황이 발생할 수가 있다.</p>\n<p>위의 그림처럼 클라이언트 요청 한 번으로 두 개의 페이지가 실행된다면, 어떻게 될까?</p>\n<p>보다 쉽게 설명하기 위해 가정을 해보겠다. 클라이언트가 A 페이지를 요청하면, A 페이지가 실행되면서 B 페이지로 이동하여, B 페이지도 실행된다고 가정하자. 그러면 위의 말이 이해가 되지않겠는가??</p>\n<blockquote>\n<p>즉, 한 번의 요청으로 여러 페이지가 실행된 것이다.</p>\n</blockquote>\n<p><strong><code class=\"language-text\">HttpServletRequest</code>를 통해 정보를 유지하는 예는 이처럼 한 번의 요청으로 실행된 페이지 간에 데이터를 공유하고자 할 때 사용하는 방법이다.</strong></p>\n<p>한 번의 요청으로 여러 개의 페이지들이 실행되었을 때는 처음 요청된 페이지에서 생성된 <code class=\"language-text\">HttpServletRequest</code>가 이동되는 페이지에서도 그대로 전달하여 사용할 수 있도록 해야된다.</p>\n<p>그래서 페이지를 이동하기 전에 <code class=\"language-text\">HttpServletRequest</code>에 정보를 등록한 후 이동하면, 이동된 페이지에서는 전달받은 <code class=\"language-text\">HttpServletRequest</code>에 저장된 정보를 추출하여 사용할 수 있다.</p>\n<p>이런 방식으로 <strong>페이지 간의 정보 공유가 이루어지는 것이다.</strong></p>\n<p>다시 이 그림을 보자!</p>\n<p>클라이언트가 A 페이지를 요청하고, A 페이지에서 B 페이지로 이동했을 때는 A와 B 페이지가 동일한 <code class=\"language-text\">HttpServletRequest</code>과 <code class=\"language-text\">HttpServletResponse</code> 객체를 사용하지만, 클라이언트가 B 페이지를 직접 실행 요청했을 때는 새로운 객체가 생성되므로, <strong>A 페이지와는 상관없는 객체를 사용하게 된다.</strong>\n그래서 <strong>이때는 서로 다른 <code class=\"language-text\">HttpServletRequest</code>를 사용하기 떄문에 <code class=\"language-text\">HttpServletRequest</code> 객체를 통해 정보를 공유할 수 있다.</strong></p>\n<p><code class=\"language-text\">HttpServletRequest</code>를 통한 정보 공유는 동일한 요청에서 실행된 페이지끼리만 이루어지며, 이떄는 클라이언트가 요청한 페이지에서 다른 페이지로 이동하기 때문에, 클라이언트가 요청한 페이지가 실행되다가 다른 페이지로 이동하는 것을 <strong>요청 재지정</strong> 이라 한다.</p>\n<p><strong>요청 재지정</strong> 기능을 제공하는 객체는 다음 2가지가 존재한다.</p>\n<ol>\n<li><strong>HttpServletResponse</strong></li>\n<li><strong>RequestDispatcher</strong></li>\n</ol>\n<h3 id=\"step-112-httpservletresponse-클래스\" style=\"position:relative;\"><a href=\"#step-112-httpservletresponse-%ED%81%B4%EB%9E%98%EC%8A%A4\" aria-label=\"step 112 httpservletresponse 클래스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 1.1.2 HttpServletResponse 클래스</h3>\n<p><code class=\"language-text\">HttpServletResponse</code>에서 제공하는 메소드를 사용하여, 요청을 재지정할 때는 요청을 재지정하는 자원이 현재 자원과 동일한 웹 어플리케이션에 속하지 않아도 상관없고, 동일한 서버에 존재하지 않아도 상관이 없다.</p>\n<p>즉, 다른 웹 어플리케이션의 파일로 요청 재지정이 가능하고, 다른 웹서버의 자원으로도 가능하다.</p>\n<p><code class=\"language-text\">HttpServletResponse</code>에서 제공하는 요청 재지정 메소드는 아래와 같다.</p>\n<table>\n<thead>\n<tr>\n<th>접근자&#x26;반환형</th>\n<th>메소드</th>\n<th>기능</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>public void</td>\n<td>sendRedirect(String location)</td>\n<td>location에 설정된 자원으로 요청을 재지정</td>\n</tr>\n<tr>\n<td>public String</td>\n<td>encodeRedirectURL(String url)</td>\n<td>url에 설정된 URL 문자열에 세션 ID 정보를 추가하여, 요청 재지정</td>\n</tr>\n</tbody>\n</table>\n<p>이제 예제 소스를 보면서 이해 해보자!</p>\n<h4 id=\"step-1111-httpservletresponse-예제-소스\" style=\"position:relative;\"><a href=\"#step-1111-httpservletresponse-%EC%98%88%EC%A0%9C-%EC%86%8C%EC%8A%A4\" aria-label=\"step 1111 httpservletresponse 예제 소스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 1.1.1.1 HttpServletResponse 예제 소스</h4>\n<p>지금 내가 짜려고 하는 예제는 라디오 버튼을 통해서 검색 엔진을 선택한 후 제출을 하게되면, 해당 사이트로 이동하는 예제를 만들려고 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>utf-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>포털 사이트<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">action</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>potalSite<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>radio<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>site<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>naver<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>네이버<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>radio<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>site<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>daum<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>다음<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>radio<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>site<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>bing<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>빙<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>radio<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>site<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>google<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>구글<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>제출<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><code class=\"language-text\">form:method</code> 형식을 지정안했으니 기본적으로 GET 방식으로 통신을 할 것이다.\n이 변수를 받아서 처리하는 서블릿을 작성해보겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@WebServlet</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/portalSite\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SendRedirectTestServlet</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">HttpServlet</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">doGet</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> req<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> resp<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ServletException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\n\n        <span class=\"token class-name\">String</span> param <span class=\"token operator\">=</span> req<span class=\"token punctuation\">.</span><span class=\"token function\">getParameter</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"site\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>param<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"naver\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            resp<span class=\"token punctuation\">.</span><span class=\"token function\">sendRedirect</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"http://naver.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>param<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"daum\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            resp<span class=\"token punctuation\">.</span><span class=\"token function\">sendRedirect</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"http://daum.net\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>param<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"bing\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            resp<span class=\"token punctuation\">.</span><span class=\"token function\">sendRedirect</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"http://bing.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>param<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"google\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            resp<span class=\"token punctuation\">.</span><span class=\"token function\">sendRedirect</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"http://google.co.kr\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">param</code>은 라디오에서 전달받은 <code class=\"language-text\">value</code>의 값을 저장하고, <code class=\"language-text\">param</code>이 저장한 값에 따라 <code class=\"language-text\">HttpServlet</code>의 <code class=\"language-text\">sendRedirect()</code>호출 하여 기존에 서블릿이 동작했던 서버가 아닌 외부 url로 리다이렉션 처리를 하는 것을 확인할 수가 있다.</p>\n<p>다음으로는 <code class=\"language-text\">RequestDispatcher</code>를 활용하여 요청 재지정을 하는 방법에 대해서 알아보겠다.</p>\n<h3 id=\"step-112-requestdispatcher-클래스\" style=\"position:relative;\"><a href=\"#step-112-requestdispatcher-%ED%81%B4%EB%9E%98%EC%8A%A4\" aria-label=\"step 112 requestdispatcher 클래스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 1.1.2 RequestDispatcher 클래스</h3>\n<p><code class=\"language-text\">RequestDispatcher</code>에서 제공하는 메소드를 사용하여, 요청을 재지정할 때는 <strong>요청을 재지정하는 자원이 반드시 현재 자원과 동일한 웹 어플리케이션에 있어야만 한다.</strong></p>\n<p><code class=\"language-text\">RequestDispatcher</code>는 다음과 같은 메소드들을 제공한다.</p>\n<table>\n<thead>\n<tr>\n<th>접근자&#x26;반환형</th>\n<th>메소드</th>\n<th>기능</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>public void</td>\n<td>forward(ServletRequest req, ServletResponse resp)</td>\n<td>요청을 다른 자원으로 넘긴다.</td>\n</tr>\n<tr>\n<td>public void</td>\n<td>include(ServletRequest req, ServletResponse resp)</td>\n<td>다른 자원의 처리 결과를 현재 페이지에 표시한다.</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">RequestDispatcher</code> 객체를 생성할 때는 아래와 같은 팩토리 메소드를 사용한다.</p>\n<ol>\n<li>\n<p>ServletContext 객체에서 제공하는 메소드</p>\n<ul>\n<li><code class=\"language-text\">RequestDispatcher getNamedDispatcher(String name)</code></li>\n<li><code class=\"language-text\">RequestDispatcher getRequestDispatcher(String path)</code></li>\n</ul>\n</li>\n<li>\n<p>ServletRequest 객체에서 제공하는 메소드</p>\n<ul>\n<li><code class=\"language-text\">RequestDispatcher getRequestDispatcher(String path)</code></li>\n</ul>\n</li>\n</ol>\n<p>여기서 path 형식과 name 등 어떤 것으로 지정하는가만 다를 뿐 대상을 지정하면서 RequestDispatcher 객체를 추출하는 기능은 같다. 주의할 점은 <code class=\"language-text\">ServletRequest</code> 객체의 <code class=\"language-text\">getRequestDispatcher()</code>로 생성할 때는 <strong>절대/상대경로 상관없이 생성</strong>이 가능하나, <code class=\"language-text\">ServletContext</code> 객체의 <code class=\"language-text\">getRequestDispatcher()</code>는 <strong>절대 경로만 가능</strong>하다.</p>\n<p><code class=\"language-text\">RequestDispatcher</code> 객체의 <code class=\"language-text\">forward()</code>메소드는 클라이언트의 요청으로 생성되는 <code class=\"language-text\">HttpServletRequest</code>와 <code class=\"language-text\">HttpServletResponse</code> 객체를 다른 자원에 전달하고, 수행 제어를 넘겨서 다른 자원의 수행 결과를 클라이언트에 응답하도록 하는 기능의 메소드이다.</p>\n<p>이게 무슨소리인지 잘모르겠다면 아래의 그림을 보자.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 449px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB9klEQVQoz5WSXUhTARTHf7c5LKjVbE2JSoit5ly6O1YLCZWVYGDQx8Qo+qDSsoeKHtJsd2pfMyxZ6aCkUgxCrAh6qLceUgqCHoTAXnoqKfVetxoUPciJGxY+tKA/HM7hHM7//DnnYGgB0r0HkCcn6dy6AsCuwD5YbBl91IOMPubbyADfXz9Ab/GhR/2kEtvJCkNTh4z20JDeFnpoaOr9Fw0eD5D7dIfNmUruvpHqrr2X6o7cTSfrBvVoqcuI+jEulClZCXUtIOnuiGSStaJH/fLsoLvazEfLHWWTF8vl653D8qXvqBgdW+Tz2ZKwdAYZqHPlAMpfDFIxtf1Dsz/+srHotqGprXJ1g3PkmBdJbF403eSOfbxUlZzo2ds101Z8RforCo6HlvFPTJzzMxMPIXIKkXFkLPKnNrxnKSJihjagEHBbFNYDpYAP8AMq4Jn1q3h+ZK3V7Ci057rsCyyV83OUAquCtc6l8CpW85twIbAc8FoUimebvUCROQRYA5QA+XPFmgo8h4IOcxf5ZzbanD8S1fXvWsPnx2LhmNzcdkIGN+XVB/P4L4hcQ6IruVy5pGSyo2om01cvmf5Gmb6+Uz41+yokrtK7a3X2o8zBr+Rwg0d5e7oUSYQdU02eN6mumvH0rf3v9ZZ1U4YWCJh/aGjqvGyKfgLEN7ZFRsCA4QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"RequestDispatcher-forwarding\"\n        title=\"RequestDispatcher-forwarding\"\n        src=\"/static/2e5326274312367a9d0b19f459f6e2ae/053a9/fowarding.png\"\n        srcset=\"/static/2e5326274312367a9d0b19f459f6e2ae/e9ff0/fowarding.png 180w,\n/static/2e5326274312367a9d0b19f459f6e2ae/f21e7/fowarding.png 360w,\n/static/2e5326274312367a9d0b19f459f6e2ae/053a9/fowarding.png 449w\"\n        sizes=\"(max-width: 449px) 100vw, 449px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>그러면 <code class=\"language-text\">include()</code>메소드는 어떠한 역할을 할까?</p>\n<p><code class=\"language-text\">include()</code>는 클라이언트 요청으로 생성되는 <code class=\"language-text\">HttpServletRequest</code>와 <code class=\"language-text\">HttpServletResponse</code> 객체를 다른 자원에 전달하고 수행한 다음, 그 결과를 클라이언트에서 요청한 서블릿 내에 포함하여 클라이언트로 응답하는 기능의 메소드이다.</p>\n<p>이것 또한 도식으로 표현해봤다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 465px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABtklEQVQoz5WRzUuUURjFf+91YDaZICZWQ4KZjgPCjJNMfoCWkSJZgx8g+EEGQQwFQZaTjqNvECQOhRpMVGO2atEmchEFQdAuov6AaBNhgu/1ndFo2RN3mEVIBh04i+dwn3PPPRc9HZox3IgH7GwydOPluRofEI1FysK/MkOXnPnuCXehN+7e7Yl9DaO+94G+2cyucBJBcRd6JXtvQDYSQbkfPdQDqAdnfQNO6rRsr1yU3MMx0XMn5UMbXpmDkYZ91h8W1k7Dx3q2cVnbTStuMpR+OlhVC5y60lrRKbY//e1O/+p66szqz6naJXM+7Cvmn3ASQTZvd/BjMcqX8XpEBI/iCBCAonLggEkMqgQoL9DUUgbsBw4WtAqg1BgqbUfU1q1m9Xykushc4vVYewHz9BNmWWTZyCZ5G9AEHAdagZbCHAHaAT/OdCjPT5cD+cQvRmus97EA8rqrWDLR4Y9XGyc/2x3XZalzECqp3MP/ITsTVttTdaxd80f0fJdsPYlJ7tF52Ux1y7tqvDIO/fWlqvAZO/nXTi3Tq04ePezE615l00Nv3MW+t86E/1kuc8Gj7WP53nfDbyPXmWO2v7BZAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"RequestDispatcher-include\"\n        title=\"RequestDispatcher-include\"\n        src=\"/static/4da4a3aeff0c484388eb0c54c2c4ae59/9ff85/forwarding2.png\"\n        srcset=\"/static/4da4a3aeff0c484388eb0c54c2c4ae59/e9ff0/forwarding2.png 180w,\n/static/4da4a3aeff0c484388eb0c54c2c4ae59/f21e7/forwarding2.png 360w,\n/static/4da4a3aeff0c484388eb0c54c2c4ae59/9ff85/forwarding2.png 465w\"\n        sizes=\"(max-width: 465px) 100vw, 465px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>이제 소스를 한번 봐보자!</p>\n<h4 id=\"step-1121-requestdispatcher-예제-소스\" style=\"position:relative;\"><a href=\"#step-1121-requestdispatcher-%EC%98%88%EC%A0%9C-%EC%86%8C%EC%8A%A4\" aria-label=\"step 1121 requestdispatcher 예제 소스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 1.1.2.1 RequestDispatcher 예제 소스</h4>\n<p>샘플 소스코드를 하나 생성했으며, 클라이언트에서 dispatcher1을 호출하면 처리 후에, dispatcher2로 전달하는 로직을 짰다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@WebServlet</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/dispatcher1\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DispatcherTest1Servlet</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">HttpServlet</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">doGet</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> req<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> resp<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ServletException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\n        \n        resp<span class=\"token punctuation\">.</span><span class=\"token function\">setContentType</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text/html;charset=UTF-8\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">PrintWriter</span> out <span class=\"token operator\">=</span> resp<span class=\"token punctuation\">.</span><span class=\"token function\">getWriter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        out<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;h3> Dispatcher Test1의 수행결과 &lt;/h3>\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token class-name\">ServletContext</span> sc <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getServletContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">RequestDispatcher</span> rd <span class=\"token operator\">=</span> sc<span class=\"token punctuation\">.</span><span class=\"token function\">getRequestDispatcher</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/dispatcher2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        rd<span class=\"token punctuation\">.</span><span class=\"token function\">forward</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> resp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        out<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이제 dispatcher2의 응답을 수행할 서블릿을 작성할 차례이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DispatcherTest2Servlet</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">HttpServlet</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">doGet</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> req<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> resp<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ServletException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\n        \n        resp<span class=\"token punctuation\">.</span><span class=\"token function\">setContentType</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text/html;charset=UTF-8\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">PrintWriter</span> out <span class=\"token operator\">=</span> resp<span class=\"token punctuation\">.</span><span class=\"token function\">getWriter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        out<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;h3> Dispatcher Test2의 수행결과 &lt;/h3>\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        out<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>돌려보면 결과를 알겠지만, Dispatcher Test2의 수행결과가 적힌 페이지가 출력되는 것을 알 수가 있다.</p>\n<p>위의 dispatcher1 소스를 아래와 같이 바꾸면 어떻게 될까?</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span>중략<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n        <span class=\"token class-name\">ServletContext</span> sc <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getServletContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">RequestDispatcher</span> rd <span class=\"token operator\">=</span> sc<span class=\"token punctuation\">.</span><span class=\"token function\">getRequestDispatcher</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/dispatcher2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        rd<span class=\"token punctuation\">.</span><span class=\"token function\">include</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> resp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span>중략<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<p>그러면, Dispatcher Test1의 수행결과와 Dispatcher Test2의 수행결과가 동시에 표시되는 페이지가 나옴을 확인할 수가 있다.</p>","excerpt":"STEP 1.1 RequestDispatcher 클래스 STEP 1.1.2 HttpServletResponse 클래스 STEP 1.1.1.1 HttpServletResponse 예제 소스 STEP 1.1.2 RequestDispatcher 클래스 STEP 1.1.2.1 RequestDispatcher 예제 소스 STEP 1. 포워딩(Forwading)이란? STEP 1.1 HttpServletRequest 클래스 STEP 1.1.1 HttpServletResponse 클래스 STEP 1.1.1.1 HttpServletResponse 예제 소스 STEP 1.1.2 RequestDispatcher 클래스 STEP 1.1.2.1 RequestDispatcher 예제 소스 개요 이번에는 서블릿 WebApplication에서 사용하는 포워딩 기법을 알아보기 위해서, 정리하려고 글을 남겨본다.\n잡설이지만, 원래는 포스팅을 올릴 때 한땀 한땀 쓰려고 노력하고 있는데 요즘에 너무 몰아쓰면서 전반…","frontmatter":{"date":"July 10, 2019","title":"Java Servlet Fowarding - 서블릿 포워딩을 어떻게 구현할까?","categories":"개발","author":"개발한입","emoji":"💻"},"fields":{"slug":"/hello-servlet-request/"}},"next":{"id":"343cceaf-52c2-583c-b523-aba9a0c29c4a","html":"<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#step-11-%EB%94%94%EB%A0%89%ED%86%A0%EB%A6%AC-%ED%8C%A8%ED%84%B4\">STEP 1.1 디렉토리 패턴</a></li>\n<li><a href=\"#step-12-%ED%99%95%EC%9E%A5%EC%9E%90-%ED%8C%A8%ED%84%B4\">STEP 1.2 확장자 패턴</a></li>\n<li><a href=\"#step-21-frontcontroller-pattern\">STEP 2.1 FrontController-pattern</a></li>\n<li><a href=\"#step-22-frontcontroller-pattern-%EC%98%88%EC%A0%9C-%EC%86%8C%EC%8A%A4\">STEP 2.2 FrontController-pattern 예제 소스</a></li>\n<li><a href=\"#step-31-command-pattern\">STEP 3.1 Command-pattern</a></li>\n<li><a href=\"#step-32-command-pattern-%EC%98%88%EC%A0%9C-%EC%86%8C%EC%8A%A4\">STEP 3.2 Command-pattern 예제 소스</a></li>\n</ul>\n</div>\n<ul>\n<li>STEP 1. URI-pattern\n<ul>\n<li>STEP 1.1 디렉터리 패턴</li>\n<li>STEP 1.2 확장자 패턴</li>\n</ul>\n</li>\n<li>STEP 2. FrontController-pattern\n<ul>\n<li>STEP 2.1 FrontController-pattern이란?</li>\n<li>STEP 2.2 FrontController-pattern 예제 소스</li>\n</ul>\n</li>\n<li>STEP 3. Command-pattern\n<ul>\n<li>STEP 3.1 Command-pattern이란?</li>\n<li>STEP 3.2 Command-pattern 예제 소스</li>\n</ul>\n</li>\n<li>STEP 4. Review</li>\n</ul>\n<h1 id=\"개요\" style=\"position:relative;\"><a href=\"#%EA%B0%9C%EC%9A%94\" aria-label=\"개요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>개요</h1>\n<p>MVC 패턴을 통한 Servlet WebApplication을 만들 때 사용하는 주된 패턴 중에 하나이다.\n앞으로 계속해서 서블릿과 JSP 그리고 스프링에 대해서 포스팅을 하게 될 것인데, 나머지 부분은 양적인 측면으로 정리할게 많아서 먼저 정리를 해본다.</p>\n<p>상당 부분 인프런의 <a href=\"https://www.inflearn.com/course/%EC%8B%A4%EC%A0%84-jsp-%EA%B0%95%EC%A2%8C/lecture/1158\">실전-jsp-강좌</a> 를 참고하였으니, 보다 자세히 보고싶은 사람들은 여기를 보면 될 것 같다.</p>\n<h2 id=\"step-11-디렉토리-패턴\" style=\"position:relative;\"><a href=\"#step-11-%EB%94%94%EB%A0%89%ED%86%A0%EB%A6%AC-%ED%8C%A8%ED%84%B4\" aria-label=\"step 11 디렉토리 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 1.1 디렉토리 패턴</h2>\n<p>아주 단순한 구조의 url 패턴이라고 볼 수가 있다. 디렉토리 형태로 서버의 해당 컴포넌트를 찾아서 실행하는 구조이다.</p>\n<p>예시를 들면, 다음과 같다.</p>\n<blockquote>\n<p><a href=\"http://127.0.0.1/top-ing/hello\">http://127.0.0.1/top-ing/hello</a></p>\n</blockquote>\n<blockquote>\n<p><a href=\"http://127.0.0.1/top-ing/world\">http://127.0.0.1/top-ing/world</a></p>\n</blockquote>\n<p>이렇게 디렉토리 패턴을 사용하여 url을 설계를 하면, hello 디렉토리를 클라이언트가 요청했을 때는 /hello 서블릿이 반환되며, world 디렉토리를 요청했을 경우에는 /world 서블릿이 반환이 된다.</p>\n<h2 id=\"step-12-확장자-패턴\" style=\"position:relative;\"><a href=\"#step-12-%ED%99%95%EC%9E%A5%EC%9E%90-%ED%8C%A8%ED%84%B4\" aria-label=\"step 12 확장자 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 1.2 확장자 패턴</h2>\n<p>확장자 형태로 서버의 해당 컴포넌트를 찾아서 실행하는 구조이다.</p>\n<p>예시를 들면, 다음과 같다.</p>\n<blockquote>\n<p><a href=\"http://127.0.0.1/top-ing/hello.do\">http://127.0.0.1/top-ing/hello.do</a></p>\n</blockquote>\n<blockquote>\n<p><a href=\"http://127.0.0.1/top-ing/world.do\">http://127.0.0.1/top-ing/world.do</a></p>\n</blockquote>\n<p>이런 경우에는 디렉토리 패턴과 다르게 클라이언트가 hello.do를 요청하던 world.do를 요청하던 간에 *.do 서블릿이 모두 받아서 처리한다.</p>\n<p>그렇다면 hello.do를 요청했을 때와 world.do를 요청했을 때와 하는 일이 같은가?\n아니다. 여러개의 응답을 동시에 처리하는 *.do 서블릿에서 클라이언트의 요청에 맞게 요청을 구분을 해준다.</p>\n<h2 id=\"step-21-frontcontroller-pattern\" style=\"position:relative;\"><a href=\"#step-21-frontcontroller-pattern\" aria-label=\"step 21 frontcontroller pattern permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 2.1 FrontController-pattern</h2>\n<p>단순하게 말하자면, <strong>클라이언트의 다양한 요청을 한 곳으로 집중시켜, 개발 및 요지보수에 효율을 극대화하는 패턴이다.</strong></p>\n<p>만약, 다양한 요청마다 서블릿을 하나하나 서블릿을 만든다하면 유지보수 및 개발의 효율이 떨어질 수 밖에 없을 것이다.\n따라서 프론트컨트롤러 패턴은 각각의 분기를 처리해주는 어떠한 컨트롤러를 앞 단에 두어(그래서 FrontController)각 요청에 맞게끔 분기하여 처리해주는 패턴을 말한다.</p>\n<p>소스를 보자!</p>\n<h2 id=\"step-22-frontcontroller-pattern-예제-소스\" style=\"position:relative;\"><a href=\"#step-22-frontcontroller-pattern-%EC%98%88%EC%A0%9C-%EC%86%8C%EC%8A%A4\" aria-label=\"step 22 frontcontroller pattern 예제 소스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 2.2 FrontController-pattern 예제 소스</h2>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">... (중략) ...\n\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>insert.do<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>insert<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hr</span> <span class=\"token punctuation\">/></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://localhost:8080&lt;%=request.getContextPath()%>/update.do<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>update<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hr</span> <span class=\"token punctuation\">/></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://localhost:8080/top-ing/select.do<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>select<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hr</span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>&lt;%=request.getContextPath()%>/delete.do<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>delete<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n\n... (중략) ...</code></pre></div>\n<p>위와 같은 소스가 존재한다고 가정을 해보자.</p>\n<p><code class=\"language-text\">insert, update, select, delete</code> 와 같이 다양한 요청을 요구할 수 있는 JSP 페이지이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// *.do 확장자를 모두 처리하겠다고 명시</span>\n<span class=\"token annotation punctuation\">@WebServlet</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"*.do\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">FrontCon</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">HttpServlet</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">long</span> serialVersionUID <span class=\"token operator\">=</span> <span class=\"token number\">1L</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">FrontCon</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">doGet</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> response<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ServletException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"doGet\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">actionDo</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">doPost</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> response<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ServletException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"doPost\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">actionDo</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">actionDo</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> response<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ServletException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"actionDo\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token comment\">/*\n         * 이 부분은 밑에서 다시 설명하겠지만, 주석으로 설명을 해보겠다. \n         * 1. getRequestURI() 메소드를 통해서 요청된 전체 uri를 가져온다.\n         *      e.g) http://localhost:8080/top-ing/hello.do -> top-ing/hello.do\n         * 2. getContextPath() 메소드를 통해서 프로젝트의 Context Path명을 가져온다.\n         *      e.g) http://localhost:8080/top-ing/hello.do -> top-ing/\n         * 3. substring() 메소드를 통해서, ContextPath를 전체 uri에서 지운다. \n         *      e.g) top-ing/hello -> hello.do\n         * 4. actionDo() 메소드에서는 substring 결과값(command)을 통해서 요청을 분기한다. \n         */</span>\n\t\t<span class=\"token class-name\">String</span> uri <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getRequestURI</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"uri : \"</span> <span class=\"token operator\">+</span> uri<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token class-name\">String</span> conPath <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getContextPath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"conPath : \"</span> <span class=\"token operator\">+</span> conPath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token class-name\">String</span> command <span class=\"token operator\">=</span> uri<span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span>conPath<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"command : \"</span> <span class=\"token operator\">+</span> command<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>command<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/insert.do\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"insert\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"----------------\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>command<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/update.do\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"update\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"----------------\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>command<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/select.do\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"select\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"----------------\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>command<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/delete.do\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"delete\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"----------------\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"step-31-command-pattern\" style=\"position:relative;\"><a href=\"#step-31-command-pattern\" aria-label=\"step 31 command pattern permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 3.1 Command-pattern</h2>\n<p>클라이언트로부터 받은 요청들에 대해서, 서블릿이 작업을 직접 처리 하지 않고, 해당 클래스가 처리하도록 하는 패턴이다.</p>\n<p>무슨 말인지 잘 와닿지않을 수 있기때문에, 위의 소스코드를 인용하여 설명해보겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span>중략<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>command<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/insert.do\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"insert\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"----------------\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>command<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/update.do\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"update\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"----------------\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>command<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/select.do\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"select\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"----------------\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>command<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/delete.do\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"delete\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"----------------\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span>중략<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<p>이 부분이 <code class=\"language-text\">doAction</code>에서 클라이언트의 요청을 분기하는 부분이 될 것이다.\n하지만 만약에 클라이언트가 요청할 수 있는 것들이 수십~수백개가 된다면 어떤일이 발생할까?\n계속해서, <code class=\"language-text\">else if ...</code> 으로 분기를 처리해야될까?</p>\n<p>그래서 나온 방법이 <strong>모든 요청을 직접 처리하지 않고, 다른 서블릿에 처리</strong>를 보내는 것이다.\n더 자세히 말하면 MVC 패턴으로 웹 어플리케이션을 구현할 때, 프론트컨트롤러 패턴을 적용한 서블릿의 요청 개수가 많아질수록 코드가 난잡해지니 각각의 커맨드 클래스로 분산 시키는 방식을 사용한다.</p>\n<p>소스를 보자!</p>\n<h2 id=\"step-32-command-pattern-예제-소스\" style=\"position:relative;\"><a href=\"#step-32-command-pattern-%EC%98%88%EC%A0%9C-%EC%86%8C%EC%8A%A4\" aria-label=\"step 32 command pattern 예제 소스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 3.2 Command-pattern 예제 소스</h2>\n<p>일단, 먼저 가정을 해보자.\nmemberDB의 접근을 위한 memberDAO가 있고, 그것을 사용하는 DTO가 있다고 가정하자.\n여기서 DTO, DAO를 잘 모르겠다면, 자세히 설명된 링크 <sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup>가 있으니 참고하자.</p>\n<p>우리가 위에서 봤던 Front.con 파일에 DB에 등록된 모든 멤버들의 정보들을 볼 수 있는 요청을 추가했다고 가정하자.\n클라이언트는 membersAll.do를 요청했다고 가정한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span>중략<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">actionDo</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> response<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ServletException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token comment\">// TODO Auto-generated method stub</span>\n\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"actionDo\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\n\t\t<span class=\"token class-name\">String</span> uri <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getRequestURI</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token class-name\">String</span> conPath <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getContextPath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token class-name\">String</span> command <span class=\"token operator\">=</span> uri<span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span>conPath<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">//추가된 로직 부분</span>\n\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>command<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/membersAll.do\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\tresponse<span class=\"token punctuation\">.</span><span class=\"token function\">setContentType</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text/html; charset=EUC-KR\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token class-name\">PrintWriter</span> writer <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">getWriter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\twriter<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;html>&lt;head>&lt;/head>&lt;body>\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">/*\n             * membersAll을 처리하는 서비스를 만들어서 사용한다.\n             * 커맨드로 분기한 후에 DAO처리를 여기서 수행하는 것이 아니라\n             * 해당 커맨드 인터페이스인 MembersAllService만 만들어서 사용한다.\n             */</span>\n\t\t\t<span class=\"token class-name\">Service</span> service <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MembersAllService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MemberDto</span><span class=\"token punctuation\">></span></span> dtos <span class=\"token operator\">=</span> service<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\n\t\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> dtos<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token class-name\">MemberDto</span> dto <span class=\"token operator\">=</span> dtos<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token class-name\">String</span> id <span class=\"token operator\">=</span> dto<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token class-name\">String</span> pw <span class=\"token operator\">=</span> dto<span class=\"token punctuation\">.</span><span class=\"token function\">getPw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token class-name\">String</span> name <span class=\"token operator\">=</span> dto<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token class-name\">String</span> eMail <span class=\"token operator\">=</span> dto<span class=\"token punctuation\">.</span><span class=\"token function\">geteMail</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token class-name\">Timestamp</span> rDate <span class=\"token operator\">=</span> dto<span class=\"token punctuation\">.</span><span class=\"token function\">getrDate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token class-name\">String</span> address <span class=\"token operator\">=</span> dto<span class=\"token punctuation\">.</span><span class=\"token function\">getAddress</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\n\t\t\t\twriter<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>id <span class=\"token operator\">+</span> <span class=\"token string\">\", \"</span> <span class=\"token operator\">+</span> pw <span class=\"token operator\">+</span> <span class=\"token string\">\", \"</span> <span class=\"token operator\">+</span> name <span class=\"token operator\">+</span> <span class=\"token string\">\", \"</span> <span class=\"token operator\">+</span> eMail <span class=\"token operator\">+</span> <span class=\"token string\">\", \"</span> <span class=\"token operator\">+</span> rDate<span class=\"token punctuation\">.</span><span class=\"token function\">toLocalDateTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\", \"</span> <span class=\"token operator\">+</span> address <span class=\"token operator\">+</span> <span class=\"token string\">\"&lt;hr />\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t\n\t\t\twriter<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;/body>&lt;/html>\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span>중략<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">//Service.java</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Service</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//단순하게 execute() 메소드만 선언된 인터페이스를 활용하여, 프론트컨트롤러에서 사용하게끔 한다.</span>\n    <span class=\"token comment\">//세부 로직은 Service를 구현하는 구현체에서 처리한다. </span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MemberDto</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token comment\">//MeberAllservice.java </span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MembersAllService</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Service</span> <span class=\"token punctuation\">{</span>\n\t\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">MembersAllService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n\t<span class=\"token annotation punctuation\">@Override</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MemberDto</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> response<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        \n        <span class=\"token comment\">//여기서 DAO를 생성 후에 DAO의 메소드인 membersAll()을 호출한다. </span>\n\t\t<span class=\"token class-name\">MemberDao</span> dao <span class=\"token operator\">=</span> <span class=\"token class-name\">MemberDao</span><span class=\"token punctuation\">.</span><span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> dao<span class=\"token punctuation\">.</span><span class=\"token function\">membersAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>여기서 Service를 구현한 MembersAllService 인터페이스를 볼 수가 있는데 이렇듯, 만약에 다른 요청이 들어와도, URI를 프론트컨트롤러에서 분기처리한 후에 해당 서비스에 맞는 서비스를 생성한 후에, <code class=\"language-text\">service.excute()</code> 처리만 함으로써 다양한 요청 처리를 다른 클래스에 위임할 수가 있다.</p>\n<h1 id=\"step-4-review\" style=\"position:relative;\"><a href=\"#step-4-review\" aria-label=\"step 4 review permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 4. Review</h1>\n<p>전체적으로 정리하고, 이번 포스팅을 마무리 짓도록 하겠다.</p>\n<p>원시적으로, 모든 요청마다 서블릿을 하나하나 생성하는 방법은 다음과 같다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 23.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABHUlEQVQY03WQTUsCURSG52e27he0qoURKRWO2iY37VoWiJaJM5L+gSCK7INwPtXoywSndKxx5j5xr0IrDxzOXdzznud9tfVSh4Nml+2qQ7pqE8UJ135Atu6iGx6Fhk/e9MkaHhf3A2QJIVhWWqosBX0yVZu9mq0+3/W/0OsOuuGSN+ct382FYBjFJEIwHP/SeRvjDSbY72P6wxBto2RRbPXInDukz2xmccJNN1B0kiy/IMyZ/4TfPzGzRHBy+cLKYZtUxWb16JGtUwtts2JRbPrs1hxFGCeCdi8gZ7jsN6Rlj4LpodddWg9zwWmUqBmEEf5gwvMwpPsZ8jqaoq0dP6mFVNlC2pcZXnkjFcFOzVEtj0kHxu2HEpJ2l+X4B/j3WlPzFjplAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"프론트컨트롤러 패턴1\"\n        title=\"프론트컨트롤러 패턴1\"\n        src=\"/static/dd80541346f73a2fd93a7fdb194b0e57/37523/frontcontroller.png\"\n        srcset=\"/static/dd80541346f73a2fd93a7fdb194b0e57/e9ff0/frontcontroller.png 180w,\n/static/dd80541346f73a2fd93a7fdb194b0e57/f21e7/frontcontroller.png 360w,\n/static/dd80541346f73a2fd93a7fdb194b0e57/37523/frontcontroller.png 720w,\n/static/dd80541346f73a2fd93a7fdb194b0e57/302a4/frontcontroller.png 1080w,\n/static/dd80541346f73a2fd93a7fdb194b0e57/62da8/frontcontroller.png 1262w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>이러한 방식의 문제점은 계속해서 클라이언트가 할 수 있는 요청의 수가 증가할 때마다 서블릿 수가 증가한다는 문제점이 있다. 이를 해결하고자, FrontController 패턴이 대두하였고 아래와 같다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 24.444444444444443%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABOElEQVQY03WQS0sCYRSG5wdGq6BaVLTIFrUMChxCtxJBF8xACcUWZWm26IJUtAkiWpSZ1jfpjJG3MVNzcjTyiRnb9sLhXOCc8/BKclTBe55n+VTFHVco1U1+ej1U3eD1/Qutathh9fnqF5puUDe6/CdJjgpWEiqeoyyuA4He7CBKBsMb94wHUkwF0ziCaWbCGSa3Hhny3rNzXbSXi/U2otQipxt2LjdMpPnIMysJDc9xDue+oPrZ4VZtMLh2hyOUYfEgy9yuwHWYZWFPYWD1jvBVwT7ou8gz5n/AGVWYCKTwX+aR5H3BakJl6SSHKyaoNE1E2WB0M2mTTYf6hBbp7PYTI74kkZs+Ya3V4a3WplRvU/ho82F0keSYwvqZ5aGGO/5ie2ip0jDRm6adrSeVv9qatczvfz38BV8JV33Tu0nrAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"프론트컨트롤러 패턴2\"\n        title=\"프론트컨트롤러 패턴2\"\n        src=\"/static/e8688d42de759e19823c7c5cba2814e0/37523/frontcontroller2.png\"\n        srcset=\"/static/e8688d42de759e19823c7c5cba2814e0/e9ff0/frontcontroller2.png 180w,\n/static/e8688d42de759e19823c7c5cba2814e0/f21e7/frontcontroller2.png 360w,\n/static/e8688d42de759e19823c7c5cba2814e0/37523/frontcontroller2.png 720w,\n/static/e8688d42de759e19823c7c5cba2814e0/302a4/frontcontroller2.png 1080w,\n/static/e8688d42de759e19823c7c5cba2814e0/11a8f/frontcontroller2.png 1272w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>하지만, FrontController 패턴 또한, 요청이 많아 질수록 처리해야되는 분기가 많아지는 문제점이 발생하여,\nURI 분기는 FrontController에서 처리하고, 나머지 세부로직은 인터페이스를 처리하게끔 하려했고, 그에 따라 Command 패턴이 대두되게 되었다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 28.333333333333332%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABTUlEQVQY05WPS0sCARSF5yfWfwiCCFpEqwqhoIUJkaVtI3pQWSmIDzRdlEGaFjPqlFO+g8pGSS2teXzhRAs3QQc+Dmdx7uUIumGi6SYDN02Tv6Q9KXTEKIWYh9KZj49cHE2tM2gNugOEJX8RZ7TCWrRCt6+RqbwRkhrE8uoPsmrlTKVNUc7iOEpj96RxnFzj8qZQaw9DT4UF3z2rkTIr4TJq55OZgwIj6yJjmzIT27eMb8mMukSmDxTyooTTl8Hll9gIZHF7U7QeS0TyTdyxKq7TKsLktszskcL8sUKr+8lyqMzkzq11+Jep3TvswTJZMcfc3g22wyw2T47F/TRqvUSx0SOhNLlQWgjezLM1KSw16H/pfOmGNf29r9Pt65Z3ehq6CS+KhD+SIBBLEoynCEfPadfvhyfzH7VqUL2E+hXUrqCaxOy8YgC6YVh8AxFkqFml/Cz7AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"커맨드 패턴2\"\n        title=\"커맨드 패턴2\"\n        src=\"/static/bf13c175f32f76e01229f0e6be732859/37523/command2.png\"\n        srcset=\"/static/bf13c175f32f76e01229f0e6be732859/e9ff0/command2.png 180w,\n/static/bf13c175f32f76e01229f0e6be732859/f21e7/command2.png 360w,\n/static/bf13c175f32f76e01229f0e6be732859/37523/command2.png 720w,\n/static/bf13c175f32f76e01229f0e6be732859/302a4/command2.png 1080w,\n/static/bf13c175f32f76e01229f0e6be732859/07a9c/command2.png 1440w,\n/static/bf13c175f32f76e01229f0e6be732859/e3729/command2.png 1794w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>이처럼, 인터페이스를 활용하여 각 요청에 대한 세부로직은 인터페이스가 처리하며, FrontController에 위치한 서블릿은 URI 분기만 처리해주는 식으로 발전했고 이 방식은 Servlet MVC에서 많이 쓰이는 방식이다.</p>\n<div class=\"footnotes\">\n<hr>\n<ol>\n<li id=\"fn-1\"><a href=\"https://jungwoon.github.io/common%20sense/2017/11/16/DAO-VO-DTO/\">DAO vs DTO(=VO) 개념 알아보기</a><a href=\"#fnref-1\" class=\"footnote-backref\">↩</a></li>\n</ol>\n</div>","frontmatter":{"date":"July 09, 2019","title":"FrontController & Command Pattern - 프론트 컨트롤러와 커맨드 패턴","categories":"개발","author":"개발한입","emoji":"💻"},"fields":{"slug":"/front-controller-and-command-pattern/"}},"prev":{"id":"782cdf08-b721-5fb0-995c-d7c56e001ce1","html":"<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#step-11-let-%ED%82%A4%EC%9B%8C%EB%93%9C\">STEP 1.1 let 키워드</a></p>\n</li>\n<li>\n<p><a href=\"#step-12-%ED%98%B8%EC%9D%B4%EC%8A%A4%ED%8C%85hoisting\">STEP 1.2 호이스팅(Hoisting)</a></p>\n</li>\n<li>\n<p><a href=\"#step-13-%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EC%8B%A4%ED%96%89%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8javascript-execution-context\">STEP 1.3 자바스크립트 실행컨텍스트(JavaScript Execution Context)</a></p>\n<ul>\n<li><a href=\"#step-131-%EC%83%9D%EC%84%B1-%EB%8B%A8%EA%B3%84creation-phase\">STEP 1.3.1 생성 단계(Creation Phase)</a></li>\n<li><a href=\"#step-132-%EC%8B%A4%ED%96%89-%EB%8B%A8%EA%B3%84execution-phase\">STEP 1.3.2 실행 단계(Execution Phase)</a></li>\n</ul>\n</li>\n</ul>\n</div>\n<ul>\n<li>STEP 1. ES6 VS ES6 이전 자바스크립트\n<ul>\n<li>STEP 1.1 let 키워드</li>\n<li>STEP 1.2 호이스팅(Hoisting)</li>\n<li>STEP 1.3 자바스크립트 실행컨텍스트(JavaScript Execution Context)\n<ul>\n<li>STEP 1.3.1 생성 단계(Creation Phase)</li>\n<li>STEP 1.3.2 실행 단계(Execution Phase)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>STEP 4. Review</li>\n<li>STEP 5. Reference</li>\n</ul>\n<h1 id=\"step-1-es6-vs-es6-이전-자바스크립트\" style=\"position:relative;\"><a href=\"#step-1-es6-vs-es6-%EC%9D%B4%EC%A0%84-%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8\" aria-label=\"step 1 es6 vs es6 이전 자바스크립트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 1. ES6 vs ES6 이전 자바스크립트</h1>\n<p>기존의 ES6 이전의 자바스크립트에서는 블록단위의 스코프가 존재하지 않았다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'global var'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">home</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> homevar <span class=\"token operator\">=</span> <span class=\"token string\">'homevar'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">home</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>C나 Java등 많은 프로그래밍언어를 했던 사람이라면, for문 안에서 돌아가는 i에 대해서\n이 코드를 동작하면 생각하는 결과로는 에러를 뿜을 것이라고 생각을 할 것이다.</p>\n<p>왜냐? for문 안에서만 사용될 i가 100번 돌고나서 메모리 상에서 사라질 것이라고 생각하기 때문이다.</p>\n<p>하지만, 결과는 우리가 예상한 것과 다르다.\n저 코드를 돌려보면, <strong>100</strong>이라는 값이 나오는 것을 확인할 수가 있다.\n어째서 그런 것일까?</p>\n<p>ES6 이전의 자바스크립트는 블록 레벨 스코프(Block-level scope)를 따르는 것이 아니라, 함수 레벨 스코프(Function-level scope)를 따랐기 때문이다.</p>\n<p>이 두개가 정확히 무엇일까?</p>\n<ol>\n<li>\n<p><strong>함수 레벨 스코프(Function-level scope)</strong>\n함수 내에서 선언된 변수는 함수 내에서만 유효, 함수 외부에서는 참조할 수 없다.\n즉, 함수 내부에서 선언한 변수는 <strong>지역 변수</strong>이며, 외부에서 선언한 변수는\n모두 <strong>전역 변수</strong>이다.</p>\n</li>\n<li>\n<p><strong>블록 레벨 스코프(Block-level scope)</strong>\n모든 코드 블록(함수, if문, for문, while 문, try/catch 문 등) 내에 선언된 변수는\n해당 코드 블록 내에서만 유효, 코드 블록 외부에서는 참조할 수 없다.\n즉, 코드 블록 내부에서 선언한 변수는 <strong>지역 변수</strong>이다.</p>\n</li>\n</ol>\n<p>또한 ES5까지 변수를 선언할 수 있는 유일한 방법은 <strong>var</strong> 키워드였다.\n이 키워드는 아래와 같은 특징이 있고, 타 언어 대비하여 주의를 기울이지 않으면 치명적인 문제를 야기할 수가 있는 것들이 있었다.</p>\n<p>대표적인 것이 위에서 말한 var 키워드로 생성한 변수는 <strong>함수 레벨 스코프</strong>을 따른 다는 것이다.</p>\n<p>그 외에는 아래와 같다.</p>\n<ul>\n<li>var 키워드 생략 허용\n<blockquote>\n<p>암묵적 전역 변수 양산할 가능성이 크다.</p>\n</blockquote>\n</li>\n<li>변수 중복 선언 허용\n<blockquote>\n<p>의도하지 않은 변수값의 변경이 일어날 가능성이 크다.</p>\n</blockquote>\n</li>\n<li>변수 호이스팅\n<blockquote>\n<p>변수를 선언하기 이전에 참조할 수 있다.</p>\n</blockquote>\n</li>\n</ul>\n<p>대부분의 문제는 <strong>전역 변수</strong>로 인해 발생한다.\n우리가 학부 1학년 C언어 수업을 들을 때도 배우듯이 전역 변수를 활용하면서 편한 장점도 있지만, 대부분의 경우에는 <strong>스파게티 코드</strong>를 양산한다는 문제점이 있다는 것을 알고 있다.</p>\n<p>ES5 까지의 자바스크립트는 이러한 문제를 안고 있었다.</p>\n<p>따라서 위의 코드는 <strong>함수 레벨 스코프</strong>를 따르는 var 키워드를 통해 생성된 변수 i가\nfor문을 통해서 100까지 증가되었고, 스코프가 블록이 아닌 함수이기 때문에 for문이 끝난 이후에도 i 값이 100으로 참조가 가능한 것이다.</p>\n<p>이러한 문제를 ES6에서는 어떻게 해결하였을까?</p>\n<h2 id=\"step-11-let-키워드\" style=\"position:relative;\"><a href=\"#step-11-let-%ED%82%A4%EC%9B%8C%EB%93%9C\" aria-label=\"step 11 let 키워드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 1.1 let 키워드</h2>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'global var'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">home</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> homevar <span class=\"token operator\">=</span> <span class=\"token string\">'homevar'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">home</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>여기서는 단순하게, <code class=\"language-text\">var i</code>를 <code class=\"language-text\">let i</code>로 바꾼 거밖에 없는 코드이다.\n결과 값은 어떻게 될까?</p>\n<p><code class=\"language-text\">ReferenceError: i is not defined</code> 우리가 C와 Java에서 사용했을 때와 같이 에러가 출력이 된다. 어떻게 된 일일까?</p>\n<p>엄청 단순하다. <code class=\"language-text\">let</code> 키워드의 역할은<strong>함수 레벨 스코프</strong>를 <strong>블록 레벨 스코프</strong>로 바꿔준 것이다.</p>\n<p>이것을 제외하고도, let 키워드는 많은 장점이 있다.</p>\n<ol>\n<li>변수 중복 선언 금지</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> foo <span class=\"token operator\">=</span> <span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> foo <span class=\"token operator\">=</span> <span class=\"token number\">456</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> bar <span class=\"token operator\">=</span> <span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> bar <span class=\"token operator\">=</span> <span class=\"token number\">456</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>foo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 456이 찍힘</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>bar<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// SyntaxError: Identifier 'bar' has already been declared</span></code></pre></div>\n<p>위에서 설명한 것과 같이 var 키워드는 동일한 이름을 갖는 변수를 중복 선언 가능하지만, <strong>let 키워드로는 동일한 이름을 갖는 변수를 중복해서 선언할 수가 없다.</strong></p>\n<p>이 후에는 호이스팅과 클로저가 있는데 이는 내용이 길 것같으므로, 따로 챕터를 나눠서 설명해보도록 하겠다.</p>\n<h2 id=\"step-12-호이스팅hoisting\" style=\"position:relative;\"><a href=\"#step-12-%ED%98%B8%EC%9D%B4%EC%8A%A4%ED%8C%85hoisting\" aria-label=\"step 12 호이스팅hoisting permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 1.2 호이스팅(Hoisting)</h2>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>foo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ① undefined</span>\n<span class=\"token keyword\">var</span> foo <span class=\"token operator\">=</span> <span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>foo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ② 123</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> foo <span class=\"token operator\">=</span> <span class=\"token number\">456</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>foo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ③ 456</span></code></pre></div>\n<p>맨 위의 예시를 들었던 코드를 보면, 기존 C나 Java를 공부했던 사람들이라면, 에러가 뿜어질 것이라고 예상할 것이라고 필자가 예상한 바 중에 에러를 뿜는다는 부분이 있었다.\nfoo가 선언되기 이전 <code class=\"language-text\">console.log(foo);</code>을 보면 undefined라고 출력이 되는데,\n다른 언어와 달리 어째서 참조를 할 수 있으며, <strong>undefined</strong>라는 값을 뿜게 되는 것일까?</p>\n<p>이것은 자바스크립트의 특징 중에 하나로 <strong>모든 선언문은 호이스팅(Hoisting)되기 때문</strong>이다.</p>\n<p>호이스팅이란 var 선언문이나 function 선언문 등 모든 선언문이 해당 Scope의 선두로 옮겨진 것처럼 동작하는 특성을 말한다. <strong>즉, 자바스크립트의 모든 선언문(var, let, const, function, function*, class)이 선언되기 이전에 참조 가능하다.</strong></p>\n<p>자바스크립트의 변수 생성 및 호이스팅 과정을 알아 보자!\n자바 스크립트의 보다 자세한 내용은 Exeution Context을 보자, 변수 생성 및 호이스팅 과정은 아래와 같은 단계로 이뤄진다.</p>\n<ol>\n<li>\n<p>선언 단계(Declaration phase)</p>\n<blockquote>\n<p>변수 객체(Variable Object; VO)에 변수를 등록한다. (이 VO는 스코프가 참조하는 대상이 된다.)</p>\n</blockquote>\n</li>\n<li>\n<p>초기화 단계(Initialization phase)</p>\n<blockquote>\n<p>VO에 등로된 변수를 메모리에 할당한다. (이 단계에서 변수는 undefined로 초기화된다.)</p>\n</blockquote>\n</li>\n<li>\n<p>할당 단계(Assignment phase)</p>\n<blockquote>\n<p>undefined로 초기화된 변수에 실제 값을 할당한다.</p>\n</blockquote>\n</li>\n</ol>\n<p><strong>var 키워드로 선언된 변수는 선언 단계와 초기화 단계가 한번에 이루어진다.</strong>\n즉, 스코프에 변수가 등록되고, 메모리 할당 후에 undefined로 초기화가 되는 것이다.\n따라서, 위와 같이 선언문 이전에 변수에 접근하여도 VO에 변수가 존재하기 때문에 에러가 발생하지 않고, <strong>undefined를 반환</strong>하는 것이다.\n이러한 현상을 <strong>변수 호이스팅(Variable Hoisting)</strong> 이라 한다.</p>\n<p>다시 이를 통해 위의 코드를 분석해보면,\n①이 실행되기 이전에 <code class=\"language-text\">var foo = 123;</code>이 호이스팅 되어 ①구문 앞에 <code class=\"language-text\">var foo;</code>가 옮겨진다. 하지만, 변수 선언 단계와 초기화 단계가 할당 단계와 분리되어 진행되기 때문에, 이 단계에서 foo에는 <code class=\"language-text\">undefined</code>가 할당되어 있다.</p>\n<p>②에서는 변수에 값이 할당되었기 때문에 123이 출력된다.</p>\n<p>③이전에 말했듯이 var 키워드는 함수 레벨 스코프를 지니므로, 같은 이름의 변수를 재할당할 수가 있다. 그러므로 값이 456이 나오는 것이다.</p>\n<p>그렇다면? let 키워드의 경우에는 호이스팅이 어떻게 동작할까?</p>\n<p>var 키워드와 달리 let 키워드로 선언된 변수를 선언문 이전에 참조하면 참조 에러(ReferenceError)가 발생한다. 이는 let 키워드로 선언된 변수는 일시적 사각지대(Temporal Dead Zone; TDZ)에 빠지기 때문이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>foo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ReferenceError: foo is not defined</span>\n\n<span class=\"token keyword\">let</span> foo <span class=\"token operator\">=</span> <span class=\"token number\">123</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>let 키워드로 선언된 변수는 var 키워드와 달리 선언 단계와 초기화 단계가 분리되어 진행된다.</strong> 즉, 스코프에 변수를 등록하지만, 초기화 단계는 변수 선언문에 도달했을 때 이루어진다.</p>\n<p><strong>따라서, 초기화 이전에 변수에 접근하려하면 참조 에러(ReferenceError)가 발생한다.</strong> 상세히 말하면 변수를 위한 메모리 공간이 아직 확보되지 않았기 때문이다. 따라서 스코프의 시작부터 초기화 시작 지점까지는 변수를 참조할 수 없으며, 이 구간을 <strong>일시적 사각지대(TDZ)</strong> 라 부른다.</p>\n<blockquote>\n<p><strong>Temporal dead zone and errors with let</strong>\nIn ECMAScript 2015, let will hoist the variable to the top of the block. However, referencing the variable in the block before the variable declaration results in a ReferenceError. The variable is in a “temporal dead zone” from the start of the block until the declaration is processed.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 스코프 선두에서 선언 단계 실행</span>\n<span class=\"token comment\">// 아직 변수가 초기화 X</span>\n<span class=\"token comment\">// 따라서 참조 불가</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>foo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ReferenceError: foo is not defined</span>\n\n<span class=\"token keyword\">let</span> foo<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 초기화 수행</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>foo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// undefined</span>\n\nfoo <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 할당 수행</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>foo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 1</span></code></pre></div>\n<p>이렇게 보면, ES6에서는 호이스팅이 발생하지 않는 것처럼 보인다. 하지만 그렇지가 않다. 아래의 예제를 참고해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> foo <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 전역 변수</span>\n\n<span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>foo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ReferenceError: foo is not defined</span>\n  <span class=\"token keyword\">let</span> foo <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 지역 변수</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 예제의 경우 전역 변수 foo의 값이 출력될 것처럼 예상이 된다. 하지만, ES6 선언문도 호이스팅이 발생하기 때문에 참조 에러가 발생한다. 이 경우에는 지역 변수 foo도 해당 스코프에서 호이스팅이 되고, 일시적 사각지대에 빠진다. 따라서 전역 변수의 foo의 값이 아니라, 참조에러가 발생하는 것이다.</p>\n<p>클로저를 들어가기 앞서, 선행 지식으로 자바스크립트 실행 컨텍스트에 대한 이해가 필요하므로, 해당 내용을 먼저 정리해보도록 하겠다.</p>\n<h2 id=\"step-13-자바스크립트-실행컨텍스트javascript-execution-context\" style=\"position:relative;\"><a href=\"#step-13-%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EC%8B%A4%ED%96%89%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8javascript-execution-context\" aria-label=\"step 13 자바스크립트 실행컨텍스트javascript execution context permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 1.3 자바스크립트 실행컨텍스트(JavaScript Execution Context)</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABu0lEQVQoz3WS32vTUBiG+88K3gre+B/owFtFmAyRiZM5R3WdbJXZUdNWcU7WdEnXZN3aJE2apuuaJjnNj0eaFi+GvvDxwsc5z3nPd06BlbJs6fZE8OnU4eh8xGHTzassu5R+O4xuQ8gSfN9nOBwydIa527aN67qkaUohW5HmcUKSJDiTEKk94vRyTOPC5afucaJ5SKqLc+PjzwK88Q2mYWKZFoOBjT2wcRwn319YwLYaFmt7Gi8rPZ7u62xU+7w7dVivm+w1TOpvzvi4JmGoI0SWINKE/ykHGl6IavlcuwEdJ6CpjTksdSh97lAp61S2Zb4VVTxvRpQk9LQRzeo16ncDpdZjdhutxpYtgXc16U959aBM8UmN3cc1Xj864utmk5g0TyftqDy7V2Lj4Ree399noI9XDwEFIQSREPztkP3jiGVfiDliHt9Zk5GkMVEkiKKIQpzETCczjt+eUX0v86Ok0igqSB9kDtZPuGyahGGA0TfodrsY/T66rnPVvcKf+oRBmIMWtQiXX1kEMcebMtWtFvVdldqOgrStcPDiF0bbzXNYpklLbqFrGm1VRTlXsCwr/zILd2wnn+Ef9vJL5asD8/EAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"execution-context\"\n        title=\"execution-context\"\n        src=\"/static/dbcb12d0c45f0d76cf09c05259708198/37523/execution-context.png\"\n        srcset=\"/static/dbcb12d0c45f0d76cf09c05259708198/e9ff0/execution-context.png 180w,\n/static/dbcb12d0c45f0d76cf09c05259708198/f21e7/execution-context.png 360w,\n/static/dbcb12d0c45f0d76cf09c05259708198/37523/execution-context.png 720w,\n/static/dbcb12d0c45f0d76cf09c05259708198/302a4/execution-context.png 1080w,\n/static/dbcb12d0c45f0d76cf09c05259708198/07a9c/execution-context.png 1440w,\n/static/dbcb12d0c45f0d76cf09c05259708198/ce92a/execution-context.png 1459w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><strong>실행 컨텍스트란 자바스크립트 코드가 실행되고 연산되는 범위를 나타내는 추상적인 개념이다.<sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup></strong> 이게 무슨 말일까? <strong>실행 컨텍스트는 실행 가능한 코드가 실행되기 위해 필요한 환경</strong>이라고 이해하면 된다. 그렇다면? 실행 컨텍스트는 어떻게 만들어지고 변수와 함수는 어떤 스코프를 따르는지 이해가 필요하다.</p>\n<p>자바스크립트 엔진은 코드를 실행하기 위해 필요한 여러가지 정보를 알고 있어야 한다.\n여러가지 정보는 아래와 같은 것들이 존재한다.</p>\n<ul>\n<li>변수 : 전역변수, 지역변수, 매개변수, 객체의 프로퍼티</li>\n<li>함수 선언</li>\n<li>변수의 유효범위(Scope)</li>\n<li>this</li>\n</ul>\n<p>위와 같이 실행에 필요한 정보를 형상화하고, 구분하기 위해서 자바스크립트 엔진은 실행 컨텍스트(Execution Context)를 물리적 객체의 형태로 관리한다.</p>\n<p>실행 컨텍스트의 타입은 아래와 같다.</p>\n<ul>\n<li>\n<p><strong>전역 코드(Global Execution Context)</strong>\n가장 베이스가 되는 실행 구역이다. 특정 함수안에서 실행되는 코드가 아니라면, 코드는 전역 코드에서 실행된다. 전역 코드에서는 두가지 일이 이루어진다.</p>\n<ol>\n<li>window 오브젝트인 전역 컨텍스트 생성</li>\n<li>this를 global object로 할당</li>\n</ol>\n</li>\n<li>\n<p><strong>함수 코드(Functional Execution Context)</strong>\n함수가 호출될 때마다, 해당 함수에 대한 실행 컨텍스트가 생성된다.\n각각의 함수들은 자신만의 실행 컨텍스트를 갖지만, 이 컨텍스트는 <strong>함수가 호출이 되어야 만들어진다.</strong></p>\n</li>\n<li>\n<p><strong>Evel 코드(Eval Function Execution Context)</strong>\neval 함수 또한, 자신만의 실행 컨텍스트를 가진다. 하지만, 이번 포스트에서는 다루지는 않는다.</p>\n</li>\n</ul>\n<p>위에 대한 이해를 돕기 위해서 아래의 코드를 살펴보자!</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> x <span class=\"token operator\">=</span> <span class=\"token string\">'xxx'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> y <span class=\"token operator\">=</span> <span class=\"token string\">'yyy'</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> z <span class=\"token operator\">=</span> <span class=\"token string\">'zzz'</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">+</span> y <span class=\"token operator\">+</span> z<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>위 코드를 실행하면, 아래와 같이 실행 컨텍스트 스택(Stack)이 생성하고 소멸한다.\n현재 실행 중인 컨텍스트에서 이 컨텍스트와 관련없는 코드(예를 들어 다른 함수)가 실행되면 새로운 컨텍스트가 생성된다. 이렇게 스택에 쌓이게 되면서 제어권이 이동된다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.22222222222222%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABcSAAAXEgFnn9JSAAABaElEQVQY0y3QTU7CUBAH8N6BNXsTdl7AC3AGN1zAi7AXiJiYsIAIiLFQWgEpHw8oBfmMoS2F8vpeQSwbSCCmjnmEzST/zOSXmeGIbXvEtoESgvFq5XMoRWvHAYdSOBwOgQ5C4XQqBS/pNPRVNbRz3SDrXWYSNsZ+SsiJGcziWLExZgHvdjufOZ8jQ9Ngbhjgum6gpyjh92IRSqIIo8EgRAkJznUdDF2HhWkmvjcbP7Ht08XwuM167f1st2xDwufzVwLP9+LRKLxms5DNZG4mo9F9CyFQ2m2YjMd3+be323QyCU/xOJSKxWdRkq4dSn+ZsXacP+5TVb1quczOwQDg66sqEgUB2gjByrIChqaFW83mGVwuFiFtNgs2ZBlKkgTj4TBxPB793U7n9FEus+xxYqHgPcZiIAnCGfyaTlG1UoHhYMB+dAbrsgwMXZpmCFtWsKso0KjVQNe0xGG/9/O53OkhEoF6ter9A6g8QjsACvL7AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Execution Context Stack\"\n        title=\"Execution Context Stack\"\n        src=\"/static/e913c89ccd104875b9e27d3cd15ac701/37523/ec_stack.png\"\n        srcset=\"/static/e913c89ccd104875b9e27d3cd15ac701/e9ff0/ec_stack.png 180w,\n/static/e913c89ccd104875b9e27d3cd15ac701/f21e7/ec_stack.png 360w,\n/static/e913c89ccd104875b9e27d3cd15ac701/37523/ec_stack.png 720w,\n/static/e913c89ccd104875b9e27d3cd15ac701/302a4/ec_stack.png 1080w,\n/static/e913c89ccd104875b9e27d3cd15ac701/07a9c/ec_stack.png 1440w,\n/static/e913c89ccd104875b9e27d3cd15ac701/e894c/ec_stack.png 1669w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ol>\n<li>자바스크립트 엔진이 실행 가능한 코드를 만나면, 논리적 스택 구조를 갖는 실행 컨텍스트 스택을 생성한다.</li>\n<li>전역 코드(Global code)로 진입하면 전역 실행 컨텍스트가 생성되고, 실행 컨텍스트 스택에 쌓인다. 전역 실행 컨텍스트는 어플리케이션이 종료될 때까지 유지된다.</li>\n<li>함수를 호출하면 해당 함수의 실행 컨텍스트가 생성되며, 직전에 실행된 코드의 실행 컨텍스트 위에 쌓인다.</li>\n<li>함수 실행이 끝나면, 해당 함수의 실행 컨텍스트를 파기하고, 직전의 실행 컨텍스트에 제어권을 넘긴다.</li>\n</ol>\n<p>이를 좀 더 개발자스럽게 살펴보면 아래와 같다.\n자바스크립트 엔진이 \u0003<code class=\"language-text\">script</code> 태그를 처음 만나면, 전역 실행 컨텍스트를 만들고, 현재 실행되고 있는 호출 스택에 이를 push한다. (그림의 맨 앞이라고 생각하면 된다.)\n그 후에 <code class=\"language-text\">foo();</code>와 <code class=\"language-text\">bar();</code> 함수가 연속으로 호출된다고 했을 경우 스택의 top에 함수 실행 컨텍스트를 push한다. (그림에서 2번째, 3번째)</p>\n<p>자바스크립트 엔진은 실행 컨텍스트가 호출 스택에서 가장 위에 있는 함수를 실행하고, 함수가 할 일을 끝내면 스택에서 제거(pop)한다. (그림의 4번째, 5번째)</p>\n<p>그렇다면 자바스크립트 엔진이 어떻게 실행 컨텍스트를 만드는 것일까?</p>\n<p>실행 컨텍스트는 2가지 단계로 생성된다. 1. 생성 단계(Creation Phase) 2. 실행 단계(Execution Phase)</p>\n<h3 id=\"step-131-생성-단계creation-phase\" style=\"position:relative;\"><a href=\"#step-131-%EC%83%9D%EC%84%B1-%EB%8B%A8%EA%B3%84creation-phase\" aria-label=\"step 131 생성 단계creation phase permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 1.3.1 생성 단계(Creation Phase)</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAACJklEQVQ4y4WSe1PaQBTF+f6fQaed1qnWqa1/2lp8lWeQIBYqMJJAIIRHCAmvJCTLr5M4qPXVM3Pu3s2ee+fc7CaWyyWaptFqtVDVFrXaDbquo7XbtNttbm+bOM4U23ZQFAVVVWk0GnFNvV5HaSooSpN6vUGExHQ6JZVKkctmkSSJdCpFtVqN84vzc85OkowGfXpdjSv5krJcpCTLlMtXsVYuFpHyOWS5hBCCBG9gFa6xXYG1CJksRcyp/7p+vV6TiMKGT6FPPHbSOvv5HjvpLnu5Hns5nfHM33R4VpPYNArFGmcZxDRnPqNpRI+FF2DNfYbTu2/RWZRvtFFuzVfM3ODBYYToYF8yOCj0+ZTtsZvr8bkwoGK4fC2Z7OUNdjI6X6S7VVJsjq5Hse6gYHBY7OOtxMPIQqzx/BBvFbJYrLBtl5E2wFR1hqqOZc6ZOH7seO4GuH6IH4h7rkLxr8OXINw5s5GJZ1vRjqfKIBTP/2EUHMfGHFo0JJ16rksl06GS7VJJd2k3JjRKQyrpDte/NGp5nVqmg1IeEERmHl1q7DBqaPQN1KbGxW6V5LsyR9syyQ9ljrdKVM5aZA5uON6+4uR9mdOP1/zYKiF/b94/lcdTvjny//BSbeywoNgkqybnf0x+/h5xWjUpNG2+Ffpc1MacVEwOL/tM5qt4xDAU8SW+6DAKfdujbS7RLZeu5dIZuwwdn+ZggTHx0MZLbgcLvEC86mzT8C87jtEWsbZq9QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"execution-context\"\n        title=\"execution-context\"\n        src=\"/static/8dcc18dec436e13988a7af8b50697d7e/37523/lexical-scope.png\"\n        srcset=\"/static/8dcc18dec436e13988a7af8b50697d7e/e9ff0/lexical-scope.png 180w,\n/static/8dcc18dec436e13988a7af8b50697d7e/f21e7/lexical-scope.png 360w,\n/static/8dcc18dec436e13988a7af8b50697d7e/37523/lexical-scope.png 720w,\n/static/8dcc18dec436e13988a7af8b50697d7e/a1dd2/lexical-scope.png 838w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>생성 단계 동안 두 가지 일이 일어난다.</p>\n<ol>\n<li><strong>LexicalEnvironment</strong> 컴포넌트 생성</li>\n<li><strong>VariableEnvironment</strong> 컴포넌트 생성</li>\n</ol>\n<p>실행 컨텍스트는 개념적으로 아래와 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">ExecutionContext <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\nLexicalEnvironment <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>ref<span class=\"token punctuation\">.</span> to LexicalEnvironment <span class=\"token keyword\">in</span> memory<span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\nVariableEnvironment <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>ref <span class=\"token punctuation\">.</span> to VariableEnvironment <span class=\"token keyword\">in</span> memory<span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>렉시컬 환경(Lexical Environment)</strong>\n렉시컬 환경은 identifier-variable와 매핑되는 곳이다.</p>\n<p>참조 대상 식별자인 identifier는 함수와 변수의 이름과 같이 어떤 대상을 다른 대상과 구분하여 식별할 수 있는 유일한 이름이다. 자바스크립트는 이 규칙대로 식별자를 찾는다.\n<strong>즉, 렉시컬 환경에서는 변수와 해당 변수에 대입된 값이 매핑되는 곳이라 볼 수 있다.</strong></p>\n<p>렉시컬 환경은 세가지 일을 한다. (VariableEnvironmnet도 동일)</p>\n<ol>\n<li>환경 레코드(Environment Record)</li>\n<li>외부 환경 참조(Reference to the outer environment)</li>\n<li>this 바인딩(this binding)</li>\n</ol>\n<p>렉시컬 환경은 식별자와 참조 혹은 값을 기록하는 <code class=\"language-text\">환경 레코드(Environment Record)</code>와 <code class=\"language-text\">outer</code>라는 또 다른 렉시컬 환경을 참조하는 포인터로 구성이 된다.\n<code class=\"language-text\">outer</code>는 외부 렉시컬 환경을 참조하는 포인터로, 중첩된 자바스크립트의 스코프 탐색을 위해 사용된다.</p>\n<p>보다 쉽게 이해하기 위하여, 아래의 코드가 렉시컬 환경으로 어떻게 구성되는지 보자!</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> a <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> b <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> c <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// 2. Running execution context</span>\n\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 1. Call</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Running execution context의 LexicalEnvironment</span>\n<span class=\"token punctuation\">{</span>\n  environmentRecord<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    a<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    b<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n    c<span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n    bar<span class=\"token operator\">:</span> <span class=\"token operator\">&lt;</span>Function<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  outer<span class=\"token operator\">:</span> foo<span class=\"token punctuation\">.</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>Environment<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>아주 단순하게 나타낸 것이고, 실제로는 이보다 복잡하게 동작한다는 것을 알고 있으면 좋겠다. 아래에서는 보다 깊게 이해하기 위해서 렉시컬 환경에서 이루어지는 일들에 대해서 자세히 알아보도록한다.</p>\n<hr>\n<p><strong>1. 환경 레코드(Environment Records)</strong>\n렉시컬 환경 안에 함수와 변수를 기록한다.</p>\n<p>프로그래밍 언어를 보면, 변수나 함수에 이름을 부여하여 의미를 부여한다.\n<em><strong>이름이 없을 경우에는 변수나 함수는 그냥 단순한 하나의 메모리 주소에 불과하다.</strong></em> 따라서, 프로그램은 “이름:값”에 대응하는 대응표를 만들어 사용한다. 이 대응표를 활용하여, 프로그래머들이 함수나 변수의 명을 짓고, 보다 쉽게 코드를 이해할 수 있게끔 하는 것이다.</p>\n<p><strong>이와 같은 대응표가 환경레코드와 같다고 볼 수 있다.</strong></p>\n<p><strong>2. Reference to the outer environment (외부 환경 참조 = Scope Chain)</strong></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACS0lEQVQoz11T227aQBDl/78lSfvSl6aVmgiHOMGAjQ3BKIANxje8vuK7faodShplpNF416MzM2fODvamCUmSsFgsIMszvL9vII3HGI/H0HUdfdcBfX+JX6zve3Sf7vl5wFgATdUwVxS8iCJ2hgF9tSJAwzCQ5zkc34freXh8fMRoNKKCwnCI3c4AYwxhFP0HLM8lsuyMOElRVxWqLEPHO+p7SvIcB8+3N7i/u8XDwwNc14HjurAsC57nIQgCOLaNsigofxB7MYLtCYa5RxwnqJIETdNQZzxywMWLiKkkfYCkJx9VVSHLMvKQMeS8y7bFoCgLVKwEOzIELESVpuiriipyfpIkwXqzxf6wx3Q6pS4lYQhN06iA67o4BQHltkV+AWzLBuzAsLeOCKMY5yDAOUlohDiKoEoSVEWGKIqYz+eYaypkWYZlHahj27bR1DW6ssSgLEt0fYetaWKzNbBYrvC+3X0Q7Tk2xLsb/Pj+DW+rFVHBOU+zMxUP4wSBf0LmeZeReUIUxZTEecnzArxImqYE6HseVFWFvl5juVxAURRobzrGkxkmMwXqm44Tp6rILx0GjNEyvhoHb9sWRVFgZ5q0Wc6hIAgYCgIE4Qk7w8TBsugfVwVx6Hk+on+A/Se5EBVdB/t4xOT3L/y5/0k6dBwHPtclX8bphDAMKRZJgr5pMOCCjeKYOuIgV+dy4OB8k/LzCJPXF3pRijLHemNgIqt4ncywXG/guD6NTDrkY3G98Xj165kb/y7rmmJd15eC/AHU9cWrmu6vk/0FHIOCCQ2yDLgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Scope-Chain\"\n        title=\"Scope-Chain\"\n        src=\"/static/6050e94af744b3a82d2dd6dbb11d861a/37523/scope-chain.png\"\n        srcset=\"/static/6050e94af744b3a82d2dd6dbb11d861a/e9ff0/scope-chain.png 180w,\n/static/6050e94af744b3a82d2dd6dbb11d861a/f21e7/scope-chain.png 360w,\n/static/6050e94af744b3a82d2dd6dbb11d861a/37523/scope-chain.png 720w,\n/static/6050e94af744b3a82d2dd6dbb11d861a/fe9f1/scope-chain.png 883w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>환경 레코드를 통하여 변수를 찾아보고, 없다면 바깥 환경을 참조하여 찾아보는 식으로 중첩 스코프가 가능해진다. 이 중첩 스코프 탐색은 해당하는 이름을 찾꺼나 바깥 렉시컬 환경 참조가 <code class=\"language-text\">null</code>이 될 때 탐색을 멈춘다.</p>\n<p><strong>즉, 외부 환경에서 해당 변수를 찾아 볼 수 있다</strong>는 의미이다.</p>\n<p>스코프 체인을 아는 사람을 알겠지만, 위의 방식은 스코프 체인과 동일하다.</p>\n<blockquote>\n<p>A <em>scope chain</em> is a <em>list of objects</em> that are searched for <em>identifiers</em> appear in the code of the context.</p>\n</blockquote>\n<p>스코프 체인도 ES6이전과 이후의 내부 구현 방식에 차이가 있다.</p>\n<p>아래의 코드를 참고해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">a</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token constant\">A</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">b</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token constant\">B</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">b</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">a</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 458px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 95%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAA7EAAAOxAGVKw4bAAADdElEQVQ4y62UW09jVRTH+0F88gNoMiaTeJlxjGNMxEAmvuknMD4bn+bJBxIvY5gBJpR6wUSUGRniFGwZO0xbejkX2kqvQNtzeqXTQoEUbAtt+Zm9CdUy8+CDK/lnrb3PXv+zbntbuCCnp6dStzptJoPfM/pkjDGflfHAd9zx27jlvcvnrq9xplbkud5pr+8jxHKR7Pzj/l8HXJu+wYtfXubK1DBDMx/x3g8fcunOdV4YfZmbjlF5rtvr9f0ELM+NrtVGD4WYXbrHL8vzzDyc5SfHPal/dtxnxj7LgvMhxULpLMreP1Fa/s1+vnl0dISuh1D8KkGfgs/jl/CvBvG6fSgBDY/bi6Kqz5TruYTNZpOtdIa1SJiAqhDUVPxKEEXXWA34pQ5FwsRicWq1GtVqVfo8U8OLqf9X6XQ6lEolCcvx8bFkb7VaEs1Wk85xh2K9jDP5GNeGR+IPCbe0nckVQrl12q023W5X+lUqFU5OTrAcHh7KsHd2diSe1qq0DprM6Qu8NP4WV6dHeGN6mFenhnhtaojXp97n0uR1Pr7/KY29BsVSSZL1m7K3t0c2myWXy5EzcximSd7ME1hXuGWfwLbyIxPLNiacNu4++lbqbxYnmPPMEwlFSKfTg00R7A6HA7fbLXU0GmVjY4NqpUoxW6Bslihk8hSyeUpGsY9KcZtEMsFevT4wOpZCoSDJfD4fHo9Hal3TKZfLrEfX0dZ09DUdVVPRQzqqrhH+M0IylZIBpFIpSda/KaJu8XhcfhBIJpMkEgli8ZhEPBEfQOwc8RiRSATDMGTtRR9Ecy38TyIyEuWztNttRKfF7RAQdrfdIVpM8MWTcW6vTkuMrVoZ81q57bXylXuS+Yidk9axHBkx2Pv7+2cpNxoNuXE+NpWnFQ7rDea0BV6ZfIe3bR9wzXaDK9ZhrlpHeNM6wuXJd/nk18+olatsbm3JIPpdrtfrxGIxUsmzGmYyGYyswXoyygP3bzzSH2P3O1j0O/g9uMxiwMmCx86K6kbXNLa3t/tdlhGK3JeWlnC5XDidTsLhsCSu79YpmkXy2Rxm2sRMG9LOZXIUjDy71V05v7VqbeDpk2Pj9XoJBAJyZIQdDAZlpKFwSI6LQFBRUDUNRVXkenNzE13Xyefzg4SimDJNw+hD/DmTHtwzTXNgLXzELTk4OBh4UP4G5e4/ZG1/hfoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Scope-Chain Example\"\n        title=\"Scope-Chain Example\"\n        src=\"/static/08ebd163b97c2d0a3250833d1f4f2b7d/f7a31/scope-chain2.png\"\n        srcset=\"/static/08ebd163b97c2d0a3250833d1f4f2b7d/e9ff0/scope-chain2.png 180w,\n/static/08ebd163b97c2d0a3250833d1f4f2b7d/f21e7/scope-chain2.png 360w,\n/static/08ebd163b97c2d0a3250833d1f4f2b7d/f7a31/scope-chain2.png 458w\"\n        sizes=\"(max-width: 458px) 100vw, 458px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>ES6 이후의 실행 컨텍스트(Execution Context; 이하, EC)가 가 생성되는 과정을 알아보자. 함수 <code class=\"language-text\">a()</code>가 실행되면, 위에서 설명했던 것과 마찬가지로 함수 EC의 타입에 해당하므로, EC가 생성이된다.</p>\n<p>렉시컬 환경은 생성시점의 a()의 정보를 갖고 생성이 된다.\n위의 코드를 보면, 함수 생성시점에 평가된 EC a(), EC b()와 Global이 생성되면서, <strong>outer Lexcial Environment</strong>에 의해서 연결이 된다.</p>\n<p>정리를 해보자!\n<strong>함수가 생성되면 실행 컨텍스트가 생성되고, 그리하여 렉시컬 환경의 내부 outer Lexical Environment가 상위 환경레코드와 연결이 됨으로써 내부 함수 정보 탐색이 가능하게 되는 것이다.</strong></p>\n<p>자세한 내용은 아래를 참고해보자.</p>\n<ul>\n<li><a href=\"http://dmitrysoshnikov.com/ecmascript/es5-chapter-3-2-lexical-environments-ecmascript-implementation/#lexical-environment\">ECMA-262-5 in detail. Chapter 3.2. Lexical environments: ECMAScript implementation. – Dmitry Soshnikov(ES6 이후)</a></li>\n<li><a href=\"http://dmitrysoshnikov.com/ecmascript/javascript-the-core/#scope-chain\">JavaScript Core - Scope Chain(ES6 이전)</a></li>\n<li><a href=\"https://poiemaweb.com/js-execution-context\">실행 컨텍스트와 자바스크립트의 동작원리 - PoiemaWeb</a></li>\n<li><a href=\"https://meetup.toast.com/posts/129\">자바스크립트 함수(3) - Lexical Environment : TOAST Meetup</a></li>\n</ul>\n<p><strong>3. This Binding(This 바인딩)</strong></p>\n<p><code class=\"language-text\">this</code>의 값이 여기서 결정된다.</p>\n<p>글로벌 실행 컨텍스트에서 <code class=\"language-text\">this</code>는 global object이다. 함수 실행 컨텍스트는 <code class=\"language-text\">this</code> 값은 어떻게 함수가 호출되었는지에 따라 달라진다. 만약, 함수가 object reference로 호출되었다면 <code class=\"language-text\">this</code> 는 해당 객체를 가리키게 된다. 그렇지 않으면 this는 글로벌 객체(window)를 가리키거나 <strong>strict mode</strong>에서는 <code class=\"language-text\">undefined</code>를 가리키고 있다.</p>\n<p>단순하게 설명하면, 초기에 this는 window를 가르키지만, new를 통하여 객체를 할당할 경우에 변경이 된다. (strict mode시에는 초기에 undefined를 가르킨다.)</p>\n<p>여기까지가 생성 단계(Creation Phase)의 내용이였다.</p>\n<p>간단히 정리를 해보자면, 생성 단계에서는 아래와 같은 일들이 벌어진다.</p>\n<ul>\n<li>Scope Chain, 변수, 함수, 인자들을 만든다.</li>\n<li>this 를 결정한다.</li>\n<li>자바스크립트 엔진의 Syntax Parser가 코드를 읽으면서 컴퓨터가 알아들을 수 있는 언어로 변환된다.</li>\n<li>자바스크립트 엔진은 코드를 읽으면서 변수와 함수의 선언된 것을 찾고 메모리에 해당 변수와 함수를 저장한다. (호이스팅)</li>\n</ul>\n<hr>\n<h3 id=\"step-132-실행-단계execution-phase\" style=\"position:relative;\"><a href=\"#step-132-%EC%8B%A4%ED%96%89-%EB%8B%A8%EA%B3%84execution-phase\" aria-label=\"step 132 실행 단계execution phase permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STEP 1.3.2 실행 단계(Execution Phase)</h3>\n<p>이제 코드를 통해서, 생성단계와 실행단계를 알아보도록 하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> a <span class=\"token operator\">=</span> <span class=\"token number\">20</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> b <span class=\"token operator\">=</span> <span class=\"token number\">30</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> c<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">multiply</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e<span class=\"token punctuation\">,</span> f</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> g <span class=\"token operator\">=</span> <span class=\"token number\">20</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> e <span class=\"token operator\">*</span> f <span class=\"token operator\">*</span> g<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\nc <span class=\"token operator\">=</span> <span class=\"token function\">multiply</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABPElEQVQoz4WSzXKDMAyEef+n6vRAk5QEY+vPJnmW7UhAhk5actiLNf60K6kTEQzXAeM4IqUUmqYJtVbc7/cXzfN8qI6ZA+LAKWfU2tBai+JfgHfgzp3knJFSRikMNYOqRtHMorbXf843dbU6oAfRJ3L5APMJsgId7PH38jf/aKJgYogZWqvRyJOFQ6IRzAlMI6oR6hp5A27u9kBlgY9LbYH9AuZCkCJQUYjoM/IR0FShIpBVqhZGOo9XSgZRARGBhV+AvqxpD3w8YCSglBcz7lRtceiD9y1fbyNyLvHort859CRUCsiji8J38Yzss3CYw2ursGoLUATT9xfGS4906ZGHE0wlgP5PTeMqbD21NntkkeiuxEtk5gDH2agE5HbuQ3k4x+wOz8a8k2pAvKNFR3searhet1jXRkeH/QMoyATr9ilu9QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"execution-context\"\n        title=\"execution-context\"\n        src=\"/static/ac0cdd415b657b6546220e5d00215953/37523/execution-phase1.png\"\n        srcset=\"/static/ac0cdd415b657b6546220e5d00215953/e9ff0/execution-phase1.png 180w,\n/static/ac0cdd415b657b6546220e5d00215953/f21e7/execution-phase1.png 360w,\n/static/ac0cdd415b657b6546220e5d00215953/37523/execution-phase1.png 720w,\n/static/ac0cdd415b657b6546220e5d00215953/774b6/execution-phase1.png 738w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>자바스크립트 엔진은 <code class=\"language-text\">script</code> 태그를 만났을 경우에 a, b, multiply()는 LexicalEnvironment에 등록을 하고, 변수 c는 variableEnvironment의 환경 레코드(이름:값)에 등록한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABO0lEQVQoz5WTa07EMAyEe/9jISQWaJsmju04LWcZZHfb1YpdED+miaLk8/jRgYgwjiPGacScZtRaUbmitYZt2x5qXdenGpoZcibMqSAXhtkKM8O6bei9Q0Tu5I+eBXINZg0sU0h1gmgCXx86YFkW5JxDvj+cezDrPVa/29d9DWDlN4i+o7ULzBLM+gl0UCkl5PsDKIVAVMHaIiOXwwffEDGkKoQbtFk8+guoVaCq0KZx5gqgtgZvDNcKZo6mOChc3AHzPZAYtHjdCbUyRPUKVI3apLSgEEW60ZSHDssNKAqpvLtUvaXsH4+QlnKNYmjWosvCjDx9oMyfp06gaowXsZx1PB16mhq297pEDR1YCenyguX99VRT/XUWA0gOFIkauo6mxEiV5SbK4eIAPpzD3n9GOWZqv/T1rz/lG65GBXThNa82AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"execution-context\"\n        title=\"execution-context\"\n        src=\"/static/d1810c752ac3c3fafd1194a5e8df5177/37523/execution-phase2.png\"\n        srcset=\"/static/d1810c752ac3c3fafd1194a5e8df5177/e9ff0/execution-phase2.png 180w,\n/static/d1810c752ac3c3fafd1194a5e8df5177/f21e7/execution-phase2.png 360w,\n/static/d1810c752ac3c3fafd1194a5e8df5177/37523/execution-phase2.png 720w,\n/static/d1810c752ac3c3fafd1194a5e8df5177/774b6/execution-phase2.png 738w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>전역 컨텍스트의 실행 단계에서 코드가 실행되고, 각각의 변수에 값이 할당된다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABtUlEQVQoz31T2W7cMBDb//+3PLR52CBIEbf1sTosS7Ju28tixps8FEEEEGMIEs0hRxdrLcZxhBCCMU0TlFJoreF+vzP+Xx/7X+HinMMwDOj7Hkpp5JxRa0WpBW1rOI6DyT+w7/v3hHRZSolhvGG8aaxrRCmFsW0bvPesnM5QXZblC6KDf8yEdMk6B2sdljXCxwSzWKwhoG07nLNMRDZIKWDmGWRCSxl+trAhcUcE4rqQEmp11pov6UddzMItkiVCSt4nlcYYJqwxY10cUi4oD4s+Cdd1RUoJMQb+jjHCe4daG1ajIN+vkN0LdPcCK4ZTYS7wykDPhm1YQ0QjwhAChJAMaz1a2x4BVGz7gXUWUG8/Id6eoX89w97+nISlwkkD6zxiiMglnwprLZDyhn6cIJVmlZQ0h7Lv8EZBd1csf18xd1dY0Z+EtcE7B+M8XCwsYtuJsBWEOML530hpQM4WpZwm78cBKycM1ydMrz8wXp+g+3cmpERpZruuY89pGijpS0wJQijMeubKASjF5pPKVguCNYhu4VpS/CSkR0HnajsT5rGhhEKM3CYh5cSVgiGVX63vXtA/nmJP2BdM3foAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"execution-context\"\n        title=\"execution-context\"\n        src=\"/static/1f4ef112f2f2653959dfd3464013d508/37523/execution-phase3.png\"\n        srcset=\"/static/1f4ef112f2f2653959dfd3464013d508/e9ff0/execution-phase3.png 180w,\n/static/1f4ef112f2f2653959dfd3464013d508/f21e7/execution-phase3.png 360w,\n/static/1f4ef112f2f2653959dfd3464013d508/37523/execution-phase3.png 720w,\n/static/1f4ef112f2f2653959dfd3464013d508/774b6/execution-phase3.png 738w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>multiply 함수가 호출되는 순간 multiply() 함수의 실행 컨텍스트가 생성된다. 외부 환경으로는 전역 컨텍스트를 참조하고 있고, object reference로 호출되지 않았기 때문에 해당 생성시점의 this는 window와 같은 글로벌 오브젝트이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABvklEQVQoz3VTi46cMAzk/7+u7d1W7bW3L1gIhLx4hAAJU9mUba9SQcZokoztsZM55yCEQNM07Ou6ZlvXFfRs28b27/M/LDPGMIGUElpreO8xTROWZcGyLogxIqaIEMLTjmC05288pYSs6zoURYHrLUctDcK8YJ5nhDDzJiIchoGDUhXkKTAdVkp9wMdxRBbmGZSlNg7KjXCDh7UWfgpMTIR93z+rqJuGCQlv25bJGK9rDpzRhyIZrdH8PtRKCWcdl34Q0lorG/YHoWJCOnNkOCDzfuJUqTwiOPQ4/mNKGKxC8/6K5nxCez7B1gXjVgro6g4tcqjqjnHokVGXq6pE8XhAG8tCU6mHjzFhtArt+RXyfIK6nOAOwlbAiDtMXUCLOzwRTlMH43IoncN2JULwnDEZNYya1FvNGarbNyYlkpg2yPwd5dsXlD9e2IbO7l1WmjRsIeWuIWlK+K5hQm8Uyu+fIH6+oHr7DF3ekDbAVleWgNbU9St873YNqTHj6DH0wzM7P45c8hojUoyYw7Tb5LEuC8+htQblo4CoSjS14EZlKW3P28Dv9sdo1sgI/3gjdq+NweVyQZ4XPHo08L8ADvRKNVDZxTMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"execution-context\"\n        title=\"execution-context\"\n        src=\"/static/bdc5ce987669f26f425b7b06fac25f77/37523/execution-phase4.png\"\n        srcset=\"/static/bdc5ce987669f26f425b7b06fac25f77/e9ff0/execution-phase4.png 180w,\n/static/bdc5ce987669f26f425b7b06fac25f77/f21e7/execution-phase4.png 360w,\n/static/bdc5ce987669f26f425b7b06fac25f77/37523/execution-phase4.png 720w,\n/static/bdc5ce987669f26f425b7b06fac25f77/774b6/execution-phase4.png 738w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>multiply 함수가 값을 리턴하면서 호출 스택에서 pop된다.\n전역 컨텍스트에 있던 전역 변수 c에 결과 값이 업데이트가 되며, 그 후 글로벌 코드가 끝나면 프로그램도 종료된다.</p>\n<h1 id=\"review\" style=\"position:relative;\"><a href=\"#review\" aria-label=\"review permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Review</h1>\n<p>ES6와 ES5의 차이점을 이해하기 위해서 let이라는 키워드로 출발하여, 호이스팅과 실행컨텍스트에 대한 개념까지 다뤄봤다.</p>\n<p>원래는 클로저와 const 키워드까지 다루려고 하였는데 생각보다 양이 매우 많아져서 챕터를 나누기로 하였다. 자바스크립트 원리에 대해서는 다양하게 인터넷에 설명하고 있는 자료들이 많으니, 참고하기를 바란다.</p>\n<h1 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h1>\n<ul>\n<li><a href=\"http://www.ecma-international.org/ecma-262/6.0/\">ECMAScript 2015 Language Specification</a></li>\n<li><a href=\"https://poiemaweb.com/es6-block-scope\">let, const - PoiemaWeb</a></li>\n<li><a href=\"https://velog.io/@imacoolgirlyo/JS-%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EC%9D%98-Hoisting-The-Execution-Context-%ED%98%B8%EC%9D%B4%EC%8A%A4%ED%8C%85-%EC%8B%A4%ED%96%89-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8-6bjsmmlmgy\">JS 자바스크립트의 The Execution Context (실행 컨텍스트) 와 Hoisting (호이스팅)</a></li>\n<li><a href=\"https://meetup.toast.com/posts/129\">자바스크립트 함수(3) - Lexical Environment : TOAST Meetup</a></li>\n<li><a href=\"https://blog.bitsrc.io/understanding-scope-and-scope-chain-in-javascript-f6637978cf53\">Understanding Scope and Scope Chain in JavaScript</a></li>\n<li><a href=\"http://dmitrysoshnikov.com/ecmascript/es5-chapter-3-2-lexical-environments-ecmascript-implementation/#lexical-environment\">ECMA-262-5 in detail. Chapter 3.2. Lexical environments</a></li>\n<li><a href=\"http://dmitrysoshnikov.com/ecmascript/javascript-the-core/#scope-chain\">JavaScript. The Core - Scope Chain</a></li>\n<li><a href=\"https://tyle.io/blog/54\">JS 스코프 체인 이란? -tyle.io</a></li>\n</ul>\n<div class=\"footnotes\">\n<hr>\n<ol>\n<li id=\"fn-1\"><a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/%EC%96%B8%EC%96%B4_%EB%A6%AC%EC%86%8C%EC%8A%A4\">자바스크립트 언어 자료 - JavaScript MDN</a><a href=\"#fnref-1\" class=\"footnote-backref\">↩</a></li>\n</ol>\n</div>","frontmatter":{"date":"September 09, 2019","title":"자바스크립트 동작원리와 ES6 - Fundamentals of JavaScript & ES6","categories":"개발","author":"개발한입","emoji":"💻"},"fields":{"slug":"/fundamentals-of-javascript/"}},"site":{"siteMetadata":{"siteUrl":"https://brewagebear.github.io","comments":{"utterances":{"repo":"brewagebear/blog-comments"}}}}},"pageContext":{"slug":"/hello-servlet-request/","nextSlug":"/front-controller-and-command-pattern/","prevSlug":"/fundamentals-of-javascript/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}